!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=200)}([function(e,t,n){var r=n(3),i=n(20),o=n(26),a=n(27),s=n(32),l=function e(t,n,l){var u,c,h,f,d=t&e.F,p=t&e.G,v=t&e.S,y=t&e.P,g=t&e.B,m=p?r:v?r[n]||(r[n]={}):(r[n]||{}).prototype,b=p?i:i[n]||(i[n]={}),_=b.prototype||(b.prototype={});p&&(l=n);for(u in l)c=!d&&m&&void 0!==m[u],h=(c?m:l)[u],f=g&&c?s(h,r):y&&"function"==typeof h?s(Function.call,h):h,m&&a(m,u,h,t&e.U),b[u]!=h&&o(b,u,f),y&&_[u]!=h&&(_[u]=h)};r.core=i,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var a=n(11),s=i(a),l=n(12),u=r(l),c=n(7),h=r(c),f=n(64),d=r(f),p=n(51),v=r(p),y=n(31),g=i(y),m=n(65),b=i(m),_=n(44),E=i(_),k=function(){function e(t,n,r){if(o(this,e),!t&&this.play?this.player_=t=this:this.player_=t,this.options_=(0,E.default)({},this.options_),n=this.options_=(0,E.default)(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){var i=t&&t.id&&t.id()||"no_player";this.id_=i+"_component_"+d.newGUID()}this.name_=n.name||null,n.el?this.el_=n.el:!1!==n.createEl&&(this.el_=this.createEl()),this.children_=[],this.childIndex_={},this.childNameIndex_={},!1!==n.initChildren&&this.initChildren(),this.ready(r),!1!==n.reportTouchActivity&&this.enableTouchActivity()}return e.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.off(),this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),u.removeElData(this.el_),this.el_=null},e.prototype.player=function(){return this.player_},e.prototype.options=function(e){return g.default.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),e?(this.options_=(0,E.default)(this.options_,e),this.options_):this.options_},e.prototype.el=function(){return this.el_},e.prototype.createEl=function(e,t,n){return u.createEl(e,t,n)},e.prototype.localize=function(e){var t=this.player_.language&&this.player_.language(),n=this.player_.languages&&this.player_.languages();if(!t||!n)return e;var r=n[t];if(r&&r[e])return r[e];var i=t.split("-")[0],o=n[i];return o&&o[e]?o[e]:e},e.prototype.contentEl=function(){return this.contentEl_||this.el_},e.prototype.id=function(){return this.id_},e.prototype.name=function(){return this.name_},e.prototype.children=function(){return this.children_},e.prototype.getChildById=function(e){return this.childIndex_[e]},e.prototype.getChild=function(e){if(e)return e=(0,b.default)(e),this.childNameIndex_[e]},e.prototype.addChild=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.children_.length,i=void 0,o=void 0;if("string"==typeof t){o=(0,b.default)(t),n||(n={}),!0===n&&(g.default.warn("Initializing a child component with `true` is deprecated.Children should be defined in an array when possible, but if necessary use an object instead of `true`."),n={});var a=n.componentClass||o;n.name=o;var s=e.getComponent(a);if(!s)throw new Error("Component "+a+" does not exist");if("function"!=typeof s)return null;i=new s(this.player_||this,n)}else i=t;if(this.children_.splice(r,0,i),"function"==typeof i.id&&(this.childIndex_[i.id()]=i),o=o||i.name&&(0,b.default)(i.name()),o&&(this.childNameIndex_[o]=i),"function"==typeof i.el&&i.el()){var l=this.contentEl().children,u=l[r]||null;this.contentEl().insertBefore(i.el(),u)}return i},e.prototype.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){this.childIndex_[e.id()]=null,this.childNameIndex_[e.name()]=null;var r=e.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},e.prototype.initChildren=function(){var t=this,n=this.options_.children;if(n){var r=this.options_,i=function(e){var n=e.name,i=e.opts;if(void 0!==r[n]&&(i=r[n]),!1!==i){!0===i&&(i={}),i.playerOptions=t.options_.playerOptions;var o=t.addChild(n,i);o&&(t[n]=o)}},o=void 0,a=e.getComponent("Tech");o=Array.isArray(n)?n:Object.keys(n),o.concat(Object.keys(this.options_).filter(function(e){return!o.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(function(e){var r=void 0,i=void 0;return"string"==typeof e?(r=e,i=n[r]||t.options_[r]||{}):(r=e.name,i=e),{name:r,opts:i}}).filter(function(t){var n=e.getComponent(t.opts.componentClass||(0,b.default)(t.name));return n&&!a.isTech(n)}).forEach(i)}},e.prototype.buildCSSClass=function(){return""},e.prototype.on=function(e,t,n){var r=this;if("string"==typeof e||Array.isArray(e))v.on(this.el_,e,h.bind(this,t));else{var i=e,o=t,a=h.bind(this,n),s=function(){return r.off(i,o,a)};s.guid=a.guid,this.on("dispose",s);var l=function(){return r.off("dispose",s)};l.guid=a.guid,e.nodeName?(v.on(i,o,a),v.on(i,"dispose",l)):"function"==typeof e.on&&(i.on(o,a),i.on("dispose",l))}return this},e.prototype.off=function(e,t,n){if(!e||"string"==typeof e||Array.isArray(e))v.off(this.el_,e,t);else{var r=e,i=t,o=h.bind(this,n);this.off("dispose",o),e.nodeName?(v.off(r,i,o),v.off(r,"dispose",o)):(r.off(i,o),r.off("dispose",o))}return this},e.prototype.one=function(e,t,n){var r=this,i=arguments;if("string"==typeof e||Array.isArray(e))v.one(this.el_,e,h.bind(this,t));else{var o=e,a=t,s=h.bind(this,n),l=function e(){r.off(o,a,e),s.apply(null,i)};l.guid=s.guid,this.on(o,a,l)}return this},e.prototype.trigger=function(e,t){return v.trigger(this.el_,e,t),this},e.prototype.ready=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(this.isReady_?t?e.call(this):this.setTimeout(e,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e))),this},e.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},e.prototype.$=function(e,t){return u.$(e,t||this.contentEl())},e.prototype.$$=function(e,t){return u.$$(e,t||this.contentEl())},e.prototype.hasClass=function(e){return u.hasElClass(this.el_,e)},e.prototype.addClass=function(e){return u.addElClass(this.el_,e),this},e.prototype.removeClass=function(e){return u.removeElClass(this.el_,e),this},e.prototype.toggleClass=function(e,t){return u.toggleElClass(this.el_,e,t),this},e.prototype.show=function(){return this.removeClass("vjs-hidden"),this},e.prototype.hide=function(){return this.addClass("vjs-hidden"),this},e.prototype.lockShowing=function(){return this.addClass("vjs-lock-showing"),this},e.prototype.unlockShowing=function(){return this.removeClass("vjs-lock-showing"),this},e.prototype.getAttribute=function(e){return u.getAttribute(this.el_,e)},e.prototype.setAttribute=function(e,t){return u.setAttribute(this.el_,e,t),this},e.prototype.removeAttribute=function(e){return u.removeAttribute(this.el_,e),this},e.prototype.width=function(e,t){return this.dimension("width",e,t)},e.prototype.height=function(e,t){return this.dimension("height",e,t)},e.prototype.dimensions=function(e,t){return this.width(e,!0).height(t)},e.prototype.dimension=function(e,t,n){if(void 0!==t)return null!==t&&t===t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",n||this.trigger("resize"),this;if(!this.el_)return 0;var r=this.el_.style[e],i=r.indexOf("px");return-1!==i?parseInt(r.slice(0,i),10):parseInt(this.el_["offset"+(0,b.default)(e)],10)},e.prototype.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if("function"==typeof s.default.getComputedStyle){var n=s.default.getComputedStyle(this.el_);t=n.getPropertyValue(e)||n[e]}if(0===(t=parseFloat(t))){var r="offset"+(0,b.default)(e);t=this.el_[r]}return t},e.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.prototype.currentWidth=function(){return this.currentDimension("width")},e.prototype.currentHeight=function(){return this.currentDimension("height")},e.prototype.focus=function(){this.el_.focus()},e.prototype.blur=function(){this.el_.blur()},e.prototype.emitTapEvents=function(){var e=0,t=null,n=void 0;this.on("touchstart",function(r){1===r.touches.length&&(t={pageX:r.touches[0].pageX,pageY:r.touches[0].pageY},e=(new Date).getTime(),n=!0)}),this.on("touchmove",function(e){if(e.touches.length>1)n=!1;else if(t){var r=e.touches[0].pageX-t.pageX,i=e.touches[0].pageY-t.pageY,o=Math.sqrt(r*r+i*i);o>10&&(n=!1)}});var r=function(){n=!1};this.on("touchleave",r),this.on("touchcancel",r),this.on("touchend",function(r){if(t=null,!0===n){(new Date).getTime()-e<200&&(r.preventDefault(),this.trigger("tap"))}})},e.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e=h.bind(this.player(),this.player().reportUserActivity),t=void 0;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});var n=function(n){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}},e.prototype.setTimeout=function(e,t){e=h.bind(this,e);var n=s.default.setTimeout(e,t),r=function(){this.clearTimeout(n)};return r.guid="vjs-timeout-"+n,this.on("dispose",r),n},e.prototype.clearTimeout=function(e){s.default.clearTimeout(e);var t=function(){};return t.guid="vjs-timeout-"+e,this.off("dispose",t),e},e.prototype.setInterval=function(e,t){e=h.bind(this,e);var n=s.default.setInterval(e,t),r=function(){this.clearInterval(n)};return r.guid="vjs-interval-"+n,this.on("dispose",r),n},e.prototype.clearInterval=function(e){s.default.clearInterval(e);var t=function(){};return t.guid="vjs-interval-"+e,this.off("dispose",t),e},e.registerComponent=function(t,n){if(t){if(t=(0,b.default)(t),e.components_||(e.components_={}),"Player"===t&&e.components_[t]){var r=e.components_[t];if(r.players&&Object.keys(r.players).length>0&&Object.keys(r.players).map(function(e){return r.players[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created")}return e.components_[t]=n,n}},e.getComponent=function(t){if(t)return t=(0,b.default)(t),e.components_&&e.components_[t]?e.components_[t]:s.default&&s.default.videojs&&s.default.videojs[t]?(g.default.warn("The "+t+" component was added to the videojs object when it should be registered using videojs.registerComponent(name, component)"),s.default.videojs[t]):void 0},e.extend=function(t){t=t||{},g.default.warn("Component.extend({}) has been deprecated,  use videojs.extend(Component, {}) instead");var n=t.init||t.init||this.prototype.init||this.prototype.init||function(){},r=function(){n.apply(this,arguments)};r.prototype=Object.create(this.prototype),r.prototype.constructor=r,r.extend=e.extend;for(var i in t)t.hasOwnProperty(i)&&(r.prototype[i]=t[i]);return r},e}();k.registerComponent("Component",k),t.default=k},function(e,t,n){var r=n(5);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return"object"===(void 0===e?"undefined":n(e))?null!==e:"function"==typeof e}},function(e,t,n){var r=n(66)("wks"),i=n(53),o=n(3).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){"use strict";t.__esModule=!0,t.throttle=t.bind=void 0;var r=n(64);t.bind=function(e,t,n){t.guid||(t.guid=(0,r.newGUID)());var i=function(){return t.apply(e,arguments)};return i.guid=n?n+"_"+t.guid:t.guid,i},t.throttle=function(e,t){var n=Date.now();return function(){var r=Date.now();r-n>=t&&(e.apply(void 0,arguments),n=r)}}},function(e,t,n){"use strict";function r(){}function i(e,t){return t="["+e+"] > "+t}function o(e){var t=self.console[e];return t?function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];r[0]&&(r[0]=i(e,r[0])),t.apply(self.console,r)}:r}function a(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(t){u[t]=e[t]?e[t].bind(e):o(t)})}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l={trace:r,debug:r,log:r,warn:r,info:r,error:r},u=l;t.enableLogs=function(e){if(!0===e||"object"===(void 0===e?"undefined":s(e))){a(e,"debug","log","info","warn","error");try{u.log()}catch(e){u=l}}else u=l},t.logger=u},function(e,t,n){e.exports=!n(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(34),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){(function(t){"undefined"!=typeof window?e.exports=window:void 0!==t?e.exports=t:"undefined"!=typeof self?e.exports=self:e.exports={}}).call(t,n(63))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return"string"==typeof e&&/\S/.test(e)}function o(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function a(e){return new RegExp("(^|\\s)"+e+"($|\\s)")}function s(){return N.default===B.default.document&&void 0!==N.default.createElement}function l(e){return(0,z.isObject)(e)&&1===e.nodeType}function u(e){return function(t,n){if(!i(t))return N.default[e](null);i(n)&&(n=N.default.querySelector(n));var r=l(n)?n:N.default;return r[e]&&r[e](t)}}function c(e){return 0===e.indexOf("#")&&(e=e.slice(1)),N.default.getElementById(e)}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3],i=N.default.createElement(e);return Object.getOwnPropertyNames(t).forEach(function(e){var n=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(G.default.warn((0,K.default)(M,e,n)),i.setAttribute(e,n)):"textContent"===e?f(i,n):i[e]=n}),Object.getOwnPropertyNames(n).forEach(function(e){i.setAttribute(e,n[e])}),r&&D(i,r),i}function f(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function d(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function p(e){var t=e[q];return t||(t=e[q]=H.newGUID()),X[t]||(X[t]={}),X[t]}function v(e){var t=e[q];return!!t&&!!Object.getOwnPropertyNames(X[t]).length}function y(e){var t=e[q];if(t){delete X[t];try{delete e[q]}catch(t){e.removeAttribute?e.removeAttribute(q):e[q]=null}}}function g(e,t){return o(t),e.classList?e.classList.contains(t):a(t).test(e.className)}function m(e,t){return e.classList?e.classList.add(t):g(e,t)||(e.className=(e.className+" "+t).trim()),e}function b(e,t){return e.classList?e.classList.remove(t):(o(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function _(e,t,n){var r=g(e,t);if("function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=!r),n!==r)return n?m(e,t):b(e,t),e}function E(e,t){Object.getOwnPropertyNames(t).forEach(function(n){var r=t[n];null===r||void 0===r||!1===r?e.removeAttribute(n):e.setAttribute(n,!0===r?"":r)})}function k(e){var t={};if(e&&e.attributes&&e.attributes.length>0)for(var n=e.attributes,r=n.length-1;r>=0;r--){var i=n[r].name,o=n[r].value;"boolean"!=typeof e[i]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+i+",")||(o=null!==o),t[i]=o}return t}function T(e,t){return e.getAttribute(t)}function w(e,t,n){e.setAttribute(t,n)}function S(e,t){e.removeAttribute(t)}function C(){N.default.body.focus(),N.default.onselectstart=function(){return!1}}function O(){N.default.onselectstart=function(){return!0}}function P(e){var t=void 0;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var n=N.default.documentElement,r=N.default.body,i=n.clientLeft||r.clientLeft||0,o=B.default.pageXOffset||r.scrollLeft,a=t.left+o-i,s=n.clientTop||r.clientTop||0,l=B.default.pageYOffset||r.scrollTop,u=t.top+l-s;return{left:Math.round(a),top:Math.round(u)}}function R(e,t){var n={},r=P(e),i=e.offsetWidth,o=e.offsetHeight,a=r.top,s=r.left,l=t.pageY,u=t.pageX;return t.changedTouches&&(u=t.changedTouches[0].pageX,l=t.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(a-l+o)/o)),n.x=Math.max(0,Math.min(1,(u-s)/i)),n}function L(e){return(0,z.isObject)(e)&&3===e.nodeType}function A(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function x(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),l(e)||L(e)?e:"string"==typeof e&&/\S/.test(e)?N.default.createTextNode(e):void 0}).filter(function(e){return e})}function D(e,t){return x(t).forEach(function(t){return e.appendChild(t)}),e}function I(e,t){return D(A(e),t)}t.__esModule=!0,t.$$=t.$=void 0;var M=function(e,t){return e.raw=t,e}(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);t.isReal=s,t.isEl=l,t.getEl=c,t.createEl=h,t.textContent=f,t.insertElFirst=d,t.getElData=p,t.hasElData=v,t.removeElData=y,t.hasElClass=g,t.addElClass=m,t.removeElClass=b,t.toggleElClass=_,t.setElAttributes=E,t.getElAttributes=k,t.getAttribute=T,t.setAttribute=w,t.removeAttribute=S,t.blockTextSelection=C,t.unblockTextSelection=O,t.findElPosition=P,t.getPointerPosition=R,t.isTextNode=L,t.emptyEl=A,t.normalizeContent=x,t.appendContent=D,t.insertContent=I;var j=n(15),N=r(j),F=n(11),B=r(F),U=n(64),H=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(U),V=n(31),G=r(V),W=n(176),K=r(W),z=n(23),X={},q="vdata"+(new Date).getTime();t.$=u("querySelector"),t.$$=u("querySelectorAll")},function(e,t,n){"use strict";e.exports={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(e,t,n){var r=n(2),i=n(138),o=n(36),a=Object.defineProperty;t.f=n(9)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){(function(t){var r=void 0!==t?t:"undefined"!=typeof window?window:{},i=n(128);if("undefined"!=typeof document)e.exports=document;else{var o=r["__GLOBAL_DOCUMENT_CACHE@4"];o||(o=r["__GLOBAL_DOCUMENT_CACHE@4"]=i),e.exports=o}}).call(t,n(63))},function(e,t,n){var r=n(37);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var r=void 0;if("string"==typeof e){if(0===e.indexOf("#")&&(e=e.slice(1)),o.getPlayers()[e])return t&&K.default.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&o.getPlayers()[e].ready(n),o.getPlayers()[e];r=y.getEl(e)}else r=e;if(!r||!r.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");if(r.player||P.default.players[r.playerId])return r.player||P.default.players[r.playerId];t=t||{},o.hooks("beforesetup").forEach(function(e){var n=e(r,(0,x.default)(t));if(!(0,q.isObject)(n)||Array.isArray(n))return void K.default.error("please return an object in beforesetup hooks");t=(0,x.default)(t,n)});var i=k.default.getComponent("Player"),a=new i(r,t,n);return o.hooks("setup").forEach(function(e){return e(a)}),a}var a,s,l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var u=("function"==typeof Symbol&&l(Symbol.iterator),n(11)),c=i(u),h=n(15),f=i(h),d=n(21),p=r(d),v=n(12),y=r(v),g=n(415),m=r(g),b=n(177),_=r(b),E=n(1),k=i(E),T=n(93),w=i(T),S=n(51),C=r(S),O=n(178),P=i(O),R=n(469),L=i(R),A=n(44),x=i(A),D=n(7),I=r(D),M=n(129),j=i(M),N=n(470),F=i(N),B=n(471),U=i(B),H=n(72),V=n(52),G=i(V),W=n(31),K=i(W),z=n(94),X=r(z),q=n(23),Y=n(133),$=i(Y),Q=n(472),J=i(Q),Z=n(182),ee=i(Z),te=n(73),ne=i(te);if("undefined"==typeof HTMLVideoElement&&y.isReal()&&(f.default.createElement("video"),f.default.createElement("audio"),f.default.createElement("track")),o.hooks_={},o.hooks=function(e,t){return o.hooks_[e]=o.hooks_[e]||[],t&&(o.hooks_[e]=o.hooks_[e].concat(t)),o.hooks_[e]},o.hook=function(e,t){o.hooks(e,t)},o.removeHook=function(e,t){var n=o.hooks(e).indexOf(t);return!(n<=-1)&&(o.hooks_[e]=o.hooks_[e].slice(),o.hooks_[e].splice(n,1),!0)},!0!==c.default.VIDEOJS_NO_DYNAMIC_STYLE&&y.isReal()){var re=y.$(".vjs-styles-defaults");if(!re){re=_.createStyleElement("vjs-styles-defaults");var ie=y.$("head");ie&&ie.insertBefore(re,ie.firstChild),_.setTextContent(re,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}m.autoSetupTimeout(1,o),o.VERSION="5.20.5",o.options=P.default.prototype.options_,o.getPlayers=function(){return P.default.players},o.players=P.default.players,o.getComponent=k.default.getComponent,o.registerComponent=function(e,t){ne.default.isTech(t)&&K.default.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),k.default.registerComponent.call(k.default,e,t)},o.getTech=ne.default.getTech,o.registerTech=ne.default.registerTech,o.browser=p,o.TOUCH_ENABLED=p.TOUCH_ENABLED,o.extend=J.default,o.mergeOptions=x.default,o.bind=I.bind,o.plugin=L.default,o.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),o.options.languages=(0,x.default)(o.options.languages,(n={},n[e]=t,n)),o.options.languages[e]},o.log=K.default,o.createTimeRange=o.createTimeRanges=H.createTimeRanges,o.formatTime=G.default,o.parseUrl=X.parseUrl,o.isCrossOrigin=X.isCrossOrigin,o.EventTarget=w.default,o.on=C.on,o.one=C.one,o.off=C.off,o.trigger=C.trigger,o.xhr=ee.default,o.TextTrack=j.default,o.AudioTrack=F.default,o.VideoTrack=U.default,o.isEl=y.isEl,o.isTextNode=y.isTextNode,o.createEl=y.createEl,o.hasClass=y.hasElClass,o.addClass=y.addElClass,o.removeClass=y.removeElClass,o.toggleClass=y.toggleElClass,o.setAttributes=y.setElAttributes,o.getAttributes=y.getElAttributes,o.emptyEl=y.emptyEl,o.appendContent=y.appendContent,o.insertContent=y.insertContent,o.computedStyle=$.default,a=[],void 0!==(s=function(){return o}.apply(t,a))&&(e.exports=s),t.default=o},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},t.ErrorDetails={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException",WEBVTT_EXCEPTION:"webVTTException"}},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";t.__esModule=!0,t.BACKGROUND_SIZE_SUPPORTED=t.TOUCH_ENABLED=t.IS_ANY_SAFARI=t.IS_SAFARI=t.IE_VERSION=t.IS_IE8=t.CHROME_VERSION=t.IS_CHROME=t.IS_EDGE=t.IS_FIREFOX=t.IS_NATIVE_ANDROID=t.IS_OLD_ANDROID=t.ANDROID_VERSION=t.IS_ANDROID=t.IOS_VERSION=t.IS_IOS=t.IS_IPOD=t.IS_IPHONE=t.IS_IPAD=void 0;var r=n(12),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r),o=n(11),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=a.default.navigator&&a.default.navigator.userAgent||"",l=/AppleWebKit\/([\d.]+)/i.exec(s),u=l?parseFloat(l.pop()):null,c=t.IS_IPAD=/iPad/i.test(s),h=t.IS_IPHONE=/iPhone/i.test(s)&&!c,f=t.IS_IPOD=/iPod/i.test(s),d=t.IS_IOS=h||c||f,p=(t.IOS_VERSION=function(){var e=s.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),t.IS_ANDROID=/Android/i.test(s)),v=t.ANDROID_VERSION=function(){var e=s.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),y=(t.IS_OLD_ANDROID=p&&/webkit/i.test(s)&&v<2.3,t.IS_NATIVE_ANDROID=p&&v<5&&u<537,t.IS_FIREFOX=/Firefox/i.test(s),t.IS_EDGE=/Edge/i.test(s)),g=t.IS_CHROME=!y&&/Chrome/i.test(s),m=(t.CHROME_VERSION=function(){var e=s.match(/Chrome\/(\d+)/);return e&&e[1]?parseFloat(e[1]):null}(),t.IS_IE8=/MSIE\s8\.0/.test(s),t.IE_VERSION=function(){var e=/MSIE\s(\d+)\.\d/.exec(s),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(s)&&/rv:11.0/.test(s)&&(t=11),t}(),t.IS_SAFARI=/Safari/i.test(s)&&!g&&!p&&!y);t.IS_ANY_SAFARI=m||d,t.TOUCH_ENABLED=i.isReal()&&("ontouchstart"in a.default||a.default.DocumentTouch&&a.default.document instanceof a.default.DocumentTouch),t.BACKGROUND_SIZE_SUPPORTED=i.isReal()&&"backgroundSize"in a.default.document.createElement("video").style},function(e,t,n){var r=n(67),i=n(37);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";function r(e,t){h(e).forEach(function(n){return t(e[n],n)})}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return h(e).reduce(function(n,r){return t(n,e[r],r)},n)}function o(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Object.assign?Object.assign.apply(Object,[e].concat(n)):(n.forEach(function(t){t&&r(t,function(t,n){e[n]=t})}),e)}function a(e){return!!e&&"object"===(void 0===e?"undefined":u(e))}function s(e){return a(e)&&"[object Object]"===c.call(e)&&e.constructor===Object}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var u="function"==typeof Symbol&&"symbol"===l(Symbol.iterator)?function(e){return void 0===e?"undefined":l(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":l(e)};t.each=r,t.reduce=i,t.assign=o,t.isObject=a,t.isPlain=s;var c=Object.prototype.toString,h=function(e){return a(e)?Object.keys(e):[]}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(8),s=n(19),l=n(13),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=function(){function e(t){r(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];this.handledEvents=i,this.useGenericHandler=!0,this.registerListeners()}return o(e,[{key:"destroy",value:function(){this.unregisterListeners()}},{key:"isEventHandler",value:function(){return"object"===i(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent}},{key:"registerListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if("hlsEventGeneric"===e)throw new Error("Forbidden event name: "+e);this.hls.on(e,this.onEvent)},this)}},{key:"unregisterListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)}},{key:"onEvent",value:function(e,t){this.onEventGeneric(e,t)}},{key:"onEventGeneric",value:function(e,t){var n=function(e,t){var n="on"+e.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,t)};try{n.call(this,e,t).call()}catch(t){a.logger.error("internal error happened while processing "+e+":"+t.message),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}}}]),e}();t.default=c},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(14),i=n(45);e.exports=n(9)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(3),i=n(26),o=n(25),a=n(53)("src"),s=n(204),l=(""+s).split("toString");n(20).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(u&&(o(n,a)||i(n,a,e[t]?""+e[t]:l.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(e,t,n){var r=n(68),i=n(45),o=n(22),a=n(36),s=n(25),l=n(138),u=Object.getOwnPropertyDescriptor;t.f=n(9)?u:function(e,t){if(e=o(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(25),i=n(16),o=n(101)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(0),i=n(4),o=n(37),a=/"/g,s=function(e,t,n,r){var i=String(o(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},function(e,t,n){"use strict";t.__esModule=!0,t.logByType=void 0;var r=n(11),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=n(21),a=n(23),s=void 0,l=t.logByType=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!!o.IE_VERSION&&o.IE_VERSION<11;"log"!==e&&t.unshift(e.toUpperCase()+":"),s.history.push(t),t.unshift("VIDEOJS:");var r=i.default.console&&i.default.console[e];r&&(n&&(t=t.map(function(e){if((0,a.isObject)(e)||Array.isArray(e))try{return JSON.stringify(e)}catch(t){return String(e)}return String(e)}).join(" ")),r.apply?r[Array.isArray(t)?"apply":"call"](i.default.console,t):r(t))};s=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l("log",t)},s.history=[],s.error=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return l("error",t)},s.warn=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return l("warn",t)},t.default=s},function(e,t,n){var r=n(18);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";var r=n(4);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,n){var r=n(5);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(0),i=n(20),o=n(4);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){var r=n(32),i=n(67),o=n(16),a=n(10),s=n(116);e.exports=function(e,t){var n=1==e,l=2==e,u=3==e,c=4==e,h=6==e,f=5==e||h,d=t||s;return function(t,s,p){for(var v,y,g=o(t),m=i(g),b=r(s,p,3),_=a(m.length),E=0,k=n?d(t,_):l?d(t,0):void 0;_>E;E++)if((f||E in m)&&(v=m[E],y=b(v,E,g),e))if(n)k[E]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return E;case 2:k.push(v)}else if(c)return!1;return h?-1:u||c?c:k}}},function(e,t,n){var r=n(140),i=n(102);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(2),i=n(141),o=n(102),a=n(101)("IE_PROTO"),s=function(){},l=function(){var e,t=n(99)("iframe"),r=o.length;for(t.style.display="none",n(103).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l.prototype[o[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=l(),void 0===t?n:i(n,t)}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};if(n(9)){var i=n(46),o=n(3),a=n(4),s=n(0),l=n(89),u=n(125),c=n(32),h=n(58),f=n(45),d=n(26),p=n(59),v=n(34),y=n(10),g=n(164),m=n(54),b=n(36),_=n(25),E=n(48),k=n(5),T=n(16),w=n(114),S=n(41),C=n(29),O=n(55).f,P=n(69),R=n(53),L=n(6),A=n(39),x=n(77),D=n(71),I=n(118),M=n(56),j=n(84),N=n(57),F=n(117),B=n(154),U=n(14),H=n(28),V=U.f,G=H.f,W=o.RangeError,K=o.TypeError,z=o.Uint8Array,X=Array.prototype,q=u.ArrayBuffer,Y=u.DataView,$=A(0),Q=A(2),J=A(3),Z=A(4),ee=A(5),te=A(6),ne=x(!0),re=x(!1),ie=I.values,oe=I.keys,ae=I.entries,se=X.lastIndexOf,le=X.reduce,ue=X.reduceRight,ce=X.join,he=X.sort,fe=X.slice,de=X.toString,pe=X.toLocaleString,ve=L("iterator"),ye=L("toStringTag"),ge=R("typed_constructor"),me=R("def_constructor"),be=l.CONSTR,_e=l.TYPED,Ee=l.VIEW,ke=A(1,function(e,t){return Oe(D(e,e[me]),t)}),Te=a(function(){return 1===new z(new Uint16Array([1]).buffer)[0]}),we=!!z&&!!z.prototype.set&&a(function(){new z(1).set({})}),Se=function(e,t){var n=v(e);if(n<0||n%t)throw W("Wrong offset!");return n},Ce=function(e){if(k(e)&&_e in e)return e;throw K(e+" is not a typed array!")},Oe=function(e,t){if(!(k(e)&&ge in e))throw K("It is not a typed array constructor!");return new e(t)},Pe=function(e,t){return Re(D(e,e[me]),t)},Re=function(e,t){for(var n=0,r=t.length,i=Oe(e,r);r>n;)i[n]=t[n++];return i},Le=function(e,t,n){V(e,t,{get:function(){return this._d[n]}})},Ae=function(e){var t,n,r,i,o,a,s=T(e),l=arguments.length,u=l>1?arguments[1]:void 0,h=void 0!==u,f=P(s);if(void 0!=f&&!w(f)){for(a=f.call(s),r=[],t=0;!(o=a.next()).done;t++)r.push(o.value);s=r}for(h&&l>2&&(u=c(u,arguments[2],2)),t=0,n=y(s.length),i=Oe(this,n);n>t;t++)i[t]=h?u(s[t],t):s[t];return i},xe=function(){for(var e=0,t=arguments.length,n=Oe(this,t);t>e;)n[e]=arguments[e++];return n},De=!!z&&a(function(){pe.call(new z(1))}),Ie=function(){return pe.apply(De?fe.call(Ce(this)):Ce(this),arguments)},Me={copyWithin:function(e,t){return B.call(Ce(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return Z(Ce(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return F.apply(Ce(this),arguments)},filter:function(e){return Pe(this,Q(Ce(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return ee(Ce(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return te(Ce(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){$(Ce(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return re(Ce(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return ne(Ce(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ce.apply(Ce(this),arguments)},lastIndexOf:function(e){return se.apply(Ce(this),arguments)},map:function(e){return ke(Ce(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return le.apply(Ce(this),arguments)},reduceRight:function(e){return ue.apply(Ce(this),arguments)},reverse:function(){for(var e,t=this,n=Ce(t).length,r=Math.floor(n/2),i=0;i<r;)e=t[i],t[i++]=t[--n],t[n]=e;return t},some:function(e){return J(Ce(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return he.call(Ce(this),e)},subarray:function(e,t){var n=Ce(this),r=n.length,i=m(e,r);return new(D(n,n[me]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,y((void 0===t?r:m(t,r))-i))}},je=function(e,t){return Pe(this,fe.call(Ce(this),e,t))},Ne=function(e){Ce(this);var t=Se(arguments[1],1),n=this.length,r=T(e),i=y(r.length),o=0;if(i+t>n)throw W("Wrong length!");for(;o<i;)this[t+o]=r[o++]},Fe={entries:function(){return ae.call(Ce(this))},keys:function(){return oe.call(Ce(this))},values:function(){return ie.call(Ce(this))}},Be=function(e,t){return k(e)&&e[_e]&&"symbol"!=(void 0===t?"undefined":r(t))&&t in e&&String(+t)==String(t)},Ue=function(e,t){return Be(e,t=b(t,!0))?f(2,e[t]):G(e,t)},He=function(e,t,n){return!(Be(e,t=b(t,!0))&&k(n)&&_(n,"value"))||_(n,"get")||_(n,"set")||n.configurable||_(n,"writable")&&!n.writable||_(n,"enumerable")&&!n.enumerable?V(e,t,n):(e[t]=n.value,e)};be||(H.f=Ue,U.f=He),s(s.S+s.F*!be,"Object",{getOwnPropertyDescriptor:Ue,defineProperty:He}),a(function(){de.call({})})&&(de=pe=function(){return ce.call(this)});var Ve=p({},Me);p(Ve,Fe),d(Ve,ve,Fe.values),p(Ve,{slice:je,set:Ne,constructor:function(){},toString:de,toLocaleString:Ie}),Le(Ve,"buffer","b"),Le(Ve,"byteOffset","o"),Le(Ve,"byteLength","l"),Le(Ve,"length","e"),V(Ve,ye,{get:function(){return this[_e]}}),e.exports=function(e,t,n,r){r=!!r;var u=e+(r?"Clamped":"")+"Array",c="get"+e,f="set"+e,p=o[u],v=p||{},m=p&&C(p),b=!p||!l.ABV,_={},T=p&&p.prototype,w=function(e,n){var r=e._d;return r.v[c](n*t+r.o,Te)},P=function(e,n,i){var o=e._d;r&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),o.v[f](n*t+o.o,i,Te)},R=function(e,t){V(e,t,{get:function(){return w(this,t)},set:function(e){return P(this,t,e)},enumerable:!0})};b?(p=n(function(e,n,r,i){h(e,p,u,"_d");var o,a,s,l,c=0,f=0;if(k(n)){if(!(n instanceof q||"ArrayBuffer"==(l=E(n))||"SharedArrayBuffer"==l))return _e in n?Re(p,n):Ae.call(p,n);o=n,f=Se(r,t);var v=n.byteLength;if(void 0===i){if(v%t)throw W("Wrong length!");if((a=v-f)<0)throw W("Wrong length!")}else if((a=y(i)*t)+f>v)throw W("Wrong length!");s=a/t}else s=g(n),a=s*t,o=new q(a);for(d(e,"_d",{b:o,o:f,l:a,e:s,v:new Y(o)});c<s;)R(e,c++)}),T=p.prototype=S(Ve),d(T,"constructor",p)):a(function(){p(1)})&&a(function(){new p(-1)})&&j(function(e){new p,new p(null),new p(1.5),new p(e)},!0)||(p=n(function(e,n,r,i){h(e,p,u);var o;return k(n)?n instanceof q||"ArrayBuffer"==(o=E(n))||"SharedArrayBuffer"==o?void 0!==i?new v(n,Se(r,t),i):void 0!==r?new v(n,Se(r,t)):new v(n):_e in n?Re(p,n):Ae.call(p,n):new v(g(n))}),$(m!==Function.prototype?O(v).concat(O(m)):O(v),function(e){e in p||d(p,e,v[e])}),p.prototype=T,i||(T.constructor=p));var L=T[ve],A=!!L&&("values"==L.name||void 0==L.name),x=Fe.values;d(p,ge,!0),d(T,_e,u),d(T,Ee,!0),d(T,me,p),(r?new p(1)[ye]==u:ye in T)||V(T,ye,{get:function(){return u}}),_[u]=p,s(s.G+s.W+s.F*(p!=v),_),s(s.S,u,{BYTES_PER_ELEMENT:t}),s(s.S+s.F*a(function(){v.of.call(p,1)}),u,{from:Ae,of:xe}),"BYTES_PER_ELEMENT"in T||d(T,"BYTES_PER_ELEMENT",t),s(s.P,u,Me),N(u),s(s.P+s.F*we,u,{set:Ne}),s(s.P+s.F*!A,u,Fe),i||T.toString==de||(T.toString=de),s(s.P+s.F*a(function(){new p(1).slice()}),u,{slice:je}),s(s.P+s.F*(a(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!a(function(){T.toLocaleString.call([1,2])})),u,{toLocaleString:Ie}),M[u]=A?L:x,i||A||d(T,ve,x)}}else e.exports=function(){}},function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(159),o=n(0),a=n(66)("metadata"),s=a.store||(a.store=new(n(162))),l=function(e,t,n){var r=s.get(e);if(!r){if(!n)return;s.set(e,r=new i)}var o=r.get(t);if(!o){if(!n)return;r.set(t,o=new i)}return o},u=function(e,t,n){var r=l(t,n,!1);return void 0!==r&&r.has(e)},c=function(e,t,n){var r=l(t,n,!1);return void 0===r?void 0:r.get(e)},h=function(e,t,n,r){l(n,r,!0).set(e,t)},f=function(e,t){var n=l(e,t,!1),r=[];return n&&n.forEach(function(e,t){r.push(t)}),r},d=function(e){return void 0===e||"symbol"==(void 0===e?"undefined":r(e))?e:String(e)},p=function(e){o(o.S,"Reflect",e)};e.exports={store:s,map:l,has:u,get:c,set:h,keys:f,key:d,exp:p}},function(e,t,n){"use strict";function r(){for(var e={},t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return n.forEach(function(t){t&&(0,i.each)(t,function(t,n){if(!(0,i.isPlain)(t))return void(e[n]=t);(0,i.isPlain)(e[n])||(e[n]={}),e[n]=r(e[n],t)})}),e}t.__esModule=!0,t.default=r;var i=n(23)},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports=!1},function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(53)("meta"),o=n(5),a=n(25),s=n(14).f,l=0,u=Object.isExtensible||function(){return!0},c=!n(4)(function(){return u(Object.preventExtensions({}))}),h=function(e){s(e,i,{value:{i:"O"+ ++l,w:{}}})},f=function(e,t){if(!o(e))return"symbol"==(void 0===e?"undefined":r(e))?e:("string"==typeof e?"S":"P")+e;if(!a(e,i)){if(!u(e))return"F";if(!t)return"E";h(e)}return e[i].i},d=function(e,t){if(!a(e,i)){if(!u(e))return!0;if(!t)return!1;h(e)}return e[i].w},p=function(e){return c&&v.NEED&&u(e)&&!a(e,i)&&h(e),e},v=e.exports={KEY:i,NEED:!1,fastKey:f,getWeak:d,onFreeze:p}},function(e,t,n){var r=n(33),i=n(6)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){var r=n(6)("unscopables"),i=Array.prototype;void 0==i[r]&&n(26)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t,n){var r=n(32),i=n(152),o=n(114),a=n(2),s=n(10),l=n(69),u={},c={},t=e.exports=function(e,t,n,h,f){var d,p,v,y,g=f?function(){return e}:l(e),m=r(n,h,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(d=s(e.length);d>b;b++)if((y=t?m(a(p=e[b])[0],p[1]):m(e[b]))===u||y===c)return y}else for(v=g.call(e);!(p=v.next()).done;)if((y=i(v,m,p.value,t))===u||y===c)return y};t.BREAK=u,t.RETURN=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){var n=d.getElData(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&d.removeElData(e)}function a(e,t,n,r){n.forEach(function(n){e(t,n,r)})}function s(e){function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped){var r=e||b.default.event;e={};for(var i in r)"layerX"!==i&&"layerY"!==i&&"keyLocation"!==i&&"webkitMovementX"!==i&&"webkitMovementY"!==i&&("returnValue"===i&&r.preventDefault||(e[i]=r[i]));if(e.target||(e.target=e.srcElement||E.default),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){r.preventDefault&&r.preventDefault(),e.returnValue=!1,r.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),e.cancelBubble=!0,r.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX){var o=E.default.documentElement,a=E.default.body;e.pageX=e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),e.pageY=e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}function l(e,t,n){if(Array.isArray(t))return a(l,e,t,n);var r=d.getElData(e);if(r.handlers||(r.handlers={}),r.handlers[t]||(r.handlers[t]=[]),n.guid||(n.guid=v.newGUID()),r.handlers[t].push(n),r.dispatcher||(r.disabled=!1,r.dispatcher=function(t,n){if(!r.disabled){t=s(t);var i=r.handlers[t.type];if(i)for(var o=i.slice(0),a=0,l=o.length;a<l&&!t.isImmediatePropagationStopped();a++)try{o[a].call(e,t,n)}catch(e){g.default.error(e)}}}),1===r.handlers[t].length)if(e.addEventListener){var i=!1;k&&T.indexOf(t)>-1&&(i={passive:!0}),e.addEventListener(t,r.dispatcher,i)}else e.attachEvent&&e.attachEvent("on"+t,r.dispatcher)}function u(e,t,n){if(d.hasElData(e)){var r=d.getElData(e);if(r.handlers){if(Array.isArray(t))return a(u,e,t,n);var i=function(t){r.handlers[t]=[],o(e,t)};if(t){var s=r.handlers[t];if(s){if(!n)return void i(t);if(n.guid)for(var l=0;l<s.length;l++)s[l].guid===n.guid&&s.splice(l--,1);o(e,t)}}else for(var c in r.handlers)i(c)}}}function c(e,t,n){var r=d.hasElData(e)?d.getElData(e):{},i=e.parentNode||e.ownerDocument;if("string"==typeof t&&(t={type:t,target:e}),t=s(t),r.dispatcher&&r.dispatcher.call(e,t,n),i&&!t.isPropagationStopped()&&!0===t.bubbles)c.call(null,i,t,n);else if(!i&&!t.defaultPrevented){var o=d.getElData(t.target);t.target[t.type]&&(o.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),o.disabled=!1)}return!t.defaultPrevented}function h(e,t,n){if(Array.isArray(t))return a(h,e,t,n);var r=function r(){u(e,t,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||v.newGUID(),l(e,t,r)}t.__esModule=!0,t.fixEvent=s,t.on=l,t.off=u,t.trigger=c,t.one=h;var f=n(12),d=i(f),p=n(64),v=i(p),y=n(31),g=r(y),m=n(11),b=r(m),_=n(15),E=r(_),k=!1;!function(){try{var e=Object.defineProperty({},"passive",{get:function(){k=!0}});b.default.addEventListener("test",null,e)}catch(e){}}();var T=["touchstart","touchmove"]},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;e=e<0?0:e;var n=Math.floor(e%60),r=Math.floor(e/60%60),i=Math.floor(e/3600),o=Math.floor(t/60%60),a=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(i=r=n="-"),i=i>0||a>0?i+":":"",r=((i||o>=10)&&r<10?"0"+r:r)+":",n=n<10?"0"+n:n,i+r+n}t.__esModule=!0,t.default=r},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(34),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(140),i=n(102).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(3),i=n(14),o=n(9),a=n(6)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(27);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){var r=n(5);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){var r=n(14).f,i=n(25),o=n(6)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(0),i=n(37),o=n(4),a=n(107),s="["+a+"]",l="​",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),h=function(e,t,n){var i={},s=o(function(){return!!a[e]()||l[e]()!=l}),u=i[e]=s?t(f):a[e];n&&(i[n]=u),r(r.P+r.F*s,"String",i)},f=h.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(c,"")),e};e.exports=h},function(e,t){var n,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":r(window))&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(){return i++}t.__esModule=!0,t.newGUID=r;var i=1},function(e,t,n){"use strict";function r(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}t.__esModule=!0,t.default=r},function(e,t,n){var r=n(20),i=n(3),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(46)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(33);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(48),i=n(6)("iterator"),o=n(56);e.exports=n(20).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){"use strict";var r=n(2);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){var r=n(2),i=n(18),o=n(6)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t,n){"use strict";function r(e,t,n){if(t<0||t>n)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is greater than or equal to the maximum bound ("+n+").")}function i(e,t,n,i){return void 0===i&&(l.default.warn("DEPRECATED: Function '"+e+"' on 'TimeRanges' called without an index argument."),i=0),r(e,i,n.length-1),n[i][t]}function o(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:i.bind(null,"start",0,e),end:i.bind(null,"end",1,e)}}function a(e,t){return Array.isArray(e)?o(e):void 0===e||void 0===t?o():o([[e,t]])}t.__esModule=!0,t.createTimeRange=void 0,t.createTimeRanges=a;var s=n(31),l=function(e){return e&&e.__esModule?e:{default:e}}(s);t.createTimeRange=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=e.textTracks();i.kind=t,n&&(i.label=n),r&&(i.language=r),i.tech=e;var a=new m.default(i);return o.addTrack_(a),a}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var u=n(1),c=r(u),h=n(419),f=r(h),d=n(424),p=r(d),v=n(44),y=r(v),g=n(129),m=r(g),b=n(425),_=r(b),E=n(183),k=r(E),T=n(184),w=r(T),S=n(7),C=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(S),O=n(31),P=r(O),R=n(72),L=n(179),A=n(180),x=r(A),D=n(11),I=r(D),M=n(15),j=r(M),N=n(23),F=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};i(this,t),n.reportTouchActivity=!1;var a=o(this,e.call(this,null,n,r));return a.hasStarted_=!1,a.on("playing",function(){this.hasStarted_=!0}),a.on("loadstart",function(){this.hasStarted_=!1}),a.textTracks_=n.textTracks,a.videoTracks_=n.videoTracks,a.audioTracks_=n.audioTracks,a.featuresProgressEvents||a.manualProgressOn(),a.featuresTimeupdateEvents||a.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===n["native"+e+"Tracks"]&&(a["featuresNative"+e+"Tracks"]=!1)}),!1===n.nativeCaptions&&(a.featuresNativeTextTracks=!1),a.featuresNativeTextTracks||a.emulateTextTracks(),a.autoRemoteTextTracks_=new _.default,a.initTextTrackListeners(),a.initTrackListeners(),n.nativeControlsForTouch||a.emitTapEvents(),a.constructor&&(a.name_=a.constructor.name||"Unknown Tech"),a}return a(t,e),t.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},t.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},t.prototype.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(C.bind(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()}),500)},t.prototype.onDurationChange=function(e){this.duration_=this.duration()},t.prototype.buffered=function(){return(0,R.createTimeRange)(0,0)},t.prototype.bufferedPercent=function(){return(0,L.bufferedPercent)(this.buffered(),this.duration_)},t.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},t.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},t.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},t.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},t.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.prototype.dispose=function(){this.clearTracks(["audio","video","text"]),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},t.prototype.clearTracks=function(e){var t=this;e=[].concat(e),e.forEach(function(e){for(var n=t[e+"Tracks"]()||[],r=n.length;r--;){var i=n[r];"text"===e&&t.removeRemoteTextTrack(i),n.removeTrack_(i)}})},t.prototype.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},t.prototype.reset=function(){},t.prototype.error=function(e){return void 0!==e&&(this.error_=new x.default(e),this.trigger("error")),this.error_},t.prototype.played=function(){return this.hasStarted_?(0,R.createTimeRange)(0,0):(0,R.createTimeRange)()},t.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.prototype.initTextTrackListeners=function(){var e=C.bind(this,function(){this.trigger("texttrackchange")}),t=this.textTracks();t&&(t.addEventListener("removetrack",e),t.addEventListener("addtrack",e),this.on("dispose",C.bind(this,function(){t.removeEventListener("removetrack",e),t.removeEventListener("addtrack",e)})))},t.prototype.initTrackListeners=function(){var e=this;["video","audio"].forEach(function(t){var n=function(){e.trigger(t+"trackchange")},r=e[t+"Tracks"]();r.addEventListener("removetrack",n),r.addEventListener("addtrack",n),e.on("dispose",function(){r.removeEventListener("removetrack",n),r.removeEventListener("addtrack",n)})})},t.prototype.addWebVttScript_=function(){var e=this;if(!I.default.WebVTT)if(j.default.body.contains(this.el())){var t=n(175);if(!this.options_["vtt.js"]&&(0,N.isPlain)(t)&&Object.keys(t).length>0)return void this.trigger("vttjsloaded");var r=j.default.createElement("script");r.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.12.4/vtt.min.js",r.onload=function(){e.trigger("vttjsloaded")},r.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){r.onload=null,r.onerror=null}),I.default.WebVTT=!0,this.el().parentNode.appendChild(r)}else this.ready(this.addWebVttScript_)},t.prototype.emulateTextTracks=function(){var e=this,t=this.textTracks();if(t){var n=this.remoteTextTracks(),r=function(e){return t.addTrack_(e.track)},i=function(e){return t.removeTrack_(e.track)};n.on("addtrack",r),n.on("removetrack",i),this.addWebVttScript_();var o=function(){return e.trigger("texttrackchange")},a=function(){o();for(var e=0;e<t.length;e++){var n=t[e];n.removeEventListener("cuechange",o),"showing"===n.mode&&n.addEventListener("cuechange",o)}};a(),t.addEventListener("change",a),t.addEventListener("addtrack",a),t.addEventListener("removetrack",a),this.on("dispose",function(){n.off("addtrack",r),n.off("removetrack",i),t.removeEventListener("change",a),t.removeEventListener("addtrack",a),t.removeEventListener("removetrack",a);for(var e=0;e<t.length;e++){t[e].removeEventListener("cuechange",o)}})}},t.prototype.videoTracks=function(){return this.videoTracks_=this.videoTracks_||new k.default,this.videoTracks_},t.prototype.audioTracks=function(){return this.audioTracks_=this.audioTracks_||new w.default,this.audioTracks_},t.prototype.textTracks=function(){return this.textTracks_=this.textTracks_||new _.default,this.textTracks_},t.prototype.remoteTextTracks=function(){return this.remoteTextTracks_=this.remoteTextTracks_||new _.default,this.remoteTextTracks_},t.prototype.remoteTextTrackEls=function(){return this.remoteTextTrackEls_=this.remoteTextTrackEls_||new p.default,this.remoteTextTrackEls_},t.prototype.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return s(this,e,t,n)},t.prototype.createRemoteTextTrack=function(e){var t=(0,y.default)(e,{tech:this});return new f.default(t)},t.prototype.addRemoteTextTrack=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(P.default.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack_(n.track),!0!==t&&this.autoRemoteTextTracks_.addTrack_(n.track),n},t.prototype.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack_(e),this.autoRemoteTextTracks_.removeTrack_(e)},t.prototype.getVideoPlaybackQuality=function(){return{}},t.prototype.setPoster=function(){},t.prototype.playsinline=function(){},t.prototype.setPlaysinline=function(){},t.prototype.canPlayType=function(){return""},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,n){if(t.techs_||(t.techs_={}),!t.isTech(n))throw new Error("Tech "+e+" must be a Tech");return t.techs_[e]=n,n},t.getTech=function(e){return t.techs_&&t.techs_[e]?t.techs_[e]:I.default&&I.default.videojs&&I.default.videojs[e]?(P.default.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),I.default.videojs[e]):void 0},t}(c.default);F.prototype.textTracks_,F.prototype.audioTracks_,F.prototype.videoTracks_,F.prototype.featuresVolumeControl=!0,F.prototype.featuresFullscreenResize=!1,F.prototype.featuresPlaybackRate=!1,F.prototype.featuresProgressEvents=!1,F.prototype.featuresTimeupdateEvents=!1,F.prototype.featuresNativeTextTracks=!1,F.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var r=e.sourceHandlers;r||(r=e.sourceHandlers=[]),void 0===n&&(n=r.length),r.splice(n,0,t)},e.canPlayType=function(t){for(var n=e.sourceHandlers||[],r=void 0,i=0;i<n.length;i++)if(r=n[i].canPlayType(t))return r;return""},e.selectSourceHandler=function(t,n){for(var r=e.sourceHandlers||[],i=0;i<r.length;i++)if(r[i].canHandleSource(t,n))return r[i];return null},e.canPlaySource=function(t,n){var r=e.selectSourceHandler(t,n);return r?r.canHandleSource(t,n):""},["seekable","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(t){var n=e.selectSourceHandler(t,this.options_);return n||(e.nativeSourceHandler?n=e.nativeSourceHandler:P.default.error("No source hander found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),n!==e.nativeSourceHandler&&(this.currentSource_=t,this.off(this.el_,"loadstart",e.prototype.firstLoadStartListener_),this.off(this.el_,"loadstart",e.prototype.successiveLoadStartListener_),this.one(this.el_,"loadstart",e.prototype.firstLoadStartListener_)),this.sourceHandler_=n.handleSource(t,this,this.options_),this.on("dispose",this.disposeSourceHandler),this},e.prototype.firstLoadStartListener_=function(){this.one(this.el_,"loadstart",e.prototype.successiveLoadStartListener_)},e.prototype.successiveLoadStartListener_=function(){this.disposeSourceHandler(),this.one(this.el_,"loadstart",e.prototype.successiveLoadStartListener_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.off(this.el_,"loadstart",e.prototype.firstLoadStartListener_),this.off(this.el_,"loadstart",e.prototype.successiveLoadStartListener_),this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},c.default.registerComponent("Tech",F),c.default.registerComponent("MediaTechController",F),F.registerTech("Tech",F),t.default=F},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var u=n(1),c=i(u),h=n(12),f=r(h),d=n(51),p=r(d),v=n(7),y=r(v),g=n(31),m=i(g),b=n(15),_=i(b),E=n(23),k=function(e){function t(n,r){o(this,t);var i=a(this,e.call(this,n,r));return i.emitTapEvents(),i.enable(),i}return s(t,e),t.prototype.createEl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=(0,E.assign)({className:this.buildCSSClass(),tabIndex:0},n),"button"===t&&m.default.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),r=(0,E.assign)({role:"button","aria-live":"polite"},r),this.tabIndex_=n.tabIndex;var i=e.prototype.createEl.call(this,t,n,r);return this.createControlTextEl(i),i},t.prototype.createControlTextEl=function(e){return this.controlTextEl_=f.createEl("span",{className:"vjs-control-text"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},t.prototype.controlText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el();if(void 0===e)return this.controlText_||"Need Text";var n=this.localize(e);return this.controlText_=e,this.controlTextEl_.innerHTML=n,this.nonIconControl||t.setAttribute("title",n),this},t.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},t.prototype.enable=function(){return this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this},t.prototype.disable=function(){return this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this},t.prototype.handleClick=function(e){},t.prototype.handleFocus=function(e){p.on(_.default,"keydown",y.bind(this,this.handleKeyPress))},t.prototype.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.handleClick(t)):e.prototype.handleKeyPress&&e.prototype.handleKeyPress.call(this,t)},t.prototype.handleBlur=function(e){p.off(_.default,"keydown",y.bind(this,this.handleKeyPress))},t}(c.default);c.default.registerComponent("ClickableComponent",k),t.default=k},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(74),u=r(l),c=n(1),h=r(c),f=n(31),d=r(f),p=n(23),v=function(e){function t(){return i(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.createEl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"button",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=(0,p.assign)({className:this.buildCSSClass()},t),"button"!==e&&(d.default.warn("Creating a Button with an HTML element of "+e+" is deprecated; use ClickableComponent instead."),t=(0,p.assign)({tabIndex:0},t),n=(0,p.assign)({role:"button"},n)),n=(0,p.assign)({type:"button","aria-live":"polite"},n);var r=h.default.prototype.createEl.call(this,e,t,n);return this.createControlTextEl(r),r},t.prototype.addChild=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.constructor.name;return d.default.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),h.default.prototype.addChild.call(this,e,t)},t.prototype.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},t.prototype.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},t.prototype.handleKeyPress=function(t){32!==t.which&&13!==t.which&&e.prototype.handleKeyPress.call(this,t)},t}(u.default);h.default.registerComponent("Button",v),t.default=v},,function(e,t,n){var r=n(22),i=n(10),o=n(54);e.exports=function(e){return function(t,n,a){var s,l=r(t),u=i(l.length),c=o(a,u);if(e&&n!=n){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(33);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(34),i=n(37);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),l=r(n),u=s.length;return l<0||l>=u?e?"":void 0:(o=s.charCodeAt(l),o<55296||o>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){"use strict";var r=n(46),i=n(0),o=n(27),a=n(26),s=n(56),l=n(82),u=n(61),c=n(29),h=n(6)("iterator"),f=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(e,t,n,p,v,y,g){l(n,t,p);var m,b,_,E=function(e){if(!f&&e in S)return S[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",T="values"==v,w=!1,S=e.prototype,C=S[h]||S["@@iterator"]||v&&S[v],O=C||E(v),P=v?T?E("entries"):O:void 0,R="Array"==t?S.entries||C:C;if(R&&(_=c(R.call(new e)))!==Object.prototype&&_.next&&(u(_,k,!0),r||"function"==typeof _[h]||a(_,h,d)),T&&C&&"values"!==C.name&&(w=!0,O=function(){return C.call(this)}),r&&!g||!f&&!w&&S[h]||a(S,h,O),s[t]=O,s[k]=d,v)if(m={values:T?O:E("values"),keys:y?O:E("keys"),entries:P},g)for(b in m)b in S||o(S,b,m[b]);else i(i.P+i.F*(f||w),t,m);return m}},function(e,t,n){"use strict";var r=n(41),i=n(45),o=n(61),a={};n(26)(a,n(6)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(5),i=n(33),o=n(6)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(6)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(48),o=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var a=n.call(e,t);if("object"!==(void 0===a?"undefined":r(a)))throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==i(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},function(e,t,n){"use strict";n(155);var r=n(27),i=n(26),o=n(4),a=n(37),s=n(6),l=n(120),u=s("species"),c=!o(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),h=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var f=s(e),d=!o(function(){var t={};return t[f]=function(){return 7},7!=""[e](t)}),p=d?!o(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[u]=function(){return n}),n[f](""),!t}):void 0;if(!d||!p||"replace"===e&&!c||"split"===e&&!h){var v=/./[f],y=n(a,f,""[e],function(e,t,n,r,i){return t.exec===l?d&&!i?{done:!0,value:v.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),g=y[0],m=y[1];r(String.prototype,e,g),i(RegExp.prototype,f,2==t?function(e,t){return m.call(e,this,t)}:function(e){return m.call(e,this)})}}},function(e,t,n){var r=n(3),i=r.navigator;e.exports=i&&i.userAgent||""},function(e,t,n){"use strict";var r=n(3),i=n(0),o=n(27),a=n(59),s=n(47),l=n(50),u=n(58),c=n(5),h=n(4),f=n(84),d=n(61),p=n(108);e.exports=function(e,t,n,v,y,g){var m=r[e],b=m,_=y?"set":"add",E=b&&b.prototype,k={},T=function(e){var t=E[e];o(E,e,"delete"==e?function(e){return!(g&&!c(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!c(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof b&&(g||E.forEach&&!h(function(){(new b).entries().next()}))){var w=new b,S=w[_](g?{}:-0,1)!=w,C=h(function(){w.has(1)}),O=f(function(e){new b(e)}),P=!g&&h(function(){for(var e=new b,t=5;t--;)e[_](t,t);return!e.has(-0)});O||(b=t(function(t,n){u(t,b,e);var r=p(new m,t,b);return void 0!=n&&l(n,y,r[_],r),r}),b.prototype=E,E.constructor=b),(C||P)&&(T("delete"),T("has"),y&&T("get")),(P||S)&&T(_),g&&E.clear&&delete E.clear}else b=v.getConstructor(t,e,y,_),a(b.prototype,n),s.NEED=!0;return d(b,e),k[e]=b,i(i.G+i.W+i.F*(b!=m),k),g||v.setStrong(b,e,y),b}},function(e,t,n){for(var r,i=n(3),o=n(26),a=n(53),s=a("typed_array"),l=a("view"),u=!(!i.ArrayBuffer||!i.DataView),c=u,h=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(r=i[f[h++]])?(o(r.prototype,s,!0),o(r.prototype,l,!0)):c=!1;e.exports={ABV:u,CONSTR:c,TYPED:s,VIEW:l}},function(e,t,n){"use strict";e.exports=n(46)||!n(4)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n(3)[e]})},function(e,t,n){"use strict";var r=n(0);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){"use strict";var r=n(0),i=n(18),o=n(32),a=n(50);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,l=arguments[1];return i(this),t=void 0!==l,t&&i(l),void 0==e?new this:(n=[],t?(r=0,s=o(l,arguments[2],2),a(e,!1,function(e){n.push(s(e,r++))})):a(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(51),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r),o=function(){};o.prototype.allowedEvents_={},o.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},i.on(this,e,t),this.addEventListener=n},o.prototype.addEventListener=o.prototype.on,o.prototype.off=function(e,t){i.off(this,e,t)},o.prototype.removeEventListener=o.prototype.off,o.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},i.one(this,e,t),this.addEventListener=n},o.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=i.fixEvent(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),i.trigger(this,e)},o.prototype.dispatchEvent=o.prototype.trigger,t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.isCrossOrigin=t.getFileExtension=t.getAbsoluteURL=t.parseUrl=void 0;var i=n(15),o=r(i),a=n(11),s=r(a),l=t.parseUrl=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=o.default.createElement("a");n.href=e;var r=""===n.host&&"file:"!==n.protocol,i=void 0;r&&(i=o.default.createElement("div"),i.innerHTML='<a href="'+e+'"></a>',n=i.firstChild,i.setAttribute("style","display:none; position:absolute;"),o.default.body.appendChild(i));for(var a={},s=0;s<t.length;s++)a[t[s]]=n[t[s]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),r&&o.default.body.removeChild(i),a};t.getAbsoluteURL=function(e){if(!e.match(/^https?:\/\//)){var t=o.default.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e},t.getFileExtension=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i,n=t.exec(e);if(n)return n.pop().toLowerCase()}return""},t.isCrossOrigin=function(e){var t=s.default.location,n=l(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(188),u=r(l),c=n(1),h=r(c),f=n(134),d=r(f),p=n(454),v=r(p),y=function(e){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,t),r.tracks=n.textTracks(),o(this,e.call(this,n,r))}return a(t,e),t.prototype.createItems=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.push(new v.default(this.player_,{kind:this.kind_})),this.hideThreshold_+=1;var t=this.player_.textTracks();if(!t)return e;for(var n=0;n<t.length;n++){var r=t[n];r.kind===this.kind_&&e.push(new d.default(this.player_,{track:r,selectable:!0}))}return e},t}(u.default);h.default.registerComponent("TextTrackButton",y),t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(74),u=r(l),c=n(1),h=r(c),f=n(23),d=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.selectable=r.selectable,a.selected(r.selected),a.selectable?a.el_.setAttribute("role","menuitemcheckbox"):a.el_.setAttribute("role","menuitem"),a}return a(t,e),t.prototype.createEl=function(t,n,r){return this.nonIconControl=!0,e.prototype.createEl.call(this,"li",(0,f.assign)({className:"vjs-menu-item",innerHTML:this.localize(this.options_.label),tabIndex:-1},n),r)},t.prototype.handleClick=function(e){this.selected(!0)},t.prototype.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected")):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText("")))},t}(u.default);h.default.registerComponent("MenuItem",d),t.default=d},function(e,t,n){"use strict";var r={isBuffered:function(e,t){if(e)for(var n=e.buffered,r=0;r<n.length;r++)if(t>=n.start(r)&&t<=n.end(r))return!0;return!1},bufferInfo:function(e,t,n){if(e){var r,i=e.buffered,o=[];for(r=0;r<i.length;r++)o.push({start:i.start(r),end:i.end(r)});return this.bufferedInfo(o,t,n)}return{len:0,start:t,end:t,nextStart:void 0}},bufferedInfo:function(e,t,n){var r,i,o,a,s,l=[];for(e.sort(function(e,t){var n=e.start-t.start;return n||t.end-e.end}),s=0;s<e.length;s++){var u=l.length;if(u){var c=l[u-1].end;e[s].start-c<n?e[s].end>c&&(l[u-1].end=e[s].end):l.push(e[s])}else l.push(e[s])}for(s=0,r=0,i=o=t;s<l.length;s++){var h=l[s].start,f=l[s].end;if(t+n>=h&&t<f)i=h,o=f,r=o-t;else if(t+n<h){a=h;break}}return{len:r,start:i,end:o,nextStart:a}}};e.exports=r},function(e,t,n){n(143),e.exports=n(20).Object.assign},function(e,t,n){var r=n(5),i=n(3).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(3),i=n(20),o=n(46),a=n(139),s=n(14).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var r=n(66)("keys"),i=n(53);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(3).document;e.exports=r&&r.documentElement},function(e,t,n){"use strict";var r=n(9),i=n(40),o=n(78),a=n(68),s=n(16),l=n(67),u=Object.assign;e.exports=!u||n(4)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r})?function(e,t){for(var n=s(e),u=arguments.length,c=1,h=o.f,f=a.f;u>c;)for(var d,p=l(arguments[c++]),v=h?i(p).concat(h(p)):i(p),y=v.length,g=0;y>g;)d=v[g++],r&&!f.call(p,d)||(n[d]=p[d]);return n}:u},function(e,t,n){var r=n(5),i=n(2),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(32)(Function.call,n(28).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var r=n(5),i=n(105).set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},function(e,t,n){"use strict";var r=n(34),i=n(37);e.exports=function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){var r=n(83),i=n(37);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){var r=n(6)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var r=n(56),i=n(6)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){"use strict";var r=n(14),i=n(45);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(292);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){"use strict";var r=n(16),i=n(54),o=n(10);e.exports=function(e){for(var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),l=a>2?arguments[2]:void 0,u=void 0===l?n:i(l,n);u>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var r=n(49),i=n(119),o=n(56),a=n(22);e.exports=n(81)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(70),i=RegExp.prototype.exec,o=String.prototype.replace,a=i,s=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),l=void 0!==/()??/.exec("")[1];(s||l)&&(a=function(e){var t,n,a,u,c=this;return l&&(n=new RegExp("^"+c.source+"$(?!\\s)",r.call(c))),s&&(t=c.lastIndex),a=i.call(c,e),s&&a&&(c.lastIndex=c.global?a.index+a[0].length:t),l&&a&&a.length>1&&o.call(a[0],n,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(a[u]=void 0)}),a}),e.exports=a},function(e,t,n){"use strict";var r=n(80)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r,i,o,a=n(32),s=n(106),l=n(103),u=n(99),c=n(3),h=c.process,f=c.setImmediate,d=c.clearImmediate,p=c.MessageChannel,v=c.Dispatch,y=0,g={},m=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},b=function(e){m.call(e.data)};f&&d||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++y]=function(){s("function"==typeof e?e:Function(e),t)},r(y),y},d=function(e){delete g[e]},"process"==n(33)(h)?r=function(e){h.nextTick(a(m,e,1))}:v&&v.now?r=function(e){v.now(a(m,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(e){c.postMessage(e+"","*")},c.addEventListener("message",b,!1)):r="onreadystatechange"in u("script")?function(e){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),m.call(e)}}:function(e){setTimeout(a(m,e,1),0)}),e.exports={set:f,clear:d}},function(e,t,n){var r=n(3),i=n(122).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,l="process"==n(33)(a);e.exports=function(){var e,t,n,u=function(){var r,i;for(l&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(l)n=function(){a.nextTick(u)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);n=function(){c.then(u)}}else n=function(){i.call(r,u)};else{var h=!0,f=document.createTextNode("");new o(u).observe(f,{characterData:!0}),n=function(){f.data=h=!h}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=i(t),this.reject=i(n)}var i=n(18);e.exports.f=function(e){return new r(e)}},function(e,t,n){"use strict";function r(e,t,n){var r,i,o,a=new Array(n),s=8*n-t-1,l=(1<<s)-1,u=l>>1,c=23===t?F(2,-24)-F(2,-77):0,h=0,f=e<0||0===e&&1/e<0?1:0;for(e=N(e),e!=e||e===M?(i=e!=e?1:0,r=l):(r=B(U(e)/H),e*(o=F(2,-r))<1&&(r--,o*=2),e+=r+u>=1?c/o:c*F(2,1-u),e*o>=2&&(r++,o/=2),r+u>=l?(i=0,r=l):r+u>=1?(i=(e*o-1)*F(2,t),r+=u):(i=e*F(2,u-1)*F(2,t),r=0));t>=8;a[h++]=255&i,i/=256,t-=8);for(r=r<<t|i,s+=t;s>0;a[h++]=255&r,r/=256,s-=8);return a[--h]|=128*f,a}function i(e,t,n){var r,i=8*n-t-1,o=(1<<i)-1,a=o>>1,s=i-7,l=n-1,u=e[l--],c=127&u;for(u>>=7;s>0;c=256*c+e[l],l--,s-=8);for(r=c&(1<<-s)-1,c>>=-s,s+=t;s>0;r=256*r+e[l],l--,s-=8);if(0===c)c=1-a;else{if(c===o)return r?NaN:u?-M:M;r+=F(2,t),c-=a}return(u?-1:1)*r*F(2,c-t)}function o(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function a(e){return[255&e]}function s(e){return[255&e,e>>8&255]}function l(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function u(e){return r(e,52,8)}function c(e){return r(e,23,4)}function h(e,t,n){C(e[R],t,{get:function(){return this[n]}})}function f(e,t,n,r){var i=+n,o=w(i);if(o+t>e[G])throw I(L);var a=e[V]._b,s=o+e[W],l=a.slice(s,s+t);return r?l:l.reverse()}function d(e,t,n,r,i,o){var a=+n,s=w(a);if(s+t>e[G])throw I(L);for(var l=e[V]._b,u=s+e[W],c=r(+i),h=0;h<t;h++)l[u+h]=c[o?h:t-h-1]}var p=n(3),v=n(9),y=n(46),g=n(89),m=n(26),b=n(59),_=n(4),E=n(58),k=n(34),T=n(10),w=n(164),S=n(55).f,C=n(14).f,O=n(117),P=n(61),R="prototype",L="Wrong index!",A=p.ArrayBuffer,x=p.DataView,D=p.Math,I=p.RangeError,M=p.Infinity,j=A,N=D.abs,F=D.pow,B=D.floor,U=D.log,H=D.LN2,V=v?"_b":"buffer",G=v?"_l":"byteLength",W=v?"_o":"byteOffset";if(g.ABV){if(!_(function(){A(1)})||!_(function(){new A(-1)})||_(function(){return new A,new A(1.5),new A(NaN),"ArrayBuffer"!=A.name})){A=function(e){return E(this,A),new j(w(e))};for(var K,z=A[R]=j[R],X=S(j),q=0;X.length>q;)(K=X[q++])in A||m(A,K,j[K]);y||(z.constructor=A)}var Y=new x(new A(2)),$=x[R].setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||b(x[R],{setInt8:function(e,t){$.call(this,e,t<<24>>24)},setUint8:function(e,t){$.call(this,e,t<<24>>24)}},!0)}else A=function(e){E(this,A,"ArrayBuffer");var t=w(e);this._b=O.call(new Array(t),0),this[G]=t},x=function(e,t,n){E(this,x,"DataView"),E(e,A,"DataView");var r=e[G],i=k(t);if(i<0||i>r)throw I("Wrong offset!");if(n=void 0===n?r-i:T(n),i+n>r)throw I("Wrong length!");this[V]=e,this[W]=i,this[G]=n},v&&(h(A,"byteLength","_l"),h(x,"buffer","_b"),h(x,"byteLength","_l"),h(x,"byteOffset","_o")),b(x[R],{getInt8:function(e){return f(this,1,e)[0]<<24>>24},getUint8:function(e){return f(this,1,e)[0]},getInt16:function(e){var t=f(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=f(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return o(f(this,4,e,arguments[1]))},getUint32:function(e){return o(f(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return i(f(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return i(f(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){d(this,1,e,a,t)},setUint8:function(e,t){d(this,1,e,a,t)},setInt16:function(e,t){d(this,2,e,s,t,arguments[2])},setUint16:function(e,t){d(this,2,e,s,t,arguments[2])},setInt32:function(e,t){d(this,4,e,l,t,arguments[2])},setUint32:function(e,t){d(this,4,e,l,t,arguments[2])},setFloat32:function(e,t){d(this,4,e,c,t,arguments[2])},setFloat64:function(e,t){d(this,8,e,u,t,arguments[2])}});P(A,"ArrayBuffer"),P(x,"DataView"),m(x[R],g.VIEW,!0),t.ArrayBuffer=A,t.DataView=x},function(e,t,n){var r=n(55),i=n(78),o=n(2),a=n(3).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t){e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},function(e,t){},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var u=n(420),c=i(u),h=n(7),f=r(h),d=n(130),p=n(31),v=i(p),y=n(11),g=i(y),m=n(131),b=i(m),_=n(94),E=n(182),k=i(E),T=n(44),w=i(T),S=n(21),C=r(S),O=function(e,t){var n=new g.default.WebVTT.Parser(g.default,g.default.vttjs,g.default.WebVTT.StringDecoder()),r=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){r.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),r.length>0&&(g.default.console&&g.default.console.groupCollapsed&&g.default.console.groupCollapsed("Text Track parsing errors for "+t.src),r.forEach(function(e){return v.default.error(e)}),g.default.console&&g.default.console.groupEnd&&g.default.console.groupEnd()),n.flush()},P=function(e,t){var n={uri:e},r=(0,_.isCrossOrigin)(e);r&&(n.cors=r),(0,k.default)(n,f.bind(this,function(e,n,r){if(e)return v.default.error(e,n);if(t.loaded_=!0,"function"!=typeof g.default.WebVTT){if(t.tech_){var i=function(){return O(r,t)};t.tech_.on("vttjsloaded",i),t.tech_.on("vttjserror",function(){v.default.error("vttjs failed to load, stopping trying to process "+t.src),t.tech_.off("vttjsloaded",i)})}}else O(r,t)}))},R=function(e){function t(){var n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o(this,t),!i.tech)throw new Error("A tech was not provided.");var s=(0,w.default)(i,{kind:d.TextTrackKind[i.kind]||"subtitles",language:i.language||i.srclang||""}),l=d.TextTrackMode[s.mode]||"disabled",u=s.default;"metadata"!==s.kind&&"chapters"!==s.kind||(l="hidden");var h=n=a(this,e.call(this,s));if(h.tech_=s.tech,C.IS_IE8)for(var p in t.prototype)"constructor"!==p&&(h[p]=t.prototype[p]);h.cues_=[],h.activeCues_=[];var v=new c.default(h.cues_),y=new c.default(h.activeCues_),g=!1,m=f.bind(h,function(){this.activeCues,g&&(this.trigger("cuechange"),g=!1)});return"disabled"!==l&&h.tech_.ready(function(){h.tech_.on("timeupdate",m)},!0),Object.defineProperty(h,"default",{get:function(){return u},set:function(){}}),Object.defineProperty(h,"mode",{get:function(){return l},set:function(e){var t=this;d.TextTrackMode[e]&&(l=e,"showing"===l&&this.tech_.ready(function(){t.tech_.on("timeupdate",m)},!0),this.trigger("modechange"))}}),Object.defineProperty(h,"cues",{get:function(){return this.loaded_?v:null},set:function(){}}),Object.defineProperty(h,"activeCues",{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return y;for(var e=this.tech_.currentTime(),t=[],n=0,r=this.cues.length;n<r;n++){var i=this.cues[n];i.startTime<=e&&i.endTime>=e?t.push(i):i.startTime===i.endTime&&i.startTime<=e&&i.startTime+.5>=e&&t.push(i)}if(g=!1,t.length!==this.activeCues_.length)g=!0;else for(var o=0;o<t.length;o++)-1===this.activeCues_.indexOf(t[o])&&(g=!0);return this.activeCues_=t,y.setCues_(this.activeCues_),y},set:function(){}}),s.src?(h.src=s.src,P(s.src,h)):h.loaded_=!0,r=h,a(n,r)}return s(t,e),t.prototype.addCue=function(e){var t=e;if(g.default.vttjs&&!(e instanceof g.default.vttjs.VTTCue)){t=new g.default.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(var n in e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}var r=this.tech_.textTracks();if(r)for(var i=0;i<r.length;i++)r[i]!==this&&r[i].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},t.prototype.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(b.default);R.prototype.allowedEvents_={cuechange:"cuechange"},t.default=R},function(e,t,n){"use strict";t.__esModule=!0;t.VideoTrackKind={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},t.AudioTrackKind={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},t.TextTrackKind={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},t.TextTrackMode={disabled:"disabled",hidden:"hidden",showing:"showing"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var u=n(21),c=i(u),h=n(15),f=r(h),d=n(64),p=i(d),v=n(93),y=r(v),g=function(e){function t(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var i=a(this,e.call(this)),s=i;if(c.IS_IE8){s=f.default.createElement("custom");for(var l in t.prototype)"constructor"!==l&&(s[l]=t.prototype[l])}var u={id:r.id||"vjs_track_"+p.newGUID(),kind:r.kind||"",label:r.label||"",language:r.language||""};for(var h in u)!function(e){Object.defineProperty(s,e,{get:function(){return u[e]},set:function(){}})}(h);return n=s,a(i,n)}return s(t,e),t}(y.default);t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(93),u=r(l),c=n(21),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=n(15),d=r(f),p=function(e){function t(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,t);var s=o(this,e.call(this));if(!a&&(a=s,h.IS_IE8)){a=d.default.createElement("custom");for(var l in t.prototype)"constructor"!==l&&(a[l]=t.prototype[l])}a.tracks_=[],Object.defineProperty(a,"length",{get:function(){return this.tracks_.length}});for(var u=0;u<r.length;u++)a.addTrack_(r[u]);return n=a,o(s,n)}return a(t,e),t.prototype.addTrack_=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack"}))},t.prototype.removeTrack_=function(e){for(var t=void 0,n=0,r=this.length;n<r;n++)if(this[n]===e){t=this[n],t.off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack"})},t.prototype.getTrackById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},t}(u.default);p.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var v in p.prototype.allowedEvents_)p.prototype["on"+v]=null;t.default=p},function(e,t,n){"use strict";function r(e,t){if(!e||!t)return"";if("function"==typeof o.default.getComputedStyle){var n=o.default.getComputedStyle(e);return n?n[t]:""}return e.currentStyle[t]||""}t.__esModule=!0,t.default=r;var i=n(11),o=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":s(e)},u=n(96),c=r(u),h=n(1),f=r(h),d=n(7),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(d),v=n(11),y=r(v),g=n(15),m=r(g),b=function(e){function t(n,r){i(this,t);var a=r.track,s=n.textTracks();r.label=a.label||a.language||"Unknown",r.selected=a.default||"showing"===a.mode;var u=o(this,e.call(this,n,r));if(u.track=a,s){var c=p.bind(u,u.handleTracksChange);n.on(["loadstart","texttrackchange"],c),s.addEventListener("change",c),u.on("dispose",function(){s.removeEventListener("change",c)})}if(s&&void 0===s.onchange){var h=void 0;u.on(["tap","click"],function(){if("object"!==l(y.default.Event))try{h=new y.default.Event("change")}catch(e){}h||(h=m.default.createEvent("Event"),h.initEvent("change",!0,!0)),s.dispatchEvent(h)})}return u}return a(t,e),t.prototype.handleClick=function(t){var n=this.track.kind,r=this.player_.textTracks();if(e.prototype.handleClick.call(this,t),r)for(var i=0;i<r.length;i++){var o=r[i];o.kind===n&&(o===this.track?"showing"!==o.mode&&(o.mode="showing"):"disabled"!==o.mode&&(o.mode="disabled"))}},t.prototype.handleTracksChange=function(e){this.selected("showing"===this.track.mode)},t}(c.default);f.default.registerComponent("TextTrackMenuItem",b),t.default=b},function(e,t,n){"use strict";var r={search:function(e,t){for(var n=0,r=e.length-1,i=null,o=null;n<=r;){i=(n+r)/2|0,o=e[i];var a=t(o);if(a>0)n=i+1;else{if(!(a<0))return o;r=i-1}}return null}};e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,null,[{key:"isHeader",value:function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}},{key:"isFooter",value:function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}},{key:"getID3Data",value:function(t,n){for(var r=n,i=0;e.isHeader(t,n);){i+=10;i+=e._readSize(t,n+6),e.isFooter(t,n+10)&&(i+=10),n+=i}if(i>0)return t.subarray(r,r+i)}},{key:"_readSize",value:function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]}},{key:"getTimeStamp",value:function(t){for(var n=e.getID3Frames(t),r=0;r<n.length;r++){var i=n[r];if(e.isTimeStampFrame(i))return e._readTimeStamp(i)}}},{key:"isTimeStampFrame",value:function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info}},{key:"_getFrameData",value:function(t){var n=String.fromCharCode(t[0],t[1],t[2],t[3]),r=e._readSize(t,4);return{type:n,size:r,data:t.subarray(10,10+r)}}},{key:"getID3Frames",value:function(t){for(var n=0,r=[];e.isHeader(t,n);){var i=e._readSize(t,n+6);n+=10;for(var o=n+i;n+8<o;){var a=e._getFrameData(t.subarray(n)),s=e._decodeFrame(a);s&&r.push(s),n+=a.size+10}e.isFooter(t,n)&&(n+=10)}return r}},{key:"_decodeFrame",value:function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0}},{key:"_readTimeStamp",value:function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}}},{key:"_decodePrivFrame",value:function(t){if(!(t.size<2)){var n=e._utf8ArrayToStr(t.data),r=new Uint8Array(t.data.subarray(n.length+1));return{key:t.type,info:n,data:r.buffer}}}},{key:"_decodeTextFrame",value:function(t){if(!(t.size<2)){if("TXXX"===t.type){var n=1,r=e._utf8ArrayToStr(t.data.subarray(n));n+=r.length+1;var i=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:r,data:i}}var o=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:o}}}},{key:"_decodeURLFrame",value:function(t){if("WXXX"===t.type){if(t.size<2)return;var n=1,r=e._utf8ArrayToStr(t.data.subarray(n));n+=r.length+1;var i=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:r,data:i}}var o=e._utf8ArrayToStr(t.data);return{key:t.type,data:o}}},{key:"_utf8ArrayToStr",value:function(e){for(var t=void 0,n=void 0,r="",i=0,o=e.length;i<o;){var a=e[i++];switch(a>>4){case 0:return r;case 1:case 2:case 3:case 4:case 5:case 6:case 7:r+=String.fromCharCode(a);break;case 12:case 13:t=e[i++],r+=String.fromCharCode((31&a)<<6|63&t);break;case 14:t=e[i++],n=e[i++],r+=String.fromCharCode((15&a)<<12|(63&t)<<6|(63&n)<<0)}}return r}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){console&&console.warn&&console.warn(e)}function i(){i.init.call(this)}function o(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+(void 0===e?"undefined":b(e)))}function a(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function s(e,t,n,i){var s,l,u;if(o(n),l=e._events,void 0===l?(l=e._events=Object.create(null),e._eventsCount=0):(void 0!==l.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),l=e._events),u=l[t]),void 0===u)u=l[t]=n,++e._eventsCount;else if("function"==typeof u?u=l[t]=i?[n,u]:[u,n]:i?u.unshift(n):u.push(n),(s=a(e))>0&&u.length>s&&!u.warned){u.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=u.length,r(c)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function c(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?p(i):f(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function d(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function p(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function v(e,t){return new Promise(function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&y(e,i,{once:!0})})}function y(e,t,n){"function"==typeof e.on&&g(e,"error",t,n)}function g(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+(void 0===e?"undefined":b(e)));e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)})}}var m,b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_="object"===("undefined"==typeof Reflect?"undefined":b(Reflect))?Reflect:null,E=_&&"function"==typeof _.apply?_.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};m=_&&"function"==typeof _.ownKeys?_.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var k=Number.isNaN||function(e){return e!==e};e.exports=i,e.exports.once=v,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var T=10;Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(e){if("number"!=typeof e||e<0||k(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");T=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||k(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return a(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=i[e];if(void 0===s)return!1;if("function"==typeof s)E(s,this,t);else for(var l=s.length,u=f(s,l),n=0;n<l;++n)E(u[n],this,t);return!0},i.prototype.addListener=function(e,t){return s(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return s(this,e,t,!0)},i.prototype.once=function(e,t){return o(t),this.on(e,u(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return o(t),this.prependListener(e,u(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,i,a,s;if(o(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){s=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():d(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return c(this,e,!0)},i.prototype.rawListeners=function(e){return c(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},i.prototype.listenerCount=h,i.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]}},function(e,t,n){e.exports=!n(9)&&!n(4)(function(){return 7!=Object.defineProperty(n(99)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){t.f=n(6)},function(e,t,n){var r=n(25),i=n(22),o=n(77)(!1),a=n(101)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),l=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>l;)r(s,n=t[l++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){var r=n(14),i=n(2),o=n(40);e.exports=n(9)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,l=0;s>l;)r.f(e,n=a[l++],t[n]);return e}},function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(22),o=n(55).f,a={}.toString,s="object"==("undefined"==typeof window?"undefined":r(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(e){try{return o(e)}catch(e){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==a.call(e)?l(e):o(i(e))}},function(e,t,n){var r=n(0);r(r.S+r.F,"Object",{assign:n(104)})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(18),i=n(5),o=n(106),a=[].slice,s={},l=function(e,t,n){if(!(t in s)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),s=function r(){var i=n.concat(a.call(arguments));return this instanceof r?l(t,i.length,i):o(t,i,e)};return i(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t,n){var r=n(3).parseInt,i=n(62).trim,o=n(107),a=/^[-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var n=i(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},function(e,t,n){var r=n(3).parseFloat,i=n(62).trim;e.exports=1/r(n(107)+"-0")!=-1/0?function(e){var t=i(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){var r=n(33);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){var r=n(5),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){var r=n(110),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),l=i(2,-126),u=function(e){return e+1/o-1/o};e.exports=Math.fround||function(e){var t,n,i=Math.abs(e),c=r(e);return i<l?c*u(i/l/a)*l*a:(t=(1+a/o)*i,n=t-(t-i),n>s||n!=n?c*(1/0):c*n)}},function(e,t,n){var r=n(2);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(18),i=n(16),o=n(67),a=n(10);e.exports=function(e,t,n,s,l){r(t);var u=i(e),c=o(u),h=a(u.length),f=l?h-1:0,d=l?-1:1;if(n<2)for(;;){if(f in c){s=c[f],f+=d;break}if(f+=d,l?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;l?f>=0:h>f;f+=d)f in c&&(s=t(s,c[f],f,u));return s}},function(e,t,n){"use strict";var r=n(16),i=n(54),o=n(10);e.exports=[].copyWithin||function(e,t){var n=r(this),a=o(n.length),s=i(e,a),l=i(t,a),u=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===u?a:i(u,a))-l,a-s),h=1;for(l<s&&s<l+c&&(h=-1,l+=c-1,s+=c-1);c-- >0;)l in n?n[s]=n[l]:delete n[s],s+=h,l+=h;return n}},function(e,t,n){"use strict";var r=n(120);n(0)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(e,t,n){n(9)&&"g"!=/./g.flags&&n(14).f(RegExp.prototype,"flags",{configurable:!0,get:n(70)})},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(2),i=n(5),o=n(124);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(160),i=n(60);e.exports=n(88)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(14).f,i=n(41),o=n(59),a=n(32),s=n(58),l=n(50),u=n(81),c=n(119),h=n(57),f=n(9),d=n(47).fastKey,p=n(60),v=f?"_s":"size",y=function(e,t){var n,r=d(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var c=e(function(e,r){s(e,c,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=r&&l(r,n,e[u],e)});return o(c.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var n=p(this,t),r=y(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[v]--}return!!r},forEach:function(e){p(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!y(p(this,t),e)}}),f&&r(c.prototype,"size",{get:function(){return p(this,t)[v]}}),c},def:function(e,t,n){var r,i,o=y(e,t);return o?o.v=n:(e._l=o={i:i=d(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[v]++,"F"!==i&&(e._i[i]=o)),e},getEntry:y,setStrong:function(e,t,n){u(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?c(0,n.k):"values"==t?c(0,n.v):c(0,[n.k,n.v]):(e._t=void 0,c(1))},n?"entries":"values",!n,!0),h(t)}}},function(e,t,n){"use strict";var r=n(160),i=n(60);e.exports=n(88)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r,i=n(3),o=n(39)(0),a=n(27),s=n(47),l=n(104),u=n(163),c=n(5),h=n(60),f=n(60),d=!i.ActiveXObject&&"ActiveXObject"in i,p=s.getWeak,v=Object.isExtensible,y=u.ufstore,g=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(e){if(c(e)){var t=p(e);return!0===t?y(h(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(h(this,"WeakMap"),e,t)}},b=e.exports=n(88)("WeakMap",g,m,u,!0,!0);f&&d&&(r=u.getConstructor(g,"WeakMap"),l(r.prototype,m),s.NEED=!0,o(["delete","has","get","set"],function(e){var t=b.prototype,n=t[e];a(t,e,function(t,i){if(c(t)&&!v(t)){this._f||(this._f=new r);var o=this._f[e](t,i);return"set"==e?this:o}return n.call(this,t,i)})}))},function(e,t,n){"use strict";var r=n(59),i=n(47).getWeak,o=n(2),a=n(5),s=n(58),l=n(50),u=n(39),c=n(25),h=n(60),f=u(5),d=u(6),p=0,v=function(e){return e._l||(e._l=new y)},y=function(){this.a=[]},g=function(e,t){return f(e.a,function(e){return e[0]===t})};y.prototype={get:function(e){var t=g(this,e);if(t)return t[1]},has:function(e){return!!g(this,e)},set:function(e,t){var n=g(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=d(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var u=e(function(e,r){s(e,u,t,"_i"),e._t=t,e._i=p++,e._l=void 0,void 0!=r&&l(r,n,e[o],e)});return r(u.prototype,{delete:function(e){if(!a(e))return!1;var n=i(e);return!0===n?v(h(this,t)).delete(e):n&&c(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=i(e);return!0===n?v(h(this,t)).has(e):n&&c(n,this._i)}}),u},def:function(e,t,n){var r=i(o(t),!0);return!0===r?v(e).set(t,n):r[e._i]=n,e},ufstore:v}},function(e,t,n){var r=n(34),i=n(10);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){"use strict";function r(e,t,n,u,c,h,f,d){for(var p,v,y=c,g=0,m=!!f&&s(f,d,3);g<u;){if(g in n){if(p=m?m(n[g],g,t):n[g],v=!1,o(p)&&(v=p[l],v=void 0!==v?!!v:i(p)),v&&h>0)y=r(e,t,p,a(p.length),y,h-1)-1;else{if(y>=9007199254740991)throw TypeError();e[y]=p}y++}g++}return y}var i=n(79),o=n(5),a=n(10),s=n(32),l=n(6)("isConcatSpreadable");e.exports=r},function(e,t,n){var r=n(10),i=n(109),o=n(37);e.exports=function(e,t,n,a){var s=String(o(e)),l=s.length,u=void 0===n?" ":String(n),c=r(t);if(c<=l||""==u)return s;var h=c-l,f=i.call(u,Math.ceil(h/u.length));return f.length>h&&(f=f.slice(0,h)),a?f+s:s+f}},function(e,t,n){var r=n(9),i=n(40),o=n(22),a=n(68).f;e.exports=function(e){return function(t){for(var n,s=o(t),l=i(s),u=l.length,c=0,h=[];u>c;)n=l[c++],r&&!a.call(s,n)||h.push(e?[n,s[n]]:s[n]);return h}}},function(e,t,n){var r=n(48),i=n(169);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var r=n(50);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t){e.exports=Math.scale||function(e,t,n,r,i){return 0===arguments.length||e!=e||t!=t||n!=n||r!=r||i!=i?NaN:e===1/0||e===-1/0?e:(e-t)*(i-r)/(n-t)+r}},function(e,t,n){var r=n(48),i=n(6)("iterator"),o=n(56);e.exports=n(20).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(r(t))}},function(e,t,n){"use strict";var r=n(173),i=n(106),o=n(18);e.exports=function(){for(var e=o(this),t=arguments.length,n=new Array(t),a=0,s=r._,l=!1;t>a;)(n[a]=arguments[a++])===s&&(l=!0);return function(){var r,o=this,a=arguments.length,u=0,c=0;if(!l&&!a)return i(e,n,o);if(r=n.slice(),l)for(;t>u;u++)r[u]===s&&(r[u]=arguments[c++]);for(;a>c;)r.push(arguments[c++]);return i(e,r,o)}}},function(e,t,n){e.exports=n(3)},function(e,t,n){var r=n(14),i=n(28),o=n(126),a=n(22);e.exports=function(e,t){for(var n,s=o(a(t)),l=s.length,u=0;l>u;)r.f(e,n=s[u++],i.f(t,n));return e}},function(e,t,n){var r=n(411),i=e.exports={WebVTT:n(412),VTTCue:n(413),VTTRegion:n(414)};r.vttjs=i,r.WebVTT=i.WebVTT;var o=i.VTTCue,a=i.VTTRegion,s=r.VTTCue,l=r.VTTRegion;i.shim=function(){r.VTTCue=o,r.VTTRegion=a},i.restore=function(){r.VTTCue=s,r.VTTRegion=l},r.VTTCue||i.shim()},function(e,t){function n(e){return e.replace(/\n\r?\s*/g,"")}e.exports=function(e){for(var t="",r=0;r<arguments.length;r++)t+=n(e[r])+(arguments[r+1]||"");return t}},function(e,t,n){"use strict";t.__esModule=!0,t.setTextContent=t.createStyleElement=void 0;var r=n(15),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.createStyleElement=function(e){var t=i.default.createElement("style");return t.className=e,t},t.setTextContent=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var u=n(1),c=i(u),h=n(15),f=i(h),d=n(11),p=i(d),v=n(51),y=r(v),g=n(12),m=r(g),b=n(7),_=r(b),E=n(64),k=r(E),T=n(21),w=r(T),S=n(31),C=i(S),O=n(65),P=i(O),R=n(72),L=n(179),A=n(177),x=r(A),D=n(416),I=i(D),M=n(180),j=i(M),N=n(417),F=i(N),B=n(23),U=n(44),H=i(U),V=n(418),G=i(V),W=n(181),K=i(W),z=n(73),X=i(z),q=n(184),Y=i(q),$=n(183),Q=i($);n(426),n(427),n(429),n(430),n(431),n(432),n(433),n(434),n(466),n(467),n(468);var J=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","ratechange","volumechange","texttrackchange"],Z=function(e){function t(n,r,i){if(o(this,t),n.id=n.id||"vjs_video_"+k.newGUID(),r=(0,B.assign)(t.getTagSettings(n),r),r.initChildren=!1,r.createEl=!1,r.reportTouchActivity=!1,!r.language)if("function"==typeof n.closest){var s=n.closest("[lang]");s&&(r.language=s.getAttribute("lang"))}else for(var l=n;l&&1===l.nodeType;){if(m.getElAttributes(l).hasOwnProperty("lang")){r.language=l.getAttribute("lang");break}l=l.parentNode}var u=a(this,e.call(this,null,r,i));if(!u.options_||!u.options_.techOrder||!u.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(u.tag=n,u.tagAttributes=n&&m.getElAttributes(n),u.language(u.options_.language),r.languages){var c={};Object.getOwnPropertyNames(r.languages).forEach(function(e){c[e.toLowerCase()]=r.languages[e]}),u.languages_=c}else u.languages_=t.prototype.options_.languages;u.cache_={},u.poster_=r.poster||"",u.controls_=!!r.controls,n.controls=!1,u.scrubbing_=!1,u.el_=u.createEl();var h=(0,H.default)(u.options_);if(r.plugins){var f=r.plugins;Object.getOwnPropertyNames(f).forEach(function(e){"function"==typeof this[e]?this[e](f[e]):C.default.error("Unable to find plugin:",e)},u)}u.options_.playerOptions=h,u.initChildren(),u.isAudio("audio"===n.nodeName.toLowerCase()),u.controls()?u.addClass("vjs-controls-enabled"):u.addClass("vjs-controls-disabled"),u.el_.setAttribute("role","region"),u.isAudio()?u.el_.setAttribute("aria-label","audio player"):u.el_.setAttribute("aria-label","video player"),u.isAudio()&&u.addClass("vjs-audio"),u.flexNotSupported_()&&u.addClass("vjs-no-flex"),w.IS_IOS||u.addClass("vjs-workinghover"),t.players[u.id_]=u;var d="5.20.5".split(".")[0];return u.addClass("vjs-v"+d),u.userActive(!0),u.reportUserActivity(),u.listenForUserActivity_(),u.on("fullscreenchange",u.handleFullscreenChange_),u.on("stageclick",u.handleStageClick_),u}return s(t,e),t.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&this.styleEl_.parentNode.removeChild(this.styleEl_),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&this.tech_.dispose(),e.prototype.dispose.call(this)},t.prototype.createEl=function(){var t=this.tag,n=void 0,r=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player");n=this.el_=r?t.parentNode:e.prototype.createEl.call(this,"div"),t.setAttribute("tabindex","-1"),t.removeAttribute("width"),t.removeAttribute("height");var i=m.getElAttributes(t);if(Object.getOwnPropertyNames(i).forEach(function(e){"class"===e?n.className+=" "+i[e]:n.setAttribute(e,i[e])}),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=n.player=this,this.addClass("vjs-paused"),!0!==p.default.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=x.createStyleElement("vjs-styles-dimensions");var o=m.$(".vjs-styles-defaults"),a=m.$("head");a.insertBefore(this.styleEl_,o?o.nextSibling:a.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var s=t.getElementsByTagName("a"),l=0;l<s.length;l++){var u=s.item(l);m.addElClass(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!r&&t.parentNode.insertBefore(n,t),m.insertElFirst(t,n),this.children_.unshift(t),this.el_=n,n},t.prototype.width=function(e){return this.dimension("width",e)},t.prototype.height=function(e){return this.dimension("height",e)},t.prototype.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t)this[n]=void 0;else{var r=parseFloat(t);if(isNaN(r))return C.default.error('Improper value "'+t+'" supplied for for '+e),this;this[n]=r}return this.updateStyleEl_(),this},t.prototype.fluid=function(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,e?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid"),this.updateStyleEl_()},t.prototype.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},t.prototype.updateStyleEl_=function(){if(!0===p.default.VIDEOJS_NO_DYNAMIC_STYLE){var e="number"==typeof this.width_?this.width_:this.options_.width,t="number"==typeof this.height_?this.height_:this.options_.height,n=this.tech_&&this.tech_.el();return void(n&&(e>=0&&(n.width=e),t>=0&&(n.height=t)))}var r=void 0,i=void 0,o=void 0,a=void 0;o=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";var s=o.split(":"),l=s[1]/s[0];r=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/l:this.videoWidth()||300,i=void 0!==this.height_?this.height_:r*l,a=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(a),x.setTextContent(this.styleEl_,"\n      ."+a+" {\n        width: "+r+"px;\n        height: "+i+"px;\n      }\n\n      ."+a+".vjs-fluid {\n        padding-top: "+100*l+"%;\n      }\n    ")},t.prototype.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_(),"Html5"!==e&&this.tag&&(X.default.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=e,this.isReady_=!1;var r=(0,B.assign)({source:t,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+e+"_api",videoTracks:this.videoTracks_,textTracks:this.textTracks_,audioTracks:this.audioTracks_,autoplay:this.options_.autoplay,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"]},this.options_[e.toLowerCase()]);this.tag&&(r.tag=this.tag),t&&(this.currentType_=t.type,t.src===this.cache_.src&&this.cache_.currentTime>0&&(r.startTime=this.cache_.currentTime),this.cache_.sources=null,this.cache_.source=t,this.cache_.src=t.src);var i=X.default.getTech(e);i||(i=c.default.getComponent(e)),this.tech_=new i(r),this.tech_.ready(_.bind(this,this.handleTechReady_),!0),G.default.jsonToTextTracks(this.textTracksJson_||[],this.tech_),J.forEach(function(e){n.on(n.tech_,e,n["handleTech"+(0,P.default)(e)+"_"])}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"canplay",this.handleTechCanPlay_),this.on(this.tech_,"canplaythrough",this.handleTechCanPlayThrough_),this.on(this.tech_,"playing",this.handleTechPlaying_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"seeked",this.handleTechSeeked_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===e&&this.tag||m.insertElFirst(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},t.prototype.unloadTech_=function(){this.videoTracks_=this.videoTracks(),this.textTracks_=this.textTracks(),this.audioTracks_=this.audioTracks(),this.textTracksJson_=G.default.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1},t.prototype.tech=function(e){if(e&&e.IWillNotUseThisInPlugins)return this.tech_;var t="\n      Please make sure that you are not using this inside of a plugin.\n      To disable this alert and error, please pass in an object with\n      `IWillNotUseThisInPlugins` to the `tech` method. See\n      https://github.com/videojs/video.js/issues/2617 for more info.\n    ";throw p.default.alert(t),new Error(t)},t.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},t.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_)},t.prototype.handleTechReady_=function(){if(this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),(this.src()||this.currentSrc())&&this.tag&&this.options_.autoplay&&this.paused()){try{delete this.tag.poster}catch(e){(0,C.default)("deleting tag.poster throws in some browsers",e)}this.play()}},t.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"))},t.prototype.hasStarted=function(e){return void 0!==e?(this.hasStarted_!==e&&(this.hasStarted_=e,e?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")),this):!!this.hasStarted_},t.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},t.prototype.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return e.removeClass("vjs-waiting")})},t.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},t.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},t.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},t.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},t.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},t.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(C.default.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},t.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},t.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},t.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},t.prototype.handleTechClick_=function(e){0===e.button&&this.controls()&&(this.paused()?this.play():this.pause())},t.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},t.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},t.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},t.prototype.handleTechTouchEnd_=function(e){e.preventDefault()},t.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},t.prototype.handleStageClick_=function(){this.reportUserActivity()},t.prototype.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},t.prototype.handleTechError_=function(){var e=this.tech_.error();this.error(e)},t.prototype.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},t.prototype.getCache=function(){return this.cache_},t.prototype.techCall_=function(e,t){if(this.tech_&&!this.tech_.isReady_)this.tech_.ready(function(){this[e](t)},!0);else try{this.tech_&&this.tech_[e](t)}catch(e){throw(0,C.default)(e),e}},t.prototype.techGet_=function(e){if(this.tech_&&this.tech_.isReady_)try{return this.tech_[e]()}catch(t){throw void 0===this.tech_[e]?(0,C.default)("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t):"TypeError"===t.name?((0,C.default)("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1):(0,C.default)(t),t}},t.prototype.play=function(){return this.src()||this.currentSrc()?this.techCall_("play"):this.tech_.one("loadstart",function(){this.play()}),this},t.prototype.pause=function(){return this.techCall_("pause"),this},t.prototype.paused=function(){return!1!==this.techGet_("paused")},t.prototype.scrubbing=function(e){return void 0!==e?(this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing"),this):this.scrubbing_},t.prototype.currentTime=function(e){return void 0!==e?(this.techCall_("setCurrentTime",e),this):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},t.prototype.duration=function(e){return void 0===e?void 0!==this.cache_.duration?this.cache_.duration:NaN:(e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange")),this)},t.prototype.remainingTime=function(){return this.duration()-this.currentTime()},t.prototype.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=(0,R.createTimeRange)(0,0)),e},t.prototype.bufferedPercent=function(){return(0,L.bufferedPercent)(this.buffered(),this.duration())},t.prototype.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return n>t&&(n=t),n},t.prototype.volume=function(e){var t=void 0;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),this):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},t.prototype.muted=function(e){return void 0!==e?(this.techCall_("setMuted",e),this):this.techGet_("muted")||!1},t.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},t.prototype.isFullscreen=function(e){return void 0!==e?(this.isFullscreen_=!!e,this):!!this.isFullscreen_},t.prototype.requestFullscreen=function(){var e=I.default;return this.isFullscreen(!0),e.requestFullscreen?(y.on(f.default,e.fullscreenchange,_.bind(this,function t(n){this.isFullscreen(f.default[e.fullscreenElement]),!1===this.isFullscreen()&&y.off(f.default,e.fullscreenchange,t),this.trigger("fullscreenchange")})),this.el_[e.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange")),this},t.prototype.exitFullscreen=function(){var e=I.default;return this.isFullscreen(!1),e.requestFullscreen?f.default[e.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange")),this},t.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=f.default.documentElement.style.overflow,y.on(f.default,"keydown",_.bind(this,this.fullWindowOnEscKey)),f.default.documentElement.style.overflow="hidden",m.addElClass(f.default.body,"vjs-full-window"),this.trigger("enterFullWindow")},t.prototype.fullWindowOnEscKey=function(e){27===e.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},t.prototype.exitFullWindow=function(){this.isFullWindow=!1,y.off(f.default,"keydown",this.fullWindowOnEscKey),f.default.documentElement.style.overflow=this.docOrigOverflow,m.removeElClass(f.default.body,"vjs-full-window"),this.trigger("exitFullWindow")},t.prototype.canPlayType=function(e){for(var t=void 0,n=0,r=this.options_.techOrder;n<r.length;n++){var i=(0,P.default)(r[n]),o=X.default.getTech(i);if(o||(o=c.default.getComponent(i)),o){if(o.isSupported()&&(t=o.canPlayType(e)))return t}else C.default.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},t.prototype.selectSource=function(e){var t=this,n=this.options_.techOrder.map(P.default).map(function(e){return[e,X.default.getTech(e)||c.default.getComponent(e)]}).filter(function(e){var t=e[0],n=e[1];return n?n.isSupported():(C.default.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),r=function(e,t,n){var r=void 0;return e.some(function(e){return t.some(function(t){if(r=n(e,t))return!0})}),r},i=function(e,n){var r=e[0];if(e[1].canPlaySource(n,t.options_[r.toLowerCase()]))return{source:n,tech:r}};return(this.options_.sourceOrder?r(e,n,function(e){return function(t,n){return e(n,t)}}(i)):r(n,e,i))||!1},t.prototype.src=function(e){if(void 0===e)return this.techGet_("src");var t=X.default.getTech(this.techName_);return t||(t=c.default.getComponent(this.techName_)),Array.isArray(e)?this.sourceList_(e):"string"==typeof e?this.src({src:e}):e instanceof Object&&(e.type&&!t.canPlaySource(e,this.options_[this.techName_.toLowerCase()])?this.sourceList_([e]):(this.cache_.sources=null,this.cache_.source=e,this.cache_.src=e.src,this.currentType_=e.type||"",this.ready(function(){t.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),"auto"===this.options_.preload&&this.load(),this.options_.autoplay&&this.play()},!0))),this},t.prototype.sourceList_=function(e){var t=this.selectSource(e);t?(t.tech===this.techName_?this.src(t.source):this.loadTech_(t.tech,t.source),this.cache_.sources=e):(this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),this.triggerReady())},t.prototype.load=function(){return this.techCall_("load"),this},t.prototype.reset=function(){return this.loadTech_((0,P.default)(this.options_.techOrder[0]),null),this.techCall_("reset"),this},t.prototype.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},t.prototype.currentSource=function(){var e={},t=this.currentSrc();return t&&(e.src=t),this.cache_.source||e},t.prototype.currentSrc=function(){return this.techGet_("currentSrc")||this.cache_.src||""},t.prototype.currentType=function(){return this.currentType_||""},t.prototype.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),this.options_.preload=e,this):this.techGet_("preload")},t.prototype.autoplay=function(e){return void 0!==e?(this.techCall_("setAutoplay",e),this.options_.autoplay=e,this):this.techGet_("autoplay",e)},t.prototype.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},t.prototype.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),this.options_.loop=e,this):this.techGet_("loop")},t.prototype.poster=function(e){return void 0===e?this.poster_:(e||(e=""),this.poster_=e,this.techCall_("setPoster",e),this.trigger("posterchange"),this)},t.prototype.handleTechPosterChange_=function(){!this.poster_&&this.tech_&&this.tech_.poster&&(this.poster_=this.tech_.poster()||"",this.trigger("posterchange"))},t.prototype.controls=function(e){return void 0!==e?(e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),e?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_())),this):!!this.controls_},t.prototype.usingNativeControls=function(e){return void 0!==e?(e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,e?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols"))),this):!!this.usingNativeControls_},t.prototype.error=function(e){return void 0===e?this.error_||null:null===e?(this.error_=e,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close(),this):(this.error_=new j.default(e),this.addClass("vjs-error"),C.default.error("(CODE:"+this.error_.code+" "+j.default.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),this)},t.prototype.reportUserActivity=function(e){this.userActivity_=!0},t.prototype.userActive=function(e){return void 0!==e?(e=!!e,e!==this.userActive_&&(this.userActive_=e,e?(this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive")):(this.userActivity_=!1,this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive"))),this):this.userActive_},t.prototype.listenForUserActivity_=function(){var e=void 0,t=void 0,n=void 0,r=_.bind(this,this.reportUserActivity),i=function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,r())},o=function(){r(),this.clearInterval(e),e=this.setInterval(r,250)},a=function(t){r(),this.clearInterval(e)};this.on("mousedown",o),this.on("mousemove",i),this.on("mouseup",a),this.on("keydown",r),this.on("keyup",r);var s=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(s);var e=this.options_.inactivityTimeout;e>0&&(s=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)},t.prototype.playbackRate=function(e){return void 0!==e?(this.techCall_("setPlaybackRate",e),this):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("playbackRate"):1},t.prototype.isAudio=function(e){return void 0!==e?(this.isAudio_=!!e,this):!!this.isAudio_},t.prototype.videoTracks=function(){return this.tech_?this.tech_.videoTracks():(this.videoTracks_=this.videoTracks_||new Q.default,this.videoTracks_)},t.prototype.audioTracks=function(){return this.tech_?this.tech_.audioTracks():(this.audioTracks_=this.audioTracks_||new Y.default,this.audioTracks_)},t.prototype.textTracks=function(){if(this.tech_)return this.tech_.textTracks()},t.prototype.remoteTextTracks=function(){if(this.tech_)return this.tech_.remoteTextTracks()},t.prototype.remoteTextTrackEls=function(){if(this.tech_)return this.tech_.remoteTextTrackEls()},t.prototype.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},t.prototype.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},t.prototype.removeRemoteTextTrack=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.track,n=void 0===t?arguments[0]:t;if(this.tech_)return this.tech_.removeRemoteTextTrack(n)},t.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},t.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},t.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},t.prototype.language=function(e){return void 0===e?this.language_:(this.language_=String(e).toLowerCase(),this)},t.prototype.languages=function(){return(0,H.default)(t.prototype.options_.languages,this.languages_)},t.prototype.toJSON=function(){var e=(0,H.default)(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var r=t[n];r=(0,H.default)(r),r.player=void 0,e.tracks[n]=r}return e},t.prototype.createModal=function(e,t){var n=this;t=t||{},t.content=e||"";var r=new K.default(this,t);return this.addChild(r),r.on("dispose",function(){n.removeChild(r)}),r.open()},t.getTagSettings=function(e){var t={sources:[],tracks:[]},n=m.getElAttributes(e),r=n["data-setup"];if(m.hasElClass(e,"vjs-fluid")&&(n.fluid=!0),null!==r){var i=(0,F.default)(r||"{}"),o=i[0],a=i[1];o&&C.default.error(o),(0,B.assign)(n,a)}if((0,B.assign)(t,n),e.hasChildNodes())for(var s=e.childNodes,l=0,u=s.length;l<u;l++){var c=s[l],h=c.nodeName.toLowerCase();"source"===h?t.sources.push(m.getElAttributes(c)):"track"===h&&t.tracks.push(m.getElAttributes(c))}return t},t.prototype.flexNotSupported_=function(){var e=f.default.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},t}(c.default);Z.players={};var ee=p.default.navigator;Z.prototype.options_={techOrder:["html5","flash"],html5:{},flash:{},defaultVolume:0,inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings"],language:ee&&(ee.languages&&ee.languages[0]||ee.userLanguage||ee.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){Z.prototype[e]=function(){return this.techGet_(e)}}),J.forEach(function(e){Z.prototype["handleTech"+(0,P.default)(e)+"_"]=function(){return this.trigger(e)}}),c.default.registerComponent("Player",Z),t.default=Z},function(e,t,n){"use strict";function r(e,t){var n=0,r=void 0,o=void 0;if(!t)return 0;e&&e.length||(e=(0,i.createTimeRange)(0,0));for(var a=0;a<e.length;a++)r=e.start(a),o=e.end(a),o>t&&(o=t),n+=o-r;return n/t}t.__esModule=!0,t.bufferedPercent=r;var i=n(72)},function(e,t,n){"use strict";function r(e){if(e instanceof r)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:(0,i.isObject)(e)&&("number"==typeof e.code&&(this.code=e.code),(0,i.assign)(this,e)),this.message||(this.message=r.defaultMessages[this.code]||"")}t.__esModule=!0;var i=n(23);r.prototype.code=0,r.prototype.message="",r.prototype.status=null,r.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],r.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var o=0;o<r.errorTypes.length;o++)r[r.errorTypes[o]]=o,r.prototype[r.errorTypes[o]]=o;t.default=r},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(12),u=r(l),c=n(7),h=r(c),f=n(1),d=function(e){return e&&e.__esModule?e:{default:e}}(f),p="vjs-modal-dialog",v=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.opened_=a.hasBeenOpened_=a.hasBeenFilled_=!1,a.closeable(!a.options_.uncloseable),a.content(a.options_.content),a.contentEl_=u.createEl("div",{className:p+"-content"},{role:"document"}),a.descEl_=u.createEl("p",{className:p+"-description vjs-offscreen",id:a.el().getAttribute("aria-describedby")}),u.textContent(a.descEl_,a.description()),a.el_.appendChild(a.descEl_),a.el_.appendChild(a.contentEl_),a}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.prototype.buildCSSClass=function(){return p+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},t.prototype.handleKeyPress=function(e){27===e.which&&this.closeable()&&this.close()},t.prototype.label=function(){return this.options_.label||this.localize("Modal Window")},t.prototype.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},t.prototype.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",h.bind(this,this.handleKeyPress)),e.controls(!1),this.show(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}return this},t.prototype.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},t.prototype.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",h.bind(this,this.handleKeyPress)),e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.options_.temporary&&this.dispose()}return this},t.prototype.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,n=this.getChild("closeButton");if(t&&!n){var r=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=r,this.on(n,"close",this.close)}!t&&n&&(this.off(n,"close",this.close),this.removeChild(n),n.dispose())}return this.closeable_},t.prototype.fill=function(){return this.fillWith(this.content())},t.prototype.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,r=t.nextSibling;return this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),u.insertContent(t,e),this.trigger("modalfill"),r?n.insertBefore(t,r):n.appendChild(t),this},t.prototype.empty=function(){return this.trigger("beforemodalempty"),u.emptyEl(this.contentEl()),this.trigger("modalempty"),this},t.prototype.content=function(e){return void 0!==e&&(this.content_=e),this.content_},t}(d.default);v.prototype.options_={pauseOnOpen:!0,temporary:!0},d.default.registerComponent("ModalDialog",v),t.default=v},function(e,t,n){"use strict";function r(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function i(e,t,n){var r=e;return c(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=f(t,{uri:e}),r.callback=n,r}function o(e,t,n){return t=i(e,t,n),a(t)}function a(e){function t(){4===f.readyState&&a()}function n(){var e=void 0;if(e=f.response?f.response:f.responseText||s(f),E)try{e=JSON.parse(e)}catch(e){}return e}function i(e){return clearTimeout(v),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,u(e,c)}function a(){if(!p){var t;clearTimeout(v),t=e.useXDR&&void 0===f.status?200:1223===f.status?204:f.status;var r=c,i=null;return 0!==t?(r={body:n(),statusCode:t,method:g,headers:{},url:y,rawRequest:f},f.getAllResponseHeaders&&(r.headers=h(f.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),u(i,r,r.body)}}if(void 0===e.callback)throw new Error("callback argument missing");var l=!1,u=function(t,n,r){l||(l=!0,e.callback(t,n,r))},c={body:void 0,headers:{},statusCode:0,method:g,url:y,rawRequest:f},f=e.xhr||null;f||(f=e.cors||e.useXDR?new o.XDomainRequest:new o.XMLHttpRequest);var d,p,v,y=f.url=e.uri||e.url,g=f.method=e.method||"GET",m=e.body||e.data||null,b=f.headers=e.headers||{},_=!!e.sync,E=!1;if("json"in e&&(E=!0,b.accept||b.Accept||(b.Accept="application/json"),"GET"!==g&&"HEAD"!==g&&(b["content-type"]||b["Content-Type"]||(b["Content-Type"]="application/json"),m=JSON.stringify(e.json))),f.onreadystatechange=t,f.onload=a,f.onerror=i,f.onprogress=function(){},f.ontimeout=i,f.open(g,y,!_,e.username,e.password),_||(f.withCredentials=!!e.withCredentials),!_&&e.timeout>0&&(v=setTimeout(function(){p=!0,f.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",i(e)},e.timeout)),f.setRequestHeader)for(d in b)b.hasOwnProperty(d)&&f.setRequestHeader(d,b[d]);else if(e.headers&&!r(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(f.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(f),f.send(m),f}function s(e){if("document"===e.responseType)return e.responseXML;var t=204===e.status&&e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function l(){}var u=n(11),c=n(421),h=n(422),f=n(423);e.exports=o,o.XMLHttpRequest=u.XMLHttpRequest||l,o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:u.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],function(e){o["delete"===e?"del":e]=function(t,n,r){return n=i(t,n,r),n.method=e.toUpperCase(),a(n)}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(132),u=r(l),c=n(21),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=n(15),d=r(f),p=function(e,t){for(var n=0;n<e.length;n++)t.id!==e[n].id&&(e[n].selected=!1)},v=function(e){function t(){var n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];i(this,t);for(var s=void 0,l=a.length-1;l>=0;l--)if(a[l].selected){p(a,a[l]);break}if(h.IS_IE8){s=d.default.createElement("custom");for(var c in u.default.prototype)"constructor"!==c&&(s[c]=u.default.prototype[c]);for(var f in t.prototype)"constructor"!==f&&(s[f]=t.prototype[f])}return s=n=o(this,e.call(this,a,s)),s.changing_=!1,Object.defineProperty(s,"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),r=s,o(n,r)}return a(t,e),t.prototype.addTrack_=function(t){var n=this;t.selected&&p(this,t),e.prototype.addTrack_.call(this,t),t.addEventListener&&t.addEventListener("selectedchange",function(){n.changing_||(n.changing_=!0,p(n,t),n.changing_=!1,n.trigger("change"))})},t.prototype.addTrack=function(e){this.addTrack_(e)},t.prototype.removeTrack=function(t){e.prototype.removeTrack_.call(this,t)},t}(u.default);t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(132),u=r(l),c=n(21),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=n(15),d=r(f),p=function(e,t){for(var n=0;n<e.length;n++)t.id!==e[n].id&&(e[n].enabled=!1)},v=function(e){function t(){var n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];i(this,t);for(var s=void 0,l=a.length-1;l>=0;l--)if(a[l].enabled){p(a,a[l]);break}if(h.IS_IE8){s=d.default.createElement("custom");for(var c in u.default.prototype)"constructor"!==c&&(s[c]=u.default.prototype[c]);for(var f in t.prototype)"constructor"!==f&&(s[f]=t.prototype[f])}return s=n=o(this,e.call(this,a,s)),s.changing_=!1,r=s,o(n,r)}return a(t,e),t.prototype.addTrack_=function(t){var n=this;t.enabled&&p(this,t),e.prototype.addTrack_.call(this,t),t.addEventListener&&t.addEventListener("enabledchange",function(){n.changing_||(n.changing_=!0,p(n,t),n.changing_=!1,n.trigger("change"))})},t.prototype.addTrack=function(e){this.addTrack_(e)},t.prototype.removeTrack=function(t){e.prototype.removeTrack_.call(this,t)},t}(u.default);t.default=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var s=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=n(12),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),h=n(23),f=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return a.bar=a.getChild(a.options_.barName),a.vertical(!!a.options_.vertical),a.on("mousedown",a.handleMouseDown),a.on("touchstart",a.handleMouseDown),a.on("focus",a.handleFocus),a.on("blur",a.handleBlur),a.on("click",a.handleClick),a.on(n,"controlsvisible",a.update),a.on(n,a.playerEvent,a.update),a}return o(t,e),t.prototype.createEl=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.className=n.className+" vjs-slider",n=(0,h.assign)({tabIndex:0},n),r=(0,h.assign)({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},r),e.prototype.createEl.call(this,t,n,r)},t.prototype.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;e.preventDefault(),c.blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},t.prototype.handleMouseMove=function(e){},t.prototype.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;c.unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},t.prototype.update=function(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){("number"!=typeof e||e!==e||e<0||e===1/0)&&(e=0);var n=(100*e).toFixed(2)+"%";this.vertical()?t.el().style.height=n:t.el().style.width=n}}},t.prototype.calculateDistance=function(e){var t=c.getPointerPosition(this.el_,e);return this.vertical()?t.y:t.x},t.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepForward())},t.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleClick=function(e){e.stopImmediatePropagation(),e.preventDefault()},t.prototype.vertical=function(e){return void 0===e?this.vertical_||!1:(this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal"),this)},t}(l.default);l.default.registerComponent("Slider",f),t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(185),u=r(l),c=n(1),h=r(c),f=n(7),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f);n(449);var p=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.on(n,"volumechange",a.updateARIAAttributes),n.ready(d.bind(a,a.updateARIAAttributes)),a}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":"volume level"})},t.prototype.handleMouseMove=function(e){this.checkMuted(),this.player_.volume(this.calculateDistance(e))},t.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.prototype.updateARIAAttributes=function(e){var t=(100*this.player_.volume()).toFixed(2);this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},t}(u.default);p.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},p.prototype.playerEvent="volumechange",h.default.registerComponent("VolumeBar",p),t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(75),u=r(l),c=n(1),h=r(c),f=n(12),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),p=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.on(n,"volumechange",a.update),n.tech_&&!1===n.tech_.featuresVolumeControl&&a.addClass("vjs-hidden"),a.on(n,"loadstart",function(){this.update(),!1===n.tech_.featuresVolumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.player_.muted(!this.player_.muted())},t.prototype.update=function(e){var t=this.player_.volume(),n=3;this.player_.muted()?n=0:t<.33?n=1:t<.67&&(n=2);var r=this.player_.muted()?"Unmute":"Mute";this.controlText()!==r&&this.controlText(r);for(var i=0;i<4;i++)d.removeElClass(this.el_,"vjs-vol-"+i);d.addElClass(this.el_,"vjs-vol-"+n)},t}(u.default);p.prototype.controlText_="Mute",h.default.registerComponent("MuteToggle",p),t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(189),u=r(l),c=n(1),h=r(c),f=n(7),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),p=function(e){function t(n,r){i(this,t);var a=r.tracks,s=o(this,e.call(this,n,r));if(s.items.length<=1&&s.hide(),!a)return o(s);var l=d.bind(s,s.update);return a.addEventListener("removetrack",l),a.addEventListener("addtrack",l),s.player_.on("dispose",function(){a.removeEventListener("removetrack",l),a.removeEventListener("addtrack",l)}),s}return a(t,e),t}(u.default);h.default.registerComponent("TrackButton",p),t.default=p},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var u=n(74),c=i(u),h=n(1),f=i(h),d=n(190),p=i(d),v=n(12),y=r(v),g=n(7),m=r(g),b=n(65),_=i(b),E=function(e){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var i=a(this,e.call(this,n,r));return i.update(),i.enabled_=!0,i.el_.setAttribute("aria-haspopup","true"),i.el_.setAttribute("role","menuitem"),i.on("keydown",i.handleSubmenuKeyPress),i}return s(t,e),t.prototype.update=function(){var e=this.createMenu();this.menu&&this.removeChild(this.menu),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},t.prototype.createMenu=function(){var e=new p.default(this.player_);if(this.hideThreshold_=0,this.options_.title){var t=y.createEl("li",{className:"vjs-menu-title",innerHTML:(0,_.default)(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,e.children_.unshift(t),y.insertElFirst(t,e.contentEl())}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e},t.prototype.createItems=function(){},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t.prototype.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.one(this.menu.contentEl(),"mouseleave",m.bind(this,function(e){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},t.prototype.handleKeyPress=function(t){27===t.which||9===t.which?(this.buttonPressed_&&this.unpressButton(),9!==t.which&&t.preventDefault()):38===t.which||40===t.which?this.buttonPressed_||(this.pressButton(),t.preventDefault()):e.prototype.handleKeyPress.call(this,t)},t.prototype.handleSubmenuKeyPress=function(e){27!==e.which&&9!==e.which||(this.buttonPressed_&&this.unpressButton(),9!==e.which&&e.preventDefault())},t.prototype.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.lockShowing(),this.el_.setAttribute("aria-expanded","true"),this.menu.focus())},t.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.el_.focus())},t.prototype.disable=function(){return this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.enabled_=!1,e.prototype.disable.call(this)},t.prototype.enable=function(){return this.enabled_=!0,e.prototype.enable.call(this)},t}(c.default);f.default.registerComponent("MenuButton",E),t.default=E},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(1),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=n(12),h=r(c),f=n(7),d=r(f),p=n(51),v=r(p),y=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.focusedChild_=-1,a.on("keydown",a.handleKeyPress),a}return a(t,e),t.prototype.addItem=function(e){this.addChild(e),e.on("click",d.bind(this,function(e){this.unlockShowing()}))},t.prototype.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=h.createEl(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.setAttribute("role","presentation"),n.appendChild(this.contentEl_),v.on(n,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),n},t.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepForward()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepBack())},t.prototype.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},t.prototype.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},t.prototype.focus=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.children().slice();t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className)&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(u.default);u.default.registerComponent("Menu",y),t.default=y},function(e,t,n){(function(e){var n,r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o){var a=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,s=/^([^\/?#]*)([^]*)$/,l=/(?:\/|^)\.(?=\/)/g,u=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,c={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=c.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=c.normalizePath(r.path),c.buildURLFromParts(r)}var i=c.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return n.alwaysNormalize?(i.path=c.normalizePath(i.path),c.buildURLFromParts(i)):t;var o=c.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var a=s.exec(o.path);o.netLoc=a[1],o.path=a[2]}o.netLoc&&!o.path&&(o.path="/");var l={scheme:o.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(l.netLoc=o.netLoc,"/"!==i.path[0]))if(i.path){var u=o.path,h=u.substring(0,u.lastIndexOf("/")+1)+i.path;l.path=c.normalizePath(h)}else l.path=o.path,i.params||(l.params=o.params,i.query||(l.query=o.query));return null===l.path&&(l.path=n.alwaysNormalize?c.normalizePath(i.path):i.path),c.buildURLFromParts(l)},parseURL:function(e){var t=a.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(l,"");e.length!==(e=e.replace(u,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};"object"===i(t)&&"object"===i(e)?e.exports=c:(n=[],void 0!==(r=function(){return c}.apply(t,n))&&(e.exports=r))}()}).call(t,n(474)(e))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(13),s=r(a),l=n(193),u=r(l),c=n(493),h=r(c),f=n(8),d=n(19),p=n(137),v=r(p),y=function(){function e(t,r){i(this,e),this.hls=t,this.id=r;var o=this.observer=new v.default,a=t.config;o.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];o.emit.apply(o,[e,e].concat(n))},o.off=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];o.removeListener.apply(o,[e].concat(n))};var l=function(e,n){n=n||{},n.frag=this.frag,n.id=this.id,t.trigger(e,n)}.bind(this);o.on(s.default.FRAG_DECRYPTED,l),o.on(s.default.FRAG_PARSING_INIT_SEGMENT,l),o.on(s.default.FRAG_PARSING_DATA,l),o.on(s.default.FRAG_PARSED,l),o.on(s.default.ERROR,l),o.on(s.default.FRAG_PARSING_METADATA,l),o.on(s.default.FRAG_PARSING_USERDATA,l),o.on(s.default.INIT_PTS_FOUND,l);var c={mp4:MediaSource.isTypeSupported("video/mp4"),mpeg:MediaSource.isTypeSupported("audio/mpeg"),mp3:MediaSource.isTypeSupported('audio/mp4; codecs="mp3"')},p=navigator.vendor;if(a.enableWorker&&"undefined"!=typeof Worker){f.logger.log("demuxing in webworker");var y=void 0;try{var g=n(494);y=this.w=g(h.default),this.onwmsg=this.onWorkerMessage.bind(this),y.addEventListener("message",this.onwmsg),y.onerror=function(e){t.trigger(s.default.ERROR,{type:d.ErrorTypes.OTHER_ERROR,details:d.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},y.postMessage({cmd:"init",typeSupported:c,vendor:p,id:r,config:JSON.stringify(a)})}catch(e){f.logger.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),y&&URL.revokeObjectURL(y.objectURL),this.demuxer=new u.default(o,c,a,p),this.w=void 0}}else this.demuxer=new u.default(o,c,a,p)}return o(e,[{key:"destroy",value:function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)}},{key:"push",value:function(e,t,n,r,i,o,a,s){var l=this.w,u=isNaN(i.startDTS)?i.start:i.startDTS,c=i.decryptdata,h=this.frag,d=!(h&&i.cc===h.cc),p=!(h&&i.level===h.level),v=h&&i.sn===h.sn+1,y=!p&&v;if(d&&f.logger.log(this.id+":discontinuity detected"),p&&f.logger.log(this.id+":switch detected"),this.frag=i,l)l.postMessage({cmd:"demux",data:e,decryptdata:c,initSegment:t,audioCodec:n,videoCodec:r,timeOffset:u,discontinuity:d,trackSwitch:p,contiguous:y,duration:o,accurateTimeOffset:a,defaultInitPTS:s},[e]);else{var g=this.demuxer;g&&g.push(e,c,t,n,r,u,d,p,y,o,a,s)}}},{key:"onWorkerMessage",value:function(e){var t=e.data,n=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case s.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}}}]),e}();t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(13),s=r(a),l=n(19),u=n(194),c=r(u),h=n(483),f=r(h),d=n(484),p=r(d),v=n(485),y=r(v),g=n(488),m=r(g),b=n(489),_=r(b),E=n(492),k=r(E),T=function(){function e(t,n,r,o){i(this,e),this.observer=t,this.typeSupported=n,this.config=r,this.vendor=o}return o(e,[{key:"destroy",value:function(){var e=this.demuxer;e&&e.destroy()}},{key:"push",value:function(e,t,n,r,i,o,a,l,u,h,f,d){if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var p=this.decrypter;null==p&&(p=this.decrypter=new c.default(this.observer,this.config));var v,y=this;try{v=performance.now()}catch(e){v=Date.now()}p.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var c;try{c=performance.now()}catch(e){c=Date.now()}y.observer.trigger(s.default.FRAG_DECRYPTED,{stats:{tstart:v,tdecrypt:c}}),y.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),r,i,o,a,l,u,h,f,d)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),r,i,o,a,l,u,h,f,d)}},{key:"pushDecrypted",value:function(e,t,n,r,i,o,a,u,c,h,d,v){var g=this.demuxer;if(!g||a&&!this.probe(e)){for(var b=this.observer,E=this.typeSupported,T=this.config,w=[{demux:f.default,remux:_.default},{demux:m.default,remux:_.default},{demux:y.default,remux:_.default},{demux:p.default,remux:k.default}],S=0,C=w.length;S<C;S++){var O=w[S],P=O.demux.probe;if(P(e)){var R=this.remuxer=new O.remux(b,T,E,this.vendor);g=new O.demux(b,R,T,E),this.probe=P;break}}if(!g)return void b.trigger(s.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=g}var L=this.remuxer;(a||u)&&(g.resetInitSegment(n,r,i,h),L.resetInitSegment()),a&&(g.resetTimeStamp(v),L.resetTimeStamp(v)),"function"==typeof g.setDecryptData&&g.setDecryptData(t),g.append(e,o,c,d)}}]),e}();t.default=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(480),s=r(a),l=n(481),u=r(l),c=n(482),h=r(c),f=n(19),d=n(8),p=function(){function e(t,n){i(this,e),this.observer=t,this.config=n,this.logEnabled=!0;try{var r=crypto||self.crypto;this.subtle=r.subtle||r.webkitSubtle}catch(e){}this.disableWebCrypto=!this.subtle}return o(e,[{key:"isSync",value:function(){return this.disableWebCrypto&&this.config.enableSoftwareAES}},{key:"decrypt",value:function(e,t,n,r){var i=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(d.logger.log("JS AES decrypt"),this.logEnabled=!1);var o=this.decryptor;o||(this.decryptor=o=new h.default),o.expandKey(t),r(o.decrypt(e,0,n))}else{this.logEnabled&&(d.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var a=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new u.default(a,t)),this.fastAesKey.expandKey().then(function(o){new s.default(a,n).decrypt(e,o).catch(function(o){i.onWebCryptoError(o,e,t,n,r)}).then(function(e){r(e)})}).catch(function(o){i.onWebCryptoError(o,e,t,n,r)})}}},{key:"onWebCryptoError",value:function(e,t,n,r,i){this.config.enableSoftwareAES?(d.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,n,r,i)):(d.logger.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))}},{key:"destroy",value:function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)}}]),e}();t.default=p},function(e,t,n){"use strict";var r=n(8),i=n(19),o={getAudioConfig:function(e,t,n,o){var a,s,l,u,c,h=navigator.userAgent.toLowerCase(),f=o,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return a=1+((192&t[n+2])>>>6),(s=(60&t[n+2])>>>2)>d.length-1?void e.trigger(Event.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+s}):(u=(1&t[n+2])<<2,u|=(192&t[n+3])>>>6,r.logger.log("manifest codec:"+o+",ADTS data:type:"+a+",sampleingIndex:"+s+"["+d[s]+"Hz],channelConfig:"+u),/firefox/i.test(h)?s>=6?(a=5,c=new Array(4),l=s-3):(a=2,c=new Array(2),l=s):-1!==h.indexOf("android")?(a=2,c=new Array(2),l=s):(a=5,c=new Array(4),o&&(-1!==o.indexOf("mp4a.40.29")||-1!==o.indexOf("mp4a.40.5"))||!o&&s>=6?l=s-3:((o&&-1!==o.indexOf("mp4a.40.2")&&(s>=6&&1===u||/vivaldi/i.test(h))||!o&&1===u)&&(a=2,c=new Array(2)),l=s)),c[0]=a<<3,c[0]|=(14&s)>>1,c[1]|=(1&s)<<7,c[1]|=u<<3,5===a&&(c[1]|=(14&l)>>1,c[2]=(1&l)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:d[s],channelCount:u,codec:"mp4a.40."+a,manifestCodec:f})},isHeaderPattern:function(e,t){return 255===e[t]&&240==(246&e[t+1])},getHeaderLength:function(e,t){return 1&e[t+1]?7:9},getFullFrameLength:function(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=this.getHeaderLength(e,t),r=n;t+5<e.length&&(r=this.getFullFrameLength(e,t));var i=t+r;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1},initTrackConfig:function(e,t,n,i,o){if(!e.samplerate){var a=this.getAudioConfig(t,n,i,o);e.config=a.config,e.samplerate=a.samplerate,e.channelCount=a.channelCount,e.codec=a.codec,e.manifestCodec=a.manifestCodec,r.logger.log("parsed codec:"+e.codec+",rate:"+a.samplerate+",nb channel:"+a.channelCount)}},getFrameDuration:function(e){return 9216e4/e},appendFrame:function(e,t,n,r,i){var o=this.getFrameDuration(e.samplerate),a=this.parseFrameHeader(t,n,r,i,o);if(a){var s=a.stamp,l=a.headerLength,u=a.frameLength,c={unit:t.subarray(n+l,n+l+u),pts:s,dts:s};return e.samples.push(c),e.len+=u,{sample:c,length:u+l}}},parseFrameHeader:function(e,t,n,r,i){var o,a,s,l=e.length;if(o=this.getHeaderLength(e,t),a=this.getFullFrameLength(e,t),(a-=o)>0&&t+o+a<=l)return s=n+r*i,{headerLength:o,frameLength:a,stamp:s}}};e.exports=o},function(e,t,n){"use strict";var r={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],appendFrame:function(e,t,n,r,i){if(!(n+24>t.length)){var o=this.parseHeader(t,n);if(o&&n+o.frameLength<=t.length){var a=10368e4/o.sampleRate,s=r+i*a,l={unit:t.subarray(n,n+o.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=o.channelCount,e.samplerate=o.sampleRate,e.samples.push(l),e.len+=o.frameLength,{sample:l,length:o.frameLength}}}},parseHeader:function(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,o=e[t+2]>>4&15,a=e[t+2]>>2&3,s=!!(2&e[t+2]);if(1!==n&&0!==o&&15!==o&&3!==a){var l=3===n?3-i:3===i?3:4,u=1e3*r.BitratesMap[14*l+o-1],c=3===n?0:2===n?1:2,h=r.SamplingRateMap[3*c+a],f=s?1:0;return{sampleRate:h,channelCount:e[t+3]>>6==3?1:2,frameLength:3===i?(3===n?12:6)*u/h+f<<2:(3===n?144:72)*u/h+f|0}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=this.parseHeader(e,t),r=4;n&&n.frameLength&&(r=n.frameLength);var i=t+r;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1}};e.exports=r},function(e,t,n){"use strict";var r=n(8),i={mergeDetails:function(e,t){var n,o=Math.max(e.startSN,t.startSN)-t.startSN,a=Math.min(e.endSN,t.endSN)-t.startSN,s=t.startSN-e.startSN,l=e.fragments,u=t.fragments,c=0;if(a<o)return void(t.PTSKnown=!1);for(var h=o;h<=a;h++){var f=l[s+h],d=u[h];d&&f&&(c=f.cc-d.cc,isNaN(f.startPTS)||(d.start=d.startPTS=f.startPTS,d.endPTS=f.endPTS,d.duration=f.duration,d.backtracked=f.backtracked,d.dropped=f.dropped,n=d))}if(c)for(r.logger.log("discontinuity sliding from playlist, take drift into account"),h=0;h<u.length;h++)u[h].cc+=c;if(n)i.updateFragPTSDTS(t,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS);else if(s>=0&&s<l.length){var p=l[s].start;for(h=0;h<u.length;h++)u[h].start+=p}t.PTSKnown=e.PTSKnown},updateFragPTSDTS:function(e,t,n,r,o,a){var s=n;if(!isNaN(t.startPTS)){var l=Math.abs(t.startPTS-n);isNaN(t.deltaPTS)?t.deltaPTS=l:t.deltaPTS=Math.max(l,t.deltaPTS),s=Math.max(n,t.startPTS),n=Math.min(n,t.startPTS),r=Math.max(r,t.endPTS),o=Math.min(o,t.startDTS),a=Math.max(a,t.endDTS)}var u=n-t.start;t.start=t.startPTS=n,t.maxStartPTS=s,t.endPTS=r,t.startDTS=o,t.endDTS=a,t.duration=r-n;var c=t.sn;if(!e||c<e.startSN||c>e.endSN)return 0;var h,f,d;for(h=c-e.startSN,f=e.fragments,f[h]=t,d=h;d>0;d--)i.updatePTS(f,d,d-1);for(d=h;d<f.length-1;d++)i.updatePTS(f,d,d+1);return e.PTSKnown=!0,u},updatePTS:function(e,t,n){var i=e[t],o=e[n],a=o.startPTS;isNaN(a)?o.start=n>t?i.start+i.duration:Math.max(i.start-o.duration,0):n>t?(i.duration=a-i.start,i.duration<0&&r.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(o.duration=i.start-a,o.duration<0&&r.logger.warn("negative duration computed for frag "+o.sn+",level "+o.level+", there should be some duration drift between playlist and fragment!"))}};e.exports=i},function(e,t,n){"use strict";var r={toString:function(e){for(var t="",n=e.length,r=0;r<n;r++)t+="["+e.start(r).toFixed(3)+","+e.end(r).toFixed(3)+"]";return t}};e.exports=r},function(e,t,n){"use strict";function r(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new h,this.regionList=[]}function i(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function o(){this.values=Object.create(null)}function a(e,t,n,r){var i=r?e.split(r):[e];for(var o in i)if("string"==typeof i[o]){var a=i[o].split(n);if(2===a.length){var s=a[0],l=a[1];t(s,l)}}}function s(e,t,n){function r(){var t=i(e);if(null===t)throw new Error("Malformed timestamp: "+l);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function s(){e=e.replace(/^\s+/,"")}var l=e;if(s(),t.startTime=r(),s(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+l);e=e.substr(3),s(),t.endTime=r(),s(),function(e,t){var r=new o;a(e,function(e,t){switch(e){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),a=o[0];r.integer(e,a),r.percent(e,a)&&r.set("snapToLines",!1),r.alt(e,a,["auto"]),2===o.length&&r.alt("lineAlign",o[1],["start",d,"end"]);break;case"position":o=t.split(","),r.percent(e,o[0]),2===o.length&&r.alt("positionAlign",o[1],["start",d,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",d,"end","left","right"])}},/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");var i=r.get("line","auto");"auto"===i&&-1===f.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",d);var s=r.get("position","auto");"auto"===s&&50===f.position&&(s="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=s}(e,t)}function l(e){return e.replace(/<br(?: \/)?>/gi,"\n")}Object.defineProperty(t,"__esModule",{value:!0}),t.fixLineBreaks=void 0;var u=n(509),c=function(e){return e&&e.__esModule?e:{default:e}}(u),h=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};o.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var f=new c.default(0,0,0),d="middle"===f.align?"middle":"center";r.prototype={parse:function(e){function t(){var e=n.buffer,t=0;for(e=l(e);t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),r}var n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;r=t();var i=r.match(/^WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Error("Malformed WebVTT signature.");n.state="HEADER"}for(var o=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:r=t(),n.state){case"HEADER":/:/.test(r)?function(e){a(e,function(e,t){switch(e){case"Region":console.log("parse region",t)}},/:/)}(r):r||(n.state="ID");continue;case"NOTE":r||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){n.state="NOTE";break}if(!r)continue;if(n.cue=new c.default(0,0,""),n.state="CUE",-1===r.indexOf("--\x3e")){n.cue.id=r;continue}case"CUE":try{s(r,n.cue,n.regionList)}catch(e){n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var u=-1!==r.indexOf("--\x3e");if(!r||u&&(o=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=r;continue;case"BADCUE":r||(n.state="ID");continue}}}catch(e){"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return e.onflush&&e.onflush(),this}},t.fixLineBreaks=l,t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e){var t=this;this.ready(function(){new Fe(t,ge.a.mergeOptions(Ne,e)).setup()})}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e){var t=this;this.ready(function(){new He(t,ge.a.mergeOptions(Ue,e)).setup()})}function b(e){return e.charAt(0).toUpperCase()+e.slice(1)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e){var t=this;this.ready(function(){new st(t,ge.a.mergeOptions(at,e)).setup()})}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e){var t=this;this.ready(function(){new ct(t,ge.a.mergeOptions(ut,e)).setup()})}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e){var t=this;this.ready(function(){new gt(t,ge.a.mergeOptions(yt,e)).setup()})}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(){var e=ge.a.getComponent("Component"),t=ge.a.extend(e,{constructor:function(){e.apply(this,arguments)},createEl:function(){return e.prototype.createEl("div",{className:"svp-viewers vjs-control",innerHTML:'<div class="vjs-icon-visibility"></div><div class="svp-viewers-counter">0</div>',tabIndex:-1})}});ge.a.registerComponent("SvpViewers",t)}function N(e){var t=this;j(),this.ready(function(){new _t(t,ge.a.mergeOptions(bt,e)).setup()})}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e){return 32===e.which||179===e.which}function U(e){return 37===e.which||177===e.which}function H(e){return 39===e.which||176===e.which}function V(e){return 38===e.which}function G(e){return 40===e.which}function W(e){return 77===e.which}function K(e){return 70===e.which}function z(e){var t=this;this.ready(function(){new Tt(t,ge.a.mergeOptions(kt,e)).setup()})}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function J(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e){var t=this;self.videojs=ge.a,this.ready(function(){new Ft(t,ge.a.mergeOptions(Nt,e)).setup()})}function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var ye=(n(201),n(175),n(17)),ge=n.n(ye),me=n(473),be=n.n(me),_e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ee=ge.a.getComponent("Component"),ke=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return o.tech=n,o.video=n.el(),o.source=e,o.levels=null,o.sourceDuration=null,o.levelSelected=null,o.isMultibitrate=null,o.lastFragmentLoaded=null,o.recoverDecodingErrorDate=0,o.recoverSwapAudioCodecDate=0,o.firstLoad=!0,o.hasMediaError=!1,o.options=o.tech.options_.hlsjsConfig||{},o.initHls(),o}return o(t,e),_e(t,[{key:"initHls",value:function(){this.hls=new be.a(this.options),this.handleStartLoad=this.startLoad.bind(this),this.tech.on("startLoad",this.handleStartLoad),this.handleStopLoad=this.stopLoad.bind(this),this.tech.on("stopLoad",this.handleStopLoad),this.handleRedundantStreamLoad=this.redundantStreamLoad.bind(this),this.tech.on("redundantStreamLoad",this.handleRedundantStreamLoad),this.handleMetadata=this.onMetaData.bind(this),this.handleError=this.onError.bind(this),this.handleSwitchQuality=this.switchQuality.bind(this),this.handleLevelLoaded=this.levelLoaded.bind(this),this.handleQualityChange=this.qualityChange.bind(this),this.handleBufferCodecs=this.bufferCodecs.bind(this),this.handleMediaError=this.mediaError.bind(this),this.handleFragmentLoaded=this.fragmentLoaded.bind(this),this.bindEvents(),this.hls.attachMedia(this.video),this.hls.loadSource(this.source.src)}},{key:"startLoad",value:function(e,t){if(this.firstLoad)return this.hls.startLoad(!0===t.isLive?1:this.video.currentTime),void(this.firstLoad=!1);this.hls.startLoad()}},{key:"stopLoad",value:function(){this.hls.stopLoad()}},{key:"hasRedundantStreams",value:function(e){return null!==this.levels&&this.levels[e].url.length>1}},{key:"redundantStreamLoad",value:function(e,t){var n=t.lastFragmentLoaded;this.hasRedundantStreams(n.level)&&this.hls.trigger(be.a.Events.ERROR,{type:be.a.ErrorTypes.NETWORK_ERROR,details:be.a.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:n})}},{key:"warn",value:function(e){this.tech.trigger("debug",{type:"warn",message:e})}},{key:"error",value:function(e){this.tech.trigger("debug",{type:"error",message:e})}},{key:"bindEvents",value:function(){this.hls.on(be.a.Events.ERROR,this.handleError),this.hls.on(be.a.Events.MANIFEST_PARSED,this.handleMetadata),this.hls.on(be.a.Events.LEVEL_LOADED,this.handleLevelLoaded),this.hls.on(be.a.Events.LEVEL_PTS_UPDATED,this.handleQualityChange),this.hls.on(be.a.Events.BUFFER_CODECS,this.handleBufferCodecs),this.hls.on(be.a.Events.FRAG_LOADED,this.handleFragmentLoaded),this.video.addEventListener("error",this.handleMediaError)}},{key:"getCurrentTime",value:function(){return(new Date).getTime()}},{key:"isMediaError",value:function(){try{return this.video.error instanceof MediaError}catch(e){return!1}}},{key:"mediaError",value:function(){if(this.isMediaError()){var e=this.getCurrentTime();this.hasMediaError=!0,!this.recoverDecodingErrorDate||e-this.recoverDecodingErrorDate>3e3?(this.recoverDecodingErrorDate=e,this.warn("fatal media error encountered, try to recover"),this.hls.recoverMediaError()):!this.recoverSwapAudioCodecDate||e-this.recoverSwapAudioCodecDate>3e3?(this.recoverSwapAudioCodecDate=e,this.warn("try to recover media error (by swapping audio codec"),this.hls.swapAudioCodec(),this.hls.recoverMediaError()):this.error("cannot recover, last media error recovery failed ...")}}},{key:"fragmentLoaded",value:function(e,t){this.lastFragmentLoaded=t.frag}},{key:"isForbiddenErrorCode",value:function(e){var t=e.response;return void 0!==t&&403===t.code}},{key:"onError",value:function(e,t){if(t.details===be.a.ErrorDetails.LEVEL_LOAD_ERROR&&this.tech.trigger("hlsLevelLoadError",t),t.fatal)switch(t.type){case be.a.ErrorTypes.NETWORK_ERROR:this.error("fatal network error encountered, try to recover"),this.tech.trigger("hlsFatalError"),this.hls.startLoad();break;case be.a.ErrorTypes.MEDIA_ERROR:this.mediaError();break;default:this.error("HLS.js error: "+t.type+" - fatal: "+t.fatal+" - "+t.details),this.tech.trigger("hlsMediaError")}switch(t.details){case be.a.ErrorDetails.MANIFEST_LOAD_ERROR:case be.a.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case be.a.ErrorDetails.MANIFEST_PARSING_ERROR:case be.a.ErrorDetails.LEVEL_LOAD_ERROR:case be.a.ErrorDetails.LEVEL_LOAD_TIMEOUT:case be.a.ErrorDetails.LEVEL_SWITCH_ERROR:case be.a.ErrorDetails.FRAG_LOAD_ERROR:case be.a.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case be.a.ErrorDetails.FRAG_LOAD_TIMEOUT:case be.a.ErrorDetails.FRAG_PARSING_ERROR:case be.a.ErrorDetails.BUFFER_APPEND_ERROR:case be.a.ErrorDetails.BUFFER_APPENDING_ERROR:case be.a.ErrorDetails.BUFFER_STALLED_ERROR:this.warn("HLS.js error: "+t.type+" - fatal: "+t.fatal+" - "+t.details);var n=this.isForbiddenErrorCode(t);t.details===be.a.ErrorDetails.BUFFER_STALLED_ERROR||n?this.tech.trigger("hlsBufferStalled",Object.assign({lastFragmentLoaded:this.lastFragmentLoaded,forceSwitch:n},t)):t.details!==be.a.ErrorDetails.MANIFEST_PARSING_ERROR&&t.details!==be.a.ErrorDetails.FRAG_PARSING_ERROR||this.tech.trigger("hlsMediaError")}}},{key:"duration",value:function(){return this.sourceDuration||this.video.duration||0}},{key:"dispose",value:function(){this.hls.destroy(),this.tech.off("startLoad",this.handleStartLoad),this.tech.off("stopLoad",this.handleStopLoad),this.tech.off("redundantStreamLoad",this.handleRedundantStreamLoad),this.video.removeEventListener("error",this.handleMediaError),this.hasMediaError&&this.tech.trigger("hlsMediaError"),delete this.hls,delete this.options,delete this.video,delete this.source,delete this.tech.hlsProvider,delete this.tech}},{key:"levelLoaded",value:function(e,t){this.sourceDuration=t.details.live?1/0:t.details.totalduration,this.qualityChange(e,t)}},{key:"qualityChange",value:function(e,t){var n=t.level===this.levelSelected;this.isMultibitrate&&!n&&(this.levelSelected=t.level,this.tech.trigger("qualityChange",t.level))}},{key:"onMetaData",value:function(e,t){var n=this,r=[],i=t.levels;this.tech.trigger("hlsOnReady"),i.length>1&&(this.isMultibitrate=!0,r.push({id:-1,label:"auto",selected:-1===this.hls.manualLevel})),i.forEach(function(e,t){r.push({id:t,selected:t===n.hls.manualLevel,label:n.levelLabel(e)})}),this.levels=i,this.tech.trigger("loadedQualityData",{qualityData:{video:r},qualitySwitchCallback:this.handleSwitchQuality})}},{key:"bufferCodecs",value:function(e,t){this.tech.trigger("hlsOnTracks",{hasVideo:void 0!==t.video,hasAudio:void 0!==t.audio})}},{key:"levelLabel",value:function(e){return e.height?e.height+"p":e.width?Math.round(9*e.width/16)+"p":e.bitrate?e.bitrate/1e3+"kbps":0}},{key:"switchQuality",value:function(e){if(this.hls.nextLevel===e)return void this.tech.trigger("qualityChange",e);-1===e&&this.tech.trigger("qualityChange",this.hls.nextLevel),this.hls.currentLevel=e}}]),t}(Ee);ge.a.getComponent("Html5").registerSourceHandler({canHandleSource:function(e){var t="",n=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,r=/\.m3u8/i;return n.test(e.type)?t="probably":r.test(e.src)&&(t="maybe"),t&&be.a.isSupported()},handleSource:function(e,t){return t.hlsProvider&&t.hlsProvider.dispose(),t.hlsProvider=new ke(e,t),t.hlsProvider}},0);var Te=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),we=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},Se=ge.a.getComponent("Menu"),Ce=function(e){function t(e,n){a(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.focusedChild_=-1,r.on("keydown",r.handleKeyPress),r}return l(t,e),Te(t,[{key:"addItem",value:function(e,n){var r=this;we(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addChild",this).call(this,e,{},n),e.on("click",function(){r.unlockShowing()})}},{key:"removeSelected",value:function(e){for(var t=this.children(),n=0;n<t.length;n++){var r=t[n];e!==r&&r.selected(!1)}}},{key:"getSelected",value:function(){for(var e=this.children(),t=0;t<e.length;t++){var n=e[t];if(n.hasClass("vjs-selected"))return n}return null}}]),t}(Se);ge.a.registerComponent("QualityMenu",Ce);var Oe=Ce,Pe=(n(98),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Re=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},Le=ge.a.getComponent("MenuItem"),Ae=function(e){function t(e,n,r){u(this,t);var i=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.qualityButton=r,i.qualityMenu=i.qualityButton.qualityMenu,i}return h(t,e),Pe(t,[{key:"createEl",value:function(e,n,r){return Re(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"li",Object.assign({className:"vjs-menu-item",innerHTML:this.localize(this.options_.label),tabIndex:-1},n),r)}},{key:"update",value:function(){this.qualityButton.menuButton.hideDialog()}},{key:"handleClick",value:function(e){var t=this.qualityButton.menuItem;if(!this.hasClass("vjs-selected")){var n=this.options_,r=t.settingsSubMenuValueEl_,i=n.label;this.qualityMenu.removeSelected(),this.selected(!0),r.innerHTML=i,this.qualityButton.label=i,n.qualitySwitchCallback(n.id,n.trackType)}t.update=this.update.bind(this,e)}}]),t}(Le),xe=Ae,De=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ie=ge.a.getComponent("MenuButton"),Me=function(e){function t(e,n,r,i){f(this,t);var o=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.menuItem=i,o.menuButton=r,o.tech=e.tech_,o.staticLabel=document.createElement("span"),o.controlText("Quality"),o.addClass("vjs-resolution-switcher"),o.qualityMenu=null,ge.a.addClass(o.staticLabel,"vjs-resolution-button-label"),o.el().appendChild(o.staticLabel),o.tech.on("qualityChange",o.onQualityChange.bind(o)),o}return p(t,e),De(t,[{key:"onQualityChange",value:function(e,t){var n=this.menu.getSelected(),r=this.options_.qualityList,i=r.length,o=n.options_.label;if("auto"!==o)return void this.setLabel(o,!1);for(var a=0;a<i;a++){var s=r[a];"auto"!==s.label&&s.id===t&&this.setLabel(s.label,!0)}}},{key:"createMenu",value:function(){var e=this.options_,t=Object.assign({},e,{name:"videoPickerMenu"});this.qualityMenu=new Oe(this.player,t);for(var n=0;n<e.qualityList.length;n++){var r=e.qualityList[n],i=e.qualitySwitchCallback,o=e.trackType,a=Object.assign({qualitySwitchCallback:i,trackType:o},r,{selectable:!0}),s=new xe(this.player,a,this);this.qualityMenu.addItem(s,0)}return this.qualityMenu}},{key:"setLabel",value:function(e,t){parseInt(e,10)>=720?this.menuButton.addClass("vjs-hd"):this.menuButton.removeClass("vjs-hd"),this.menuItem.settingsSubMenuValueEl_.innerHTML=t?'<span class="vjs-quality-auto">auto</span>'+e:e}}]),t}(Ie);ge.a.registerComponent("QualityPickerButton",Me);var je=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ne={},Fe=function(){function e(t,n){v(this,e),this.player=t,this.options=n}return je(e,[{key:"setup",value:function(){this.player.addClass("vjs-quality-switch"),this.player.tech_.on("loadedQualityData",this.onQualityData.bind(this))}},{key:"onQualityData",value:function(e,t){var n=t.qualityData,r=t.qualitySwitchCallback,i="QualityPickerButton";this.player.controlBar.settingsButton.menu.getChild(i)&&this.player.trigger("disposesettingsitem",i),1!==n.video.length&&this.player.trigger("addsettingsitem",[i,{name:i,qualityList:n.video,qualitySwitchCallback:r,trackType:"video"}])}}]),e}();ge.a.plugin("qualitySwitch",y);var Be=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ue={debug:!1},He=function(){function e(t,n){g(this,e),this.player=t,this.options=n}return Be(e,[{key:"setup",value:function(){if(this.tech=this.player.tech_,this.video=this.tech.el_,this.element=this.player.el_,this.techOptions=this.tech.options_,this.player.controlBar){var e=this.player.controlBar;this.liveLabel=e.liveDisplay.contentEl_,this.volumeMenuButton=e.volumeMenuButton}this.levelLoadingMaxRetry=0,this.isReconnecting=!1,this.reconnectEl=null,this.offlineEl=null,this.offlineTextHolder=null,this.offlineTextH2=null,this.offlineTextH3=null,this.errorCounter=1,this.timer=null,this.counter=0,this.bufferTimer=null,this.bufferCounter=0,this.eventHandlers(),this.bindEvents()}},{key:"eventHandlers",value:function(){this.handleOnReady=this.onReady.bind(this),this.handleSetFatalError=this.setFatalError.bind(this),this.handleTrackLevelError=this.trackLevelError.bind(this),this.handleGoOffline=this.goOffline.bind(this),this.handleOfflineStreamUp=this.offlineStreamUp.bind(this),this.handleStartLoad=this.startLoad.bind(this),this.handleStopLoad=this.stopLoad.bind(this),this.handleOnLoadStart=this.onLoadStart.bind(this),this.handleCheckDuration=this.checkDuration.bind(this),this.handleBufferStalled=this.bufferStalled.bind(this),this.handleOnTracks=this.onTracks.bind(this),this.handleOnMediaError=this.onMediaError.bind(this),this.handleOnDebug=this.onDebug.bind(this),this.handleOnDispose=this.onDispose.bind(this)}},{key:"bindEvents",value:function(){this.tech.on("hlsOnReady",this.handleOnReady),this.tech.on("hlsFatalError",this.handleSetFatalError),this.tech.on("hlsLevelLoadError",this.handleTrackLevelError),this.tech.on("hlsBufferStalled",this.handleBufferStalled),this.tech.on("hlsOnTracks",this.handleOnTracks),this.tech.on("hlsMediaError",this.handleOnMediaError),this.tech.on("debug",this.handleOnDebug),this.player.on("goOffline",this.handleGoOffline),this.player.on("offlineStreamUp",this.handleOfflineStreamUp),this.player.on("hlsStartLoad",this.handleStartLoad),this.player.on("hlsStopLoad",this.handleStopLoad),this.player.on("dispose",this.handleOnDispose),this.tech.on("loadstart",this.handleOnLoadStart),this.player.on("durationchange",this.handleCheckDuration)}},{key:"checkDuration",value:function(){this.player.duration()!==1/0&&this.player.bigPlayButton.show()}},{key:"trackLevelError",value:function(e,t){var n=this.errorCounter>=this.levelLoadingMaxRetry;if(!0===t.fatal||n)return this.debug(this.errorCounter+" level is fatal"),this.setFatalError(e,t),void(this.errorCounter=1);this.errorCounter++}},{key:"clearTimer",value:function(){null!==this.timer&&(clearInterval(this.timer),this.timer=null,this.counter=0)}},{key:"onDispose",value:function(){this.clearTimer(),this.cleanBuffering(),null!==this.offlineEl&&(this.offlineTextHolder.removeChild(this.offlineTextH2),this.offlineTextHolder.removeChild(this.offlineTextH3),this.destroyCountDown(),this.offlineEl.removeChild(this.offlineTextHolder),this.element.removeChild(this.offlineEl),this.offlineEl=null,this.offlineTextHolder=null,this.offlineTextH2=null,this.offlineTextH3=null),null!==this.reconnectEl&&(this.element.removeChild(this.reconnectEl),this.reconnectEl=null),delete this.tech,delete this.video,delete this.element,delete this.techOptions,delete this.player,delete this.options}},{key:"onReady",value:function(){this.player.trigger("hls-ready")}},{key:"onTracks",value:function(e,t){t.hasAudio?this.showVolume():this.hideVolume()}},{key:"onMediaError",value:function(){this.debug("media error"),this.reconnect(!0),this.player.trigger("hls-media-error")}},{key:"onDebug",value:function(e,t){this.player.trigger(e.type,t)}},{key:"cleanBuffering",value:function(){null!==this.bufferTimer&&(this.debug("clean buffering timer"),clearInterval(this.bufferTimer),this.bufferTimer=null,this.bufferCounter=0)}},{key:"redundantStreamLoad",value:function(e){null!==e&&(this.debug("redundant stream load"),this.tech.trigger("redundantStreamLoad",{lastFragmentLoaded:e}))}},{key:"bufferStalled",value:function(e,t){var n=this;if(t.forceSwitch)return void this.redundantStreamLoad(t.lastFragmentLoaded);this.cleanBuffering(),this.bufferTimer=setInterval(function(){if(n.isBuffered(n.video.currentTime))return n.debug("timer clean buffering"),void n.cleanBuffering();n.bufferCounter++,5===n.bufferCounter?n.reconnect():n.bufferCounter%15==0&&n.redundantStreamLoad(t.lastFragmentLoaded)},1e3)}},{key:"stopLoad",value:function(){this.debug("stopLoad"),this.tech.trigger("stopLoad")}},{key:"hideVolume",value:function(){this.volumeMenuButton&&(this.volumeMenuButton.hide(),this.player.addClass("vjs-svp-no-audio"))}},{key:"showVolume",value:function(){this.volumeMenuButton&&(this.volumeMenuButton.show(),this.player.removeClass("vjs-svp-no-audio"))}},{key:"resetState",value:function(){this.debug("reset state"),this.showVolume()}},{key:"startLoad",value:function(e,t){this.debug("startLoad"),this.tech.trigger("startLoad",t)}},{key:"isBuffered",value:function(e){for(var t=this.video.buffered,n=0;n<t.length;n++)if(e>=t.start(n)&&e+.8<=t.end(n))return!0;return!1}},{key:"debug",value:function(e){this.player.trigger("debug",{type:"log",message:e})}},{key:"setFatalError",value:function(){this.reconnect()}},{key:"onLoadStart",value:function(){this.debug("onLoadStart"),this.levelLoadingMaxRetry=this.techOptions.hlsjsConfig.levelLoadingMaxRetry,this.resetState()}},{key:"zeroFill",value:function(e){return(e<10?"0":"")+e}},{key:"buildCountDownSlot",value:function(e){var t=document.createElement("span");return t.classList.add("vjs-count-down-slot"),t.innerHTML='\n\t\t\t<span class="vjs-count-down-card-holder">\n\t\t\t\t<b class="vjs-count-down-card"></b>\n\t\t\t\t<b class="vjs-count-down-card-bottom"></b>\n\t\t\t\t<b class="vjs-count-down-card-back"></b>\n\t\t\t\t<b class="vjs-count-down-card-back-bottom"></b>\n\t\t\t</span>\n\t\t\t<span class="vjs-count-down-label">'+e+"</span>\n\t\t",t}},{key:"buildCountDown",value:function(){this.countDownDaysHolder=this.buildCountDownSlot("Days"),this.countDownHoursHolder=this.buildCountDownSlot("Hours"),this.countDownMinutesHolder=this.buildCountDownSlot("Minutes"),this.countDownSecondsHolder=this.buildCountDownSlot("Seconds"),this.countDownHolder=document.createElement("div"),this.countDownHolder.classList.add("vjs-count-down"),this.countDownHolder.appendChild(this.countDownDaysHolder),this.countDownHolder.appendChild(this.countDownHoursHolder),this.countDownHolder.appendChild(this.countDownMinutesHolder),this.countDownHolder.appendChild(this.countDownSecondsHolder),this.offlineTextHolder.appendChild(this.countDownHolder)}},{key:"destroyCountDown",value:function(){void 0!==this.countDownHolder&&(this.offlineTextHolder.removeChild(this.countDownHolder),delete this.countDownDays,delete this.countDownHours,delete this.countDownMinutes,delete this.countDownSeconds,delete this.countDownDaysHolder,delete this.countDownHoursHolder,delete this.countDownMinutesHolder,delete this.countDownSecondsHolder,delete this.countDownHolder,void 0!==this.countDownInterval&&(clearInterval(this.countDownInterval),delete this.countDownInterval))}},{key:"updateCountDownSlot",value:function(e,t,n,r){if(e.querySelector(".vjs-count-down-card").innerHTML=this.zeroFill(n),e.querySelector(".vjs-count-down-card-bottom").setAttribute("data-value",this.zeroFill(n)),e.querySelector(".vjs-count-down-card-back").setAttribute("data-value",this.zeroFill(t)),e.querySelector(".vjs-count-down-card-back-bottom").setAttribute("data-value",this.zeroFill(t)),!1===r)return 0;e.classList.remove("vjs-count-down-flip");var i=e.offsetWidth;return e.classList.add("vjs-count-down-flip"),i}},{key:"updateCountDown",value:function(e){if(!1!==e&&--this.countDownRemaining<0)return clearInterval(this.countDownInterval),void delete this.countDownInterval;var t=Math.floor(this.countDownRemaining/86400),n=Math.floor(this.countDownRemaining/3600%24),r=Math.floor(this.countDownRemaining/60%60),i=Math.floor(this.countDownRemaining%60);t!==this.countDownDays&&(this.updateCountDownSlot(this.countDownDaysHolder,this.countDownDays,t,e),this.countDownDays=t),n!==this.countDownHours&&(this.updateCountDownSlot(this.countDownHoursHolder,this.countDownHours,n,e),this.countDownHours=n),r!==this.countDownMinutes&&(this.updateCountDownSlot(this.countDownMinutesHolder,this.countDownMinutes,r,e),this.countDownMinutes=r),i!==this.countDownSeconds&&(this.updateCountDownSlot(this.countDownSecondsHolder,this.countDownSeconds,i,e),this.countDownSeconds=i)}},{key:"buildOfflineEl",value:function(){this.offlineTextHolder=document.createElement("div"),this.offlineTextHolder.classList.add("vjs-text-holder"),this.offlineTextH2=document.createElement("h2"),this.offlineTextH3=document.createElement("h3"),this.offlineEl=document.createElement("div"),this.offlineEl.classList.add("vjs-offline-holder"),this.offlineTextHolder.appendChild(this.offlineTextH2),this.offlineTextHolder.appendChild(this.offlineTextH3),this.offlineEl.appendChild(this.offlineTextHolder),this.element.appendChild(this.offlineEl)}},{key:"removeOfflineClasses",value:function(){this.player.removeClass("vjs-offline-holder--heading"),this.player.removeClass("vjs-offline-holder--text"),this.player.removeClass("vjs-offline")}},{key:"setLiveLabel",value:function(e){this.liveLabel&&(this.liveLabel.innerHTML='<span class="vjs-control-text">Stream Type</span>'+e)}},{key:"goOffline",value:function(e,t){null===this.offlineEl&&this.buildOfflineEl(),""===t.image?this.offlineEl.classList.add("vjs-offline-holder--blank"):this.offlineEl.classList.remove("vjs-offline-holder--blank"),""!==t.heading?(this.offlineTextH2.innerHTML=t.heading,this.player.addClass("vjs-offline-holder--heading")):(this.offlineTextH2.innerHTML="",this.player.removeClass("vjs-offline-holder--heading")),""!==t.text?(this.offlineTextH3.innerHTML=t.text,this.player.addClass("vjs-offline-holder--text")):(this.offlineTextH3.innerHTML="",this.player.removeClass("vjs-offline-holder--text"));var n=t.countDownSeconds;void 0!==n&&n>0?(this.countDownRemaining=n,void 0===this.countDownHolder&&(this.buildCountDown(),this.updateCountDown(!1),this.countDownInterval=setInterval(this.updateCountDown.bind(this),1e3))):this.destroyCountDown(),this.setLiveLabel("OFFLINE"),this.player.addClass("vjs-offline"),this.player.removeClass("vjs-seeking"),this.player.hasStarted(!1),this.player.bigPlayButton.hide(),this.isReconnecting&&this.removeReconnect()}},{key:"offlineStreamUp",value:function(){this.exitOffline(),this.player.bigPlayButton.show()}},{key:"exitOffline",value:function(){this.debug("exitOffline"),this.removeOfflineClasses(),this.setLiveLabel("LIVE"),this.destroyCountDown()}},{key:"removeReconnect",value:function(){this.debug("remove reconnect"),this.clearTimer(),this.isReconnecting=!1,this.reconnectEl&&(this.player.removeClass("vjs-force-waiting"),this.reconnectEl.className="vjs-reconnect vjs-hidden")}},{key:"reconnect",value:function(e){var t=this;this.isReconnecting||(this.debug("reconnect"),this.player.addClass("vjs-force-waiting"),null===this.reconnectEl&&(this.reconnectEl=document.createElement("div"),e&&(this.reconnectEl.textContent="Reconnecting ..."),this.element.appendChild(this.reconnectEl)),this.reconnectEl.className="vjs-reconnect",this.timer=setInterval(function(){if(t.isBuffered(t.video.currentTime))return t.debug("timer remove reconnect"),void t.removeReconnect();++t.counter%20==0&&t.player.trigger("reconnect")},1e3),this.isReconnecting=!0)}}]),e}();ge.a.plugin("hlsStateManager",m);var Ve=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ge=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),We=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},Ke=ge.a.getComponent("MenuItem"),ze=ge.a.getComponent("Component"),Xe=function(e){function t(e,n,r,i){_(this,t);var o=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));o.settingsButton=i,o.dialog=o.settingsButton.dialog,o.mainMenu=o.settingsButton.menu,o.panel=o.dialog.getChild("settingsPanel"),o.panelChild=o.panel.getChild("settingsPanelChild"),o.panelChildEl=o.panelChild.el_,o.timeoutSubMenu=null,o.timeoutClick=null,o.timeoutMainMenu=null,o.size=null,o.menuToLoad="mainmenu";var a=b(r),s=ge.a.getComponent(a);if(!s)throw new Error("Component "+a+" does not exist");return o.subMenu=new s(o.player(),n,i,o),o.eventHandlers(),e.ready(function(){o.build(),o.reset()}),o}return k(t,e),Ge(t,[{key:"dispose",value:function(){clearTimeout(this.timeoutSubMenu),this.timeoutSubMenu=null,clearTimeout(this.timeoutClick),this.timeoutClick=null,clearTimeout(this.timeoutMainMenu),this.timeoutMainMenu=null,We(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"eventHandlers",value:function(){this.submenuClickHandler=this.onSubmenuClick.bind(this),this.transitionEndHandler=this.onTransitionEnd.bind(this)}},{key:"onSubmenuClick",value:function(e){var t=this;if(("tap"===e.type?e.target:e.currentTarget).classList.contains("vjs-back-button"))return void this.loadMainMenu();this.timeoutSubMenu=setTimeout(function(){t.timeoutSubMenu=null,t.update(e)},0)}},{key:"createEl",value:function(){var e=ge.a.createEl("li",{className:"vjs-menu-item"});return this.settingsSubMenuTitleEl_=ge.a.createEl("div",{className:"vjs-settings-sub-menu-title"}),e.appendChild(this.settingsSubMenuTitleEl_),this.settingsSubMenuValueEl_=ge.a.createEl("div",{className:"vjs-settings-sub-menu-value"}),e.appendChild(this.settingsSubMenuValueEl_),this.settingsSubMenuEl_=ge.a.createEl("div",{className:"vjs-settings-sub-menu"}),e}},{key:"handleClick",value:function(){var e=this;this.menuToLoad="submenu",ge.a.removeClass(this.el_,"open"),We(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleClick",this).call(this),this.mainMenu.el_.style.opacity="0",ge.a.hasClass(this.settingsSubMenuEl_,"vjs-hidden")?(ge.a.removeClass(this.settingsSubMenuEl_,"vjs-hidden"),this.timeoutClick=setTimeout(function(){e.timeoutClick=null,e.settingsSubMenuEl_.style.opacity="1",e.settingsSubMenuEl_.style.marginRight="0px"},0),this.settingsButton.setDialogSize(this.size)):ge.a.addClass(this.settingsSubMenuEl_,"vjs-hidden")}},{key:"createBackButton",value:function(){var e=this.subMenu.menu.addChild("MenuItem",{},0);e.name_="BackButton",e.addClass("vjs-back-button"),e.el_.innerHTML='Back to menu<span class="vjs-control-text">Back</span>',e.el_.innerText="Back to menu"}},{key:"prefixedEvent",value:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"addEvent",i=["webkit","moz","MS","o",""],o=0;o<i.length;o++)i[o]||(t=t.toLowerCase()),"addEvent"===r?e.addEventListener(i[o]+t,n,!1):"removeEvent"===r&&e.removeEventListener(i[o]+t,n,!1)}},{key:"onTransitionEnd",value:function(e){"margin-right"===e.propertyName&&"mainmenu"===this.menuToLoad&&(ge.a.addClass(this.settingsSubMenuEl_,"vjs-hidden"),this.settingsSubMenuEl_.style.opacity="0")}},{key:"reset",value:function(){ge.a.addClass(this.settingsSubMenuEl_,"vjs-hidden"),this.settingsSubMenuEl_.style.opacity="0",this.setMargin()}},{key:"loadMainMenu",value:function(){var e=this;this.menuToLoad="mainmenu",this.mainMenu.show(),this.mainMenu.el_.style.opacity="0",this.settingsButton.setDialogSize([this.mainMenu.width,this.mainMenu.height]),this.timeoutMainMenu=setTimeout(function(){e.timeoutMainMenu=null,e.setMargin(),e.mainMenu.el_.style.opacity="1"},0)}},{key:"getSubMenuControlText",value:function(){switch(this.subMenu.name()){case"PlaybackRateMenuButton":return"Playback speed:";case"SubtitlesButton":case"CaptionsButton":return"Subtitles:";default:return this.subMenu.controlText_+":"}}},{key:"build",value:function(){this.settingsSubMenuTitleEl_.innerHTML=this.getSubMenuControlText(),this.settingsSubMenuEl_.appendChild(this.subMenu.menu.el_),this.panelChildEl.appendChild(this.settingsSubMenuEl_),this.update(),this.createBackButton(),this.getSize(),this.bindClickEvents(),this.prefixedEvent(this.settingsSubMenuEl_,"TransitionEnd",this.transitionEndHandler,"addEvent")}},{key:"update",value:function(e){var t=this.subMenu.name(),n=null;if(e&&"tap"===e.type?n=e.target:e&&(n=e.currentTarget),"PlaybackRateMenuButton"===t)this.settingsSubMenuValueEl_.innerHTML=this.subMenu.labelEl_.innerHTML;else{var r=!0,i=!1,o=void 0;try{for(var a,s=this.subMenu.menu.children_[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(l instanceof ze)switch(t){case"SubtitlesButton":case"CaptionsButton":l.hasClass("vjs-selected")&&(this.settingsSubMenuValueEl_.innerHTML=l.options_.label);break;default:(l.options_.selected||l.hasClass("vjs-selected"))&&(this.settingsSubMenuValueEl_.innerHTML=l.options_.label)}}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}n&&!n.classList.contains("vjs-back-button")&&this.settingsButton.hideDialog()}},{key:"bindClickEvents",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.subMenu.menu.children()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;o instanceof ze&&o.on(["tap","click"],this.submenuClickHandler)}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}},{key:"getSize",value:function(){this.dialog.removeClass("vjs-hidden"),this.settingsSubMenuEl_.classList.remove("vjs-hidden"),this.size=this.settingsButton.getComponentSize(this.settingsSubMenuEl_),this.settingsSubMenuEl_.classList.add("vjs-hidden"),this.setMargin(),this.dialog.addClass("vjs-hidden"),ge.a.addClass(this.settingsSubMenuEl_,"vjs-hidden")}},{key:"setMargin",value:function(){if(null!==this.size){var e=Ve(this.size,1),t=e[0];this.settingsSubMenuEl_.style.marginRight="-"+t+"px"}}},{key:"hideSubMenu",value:function(){this.el_&&ge.a.hasClass(this.el_,"open")&&(ge.a.addClass(this.settingsSubMenuEl_,"vjs-hidden"),ge.a.removeClass(this.el_,"open"))}}]),t}(Ke);Xe.prototype.contentElType="button",ge.a.registerComponent("SettingsMenuItem",Xe);var qe=Xe,Ye=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),$e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Qe=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},Je=ge.a.getComponent("Button"),Ze=ge.a.getComponent("Menu"),et=ge.a.getComponent("Component"),tt=function(e){function t(e,n){T(this,t);var r=w(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.playerComponent=e,r.dialog=r.playerComponent.addChild("settingsDialog"),r.dialogEl=r.dialog.el_,r.menu=null,r.panel=r.dialog.addChild("settingsPanel"),r.panelChild=r.panel.addChild("settingsPanelChild"),r.addClass("vjs-settings"),r.el_.setAttribute("aria-label","Settings Button"),r.addSettingsItemHandler=r.onAddSettingsItem.bind(r),r.disposeSettingsItemHandler=r.onDisposeSettingsItem.bind(r),r.playerClickHandler=r.onPlayerClick.bind(r),r.userInactiveHandler=r.onUserInactive.bind(r),r.buildMenu(),r.bindEvents(),r}return S(t,e),$e(t,[{key:"onPlayerClick",value:function(e){e.target.classList.contains("vjs-settings")||this.dialog.hasClass("vjs-hidden")||this.hideDialog()}},{key:"onDisposeSettingsItem",value:function(e,t){if(void 0===t){for(var n=this.menu.children();n.length>0;)n[0].dispose(),this.menu.removeChild(n[0]);this.addClass("vjs-hidden")}else{var r=this.menu.getChild(t);r&&(r.dispose(),this.menu.removeChild(r))}this.hideDialog(),0===this.menu.children().length&&this.addClass("vjs-hidden")}},{key:"onAddSettingsItem",value:function(e,t){var n=Ye(t,2),r=n[0],i=n[1];this.addMenuItem(r,i),this.removeClass("vjs-hidden")}},{key:"onUserInactive",value:function(){this.dialog.hasClass("vjs-hidden")||this.hideDialog()}},{key:"bindEvents",value:function(){this.playerComponent.on("click",this.playerClickHandler),this.playerComponent.on("addsettingsitem",this.addSettingsItemHandler),this.playerComponent.on("disposesettingsitem",this.disposeSettingsItemHandler),this.playerComponent.on("userinactive",this.userInactiveHandler)}},{key:"buildCSSClass",value:function(){return"vjs-icon-cog "+Qe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildCSSClass",this).call(this)}},{key:"handleClick",value:function(){this.dialog.hasClass("vjs-hidden")?this.showDialog():this.hideDialog()}},{key:"showDialog",value:function(){this.menu.el_.style.opacity="1",this.dialog.show(),this.setDialogSize(this.getComponentSize(this.menu))}},{key:"hideDialog",value:function(){this.dialog.hide(),this.setDialogSize(this.getComponentSize(this.menu)),this.menu.el_.style.opacity="1",this.resetChildren()}},{key:"getComponentSize",value:function(e){if(e instanceof et){var t=e.el_.offsetWidth,n=e.el_.offsetHeight;return e.width=t,e.height=n,[t,n]}return[e.offsetWidth,e.offsetHeight]}},{key:"setDialogSize",value:function(e){var t=Ye(e,2),n=t[0],r=t[1];if("number"==typeof r){var i=this.options_.setup.maxHeightOffset,o=this.playerComponent.el_.offsetHeight-i;r>o?(r=o,n+=17,this.panel.el_.style.maxHeight=r+"px"):""!==this.panel.el_.style.maxHeight&&(this.panel.el_.style.maxHeight=""),this.dialogEl.style.width=n+"px",this.dialogEl.style.height=r+"px"}}},{key:"buildMenu",value:function(){this.menu=new Ze(this.player()),this.menu.addClass("vjs-main-menu");var e=this.options_.entries;if(0===e.length)return this.addClass("vjs-hidden"),void this.panelChild.addChild(this.menu);var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;this.addMenuItem(a,this.options_)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}this.panelChild.addChild(this.menu)}},{key:"addMenuItem",value:function(e,t){var n=this;t.name=b(e);var r=new qe(this.player(),t,e,this);this.menu.addChild(r),r.on("click",ge.a.bind(this,this.hideChildren)),r.on("click",function(){ge.a.hasClass(n.el_,"open")?ge.a.removeClass(n.el_,"open"):ge.a.addClass(n.el_,"open")})}},{key:"resetChildren",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.menu.children()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.reset()}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}},{key:"hideChildren",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.menu.children()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.hideSubMenu()}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}}]),t}(Je),nt=function(e){function t(e,n){return T(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return S(t,e),$e(t,[{key:"createEl",value:function(){return Qe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"vjs-settings-panel",innerHTML:"",tabIndex:-1})}}]),t}(et),rt=function(e){function t(e,n){return T(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return S(t,e),$e(t,[{key:"createEl",value:function(){return Qe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"vjs-settings-panel-child",innerHTML:"",tabIndex:-1})}}]),t}(et),it=function(e){function t(e,n){T(this,t);var r=w(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.hide(),r}return S(t,e),$e(t,[{key:"createEl",value:function(){var e=this.id_,n="TTSettingsDialogLabel-"+e,r="TTSettingsDialogDescription-"+e;return Qe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"vjs-settings-dialog vjs-modal-overlay",innerHTML:"",tabIndex:-1},{role:"dialog","aria-labelledby":n,"aria-describedby":r})}}]),t}(et);tt.prototype.controlText_="Settings Button",et.registerComponent("SettingsButton",tt),et.registerComponent("SettingsDialog",it),et.registerComponent("SettingsPanel",nt),et.registerComponent("SettingsPanelChild",rt);var ot=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),at={type:"image",content:"",destination:"",target:"_blank",positionVertical:"bottom",positionHorizontal:"right"},st=function(){function e(t,n){C(this,e),this.player=t,this.options=n}return ot(e,[{key:"dispose",value:function(){delete this.options,delete this.player}},{key:"setup",value:function(){var e=this;this.player.on("dispose",function(){return e.dispose()}),this.player.on("setBrand",function(t,n){return e.setBranding(n)})}},{key:"setBranding",value:function(e){this.options=ge.a.mergeOptions(this.options,e),this.setPosition(),this.buildLink()}},{key:"setPosition",value:function(){var e="bottom"!==this.options.positionVertical,t="right"!==this.options.positionHorizontal;this.player.el().classList.remove(e?"svp-brand-vpos-bottom":"svp-brand-vpos-top"),this.player.el().classList.remove(t?"svp-brand-hpos-right":"svp-brand-hpos-left"),this.player.el().classList.add(e?"svp-brand-vpos-top":"svp-brand-vpos-bottom"),this.player.el().classList.add(t?"svp-brand-hpos-left":"svp-brand-hpos-right")}},{key:"removeOldBrand",value:function(e){var t=this.player.el().querySelector("."+e);null!==t&&t.parentNode.removeChild(t)}},{key:"buildLink",value:function(){var e=this.options.content,t=document.createElement("a");if(this.removeOldBrand("svp-brand-destination"),e&&e.trim()){if(t.className="svp-brand-destination",t.href=this.options.destination,t.target=this.options.target,"text"===this.options.type)t.className+=" svp-brand-text",t.textContent=e;else{var n=document.createElement("img");n.className="svp-brand-img",n.src=e,t.appendChild(n)}this.player.el().appendChild(t)}}}]),e}();ge.a.plugin("svpBrand",O);var lt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ut={show:!1,positionVertical:"top",positionHorizontal:"right"},ct=function(){function e(t,n){P(this,e),this.player=t,this.options=n,this.button=null}return lt(e,[{key:"dispose",value:function(){this.player.off("dispose",this.onDispose),this.player.off("close-button-show",this.onShow),this.player.off("close-button-hide",this.onHide),this.button.removeEventListener("click",this.onClick),this.button.removeEventListener("touchend",this.onClick),this.button.parentNode.removeChild(this.button),delete this.button,delete this.options,delete this.player}},{key:"setup",value:function(){this.buildButton(),this.onDispose=this.dispose.bind(this),this.onShow=this.show.bind(this),this.onHide=this.hide.bind(this),this.onClick=this.handleClick.bind(this),this.player.on("dispose",this.onDispose),this.player.on("close-button-show",this.onShow),this.player.on("close-button-hide",this.onHide),this.button.addEventListener("click",this.onClick),this.button.addEventListener("touchend",this.onClick)}},{key:"buildButton",value:function(){this.button=document.createElement("div"),this.button.className="svp-close-button glyph",this.options.show?this.show():this.hide(),this.player.el().appendChild(this.button)}},{key:"handleClick",value:function(){this.player.trigger("close-button-click")}},{key:"hide",value:function(){this.player.removeClass("svp-close-active")}},{key:"show",value:function(){this.player.addClass("svp-close-active")}}]),e}();ge.a.plugin("closeButton",R);var ht=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ft=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},dt=ge.a.getComponent("Button"),pt=function(e){function t(e,n){L(this,t);var r=A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.player=e,r.options=n.playerOptions,r.wrapper=null,r.inputUrl=null,r.copyButton=null,r.button=null,r.buttonClose=null,r.init(),r}return x(t,e),ht(t,[{key:"init",value:function(){this.el().classList.add("vjs-icon-share"),this.addClass("svp-share-button"),this.buildShareHolder(),this.buildInputHolder(),this.setHandlers(),this.copyButton=document.querySelector("#copyButton"),this.player.ready(this.onPlayerReadyHandler)}},{key:"clean",value:function(){delete this.player,delete this.options,this.el(),delete this.buttonClose,delete this.copyButton,delete this.button}},{key:"dispose",value:function(){this.unbindEvents(),this.clean(),ft(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"onPlayerReady",value:function(){this.bindEvents()}},{key:"bindEvents",value:function(){this.onShow=this.show.bind(this),this.onHide=this.hide.bind(this),this.onCopyUrlCode=this.copyUrlCode.bind(this),this.onPlayerVideoChange=this.playerVideoChange.bind(this),this.el().addEventListener("click",this.onShow),this.el().addEventListener("touchend",this.onShow),this.copyButton.addEventListener("click",this.onCopyUrlCode),this.copyButton.addEventListener("touchend",this.onCopyUrlCode),this.buttonClose.addEventListener("click",this.onHide),this.buttonClose.addEventListener("touchend",this.onHide),this.player.on("video:change",this.onPlayerVideoChange)}},{key:"unbindEvents",value:function(){this.el().removeEventListener("click",this.onShow),this.el().removeEventListener("touchend",this.onShow),this.buttonClose.removeEventListener("click",this.onHide),this.buttonClose.removeEventListener("touchend",this.onHide),this.copyButton.removeEventListener("click",this.onCopyUrlCode),this.copyButton.removeEventListener("touchend",this.onCopyUrlCode),this.player.off("video:change",this.onPlayerVideoChange)}},{key:"setHandlers",value:function(){this.onPlayerReadyHandler=this.onPlayerReady.bind(this)}},{key:"playerVideoChange",value:function(e,t){this.buildSharableLink(t)}},{key:"buildShareHolder",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="svp-share-holder svp-vjs-hidden",this.player.el().appendChild(this.wrapper),this.closeButton()}},{key:"closeButton",value:function(){this.buttonClose=document.createElement("button"),this.buttonClose.textContent="X",this.buttonClose.className="svp-close-share",this.wrapper.appendChild(this.buttonClose)}},{key:"buildInputHolder",value:function(){var e=this.options.plugins.svpColors.base;this.inputUrl=document.createElement("div"),this.inputUrl.className="embedInput",this.inputUrl.innerHTML='\n\t\t\t<div class="svp-inner">\n\t\t\t\t<div class="share-title" style="color:'+e+'">Shareable Link</div>\n\t\t\t\t<input type="text" id="embedInput" value="video url" readonly>\n\t\t\t\t<button class="copy-embed" id="copyButton" style="background-color:'+e+'">Copy</button>\n\t\t\t</div>\n\t\t',this.wrapper.appendChild(this.inputUrl)}},{key:"copyUrlCode",value:function(){var e=this;this.wrapper.querySelector("#embedInput").select(),document.execCommand("copy");var t=this.wrapper.querySelector(".svp-inner");this.copyButton.textContent="Copied",this.copyButton.disabled=!0,t.style.boxShadow="0 0 20px -10px #fff",setTimeout(function(){e.copyButton.textContent="Copy",e.copyButton.disabled=!1,t.style.boxShadow="none"},500)}},{key:"buildSharableLink",value:function(e){var t=e.clipId,n=e.title,r=e.image,i=this.options.plugins.svpColors,o=this.options.staticRoot,a=encodeURIComponent(this.options.bgColor1),s=encodeURIComponent(this.options.bgColor2),l=encodeURIComponent(i.base),u=encodeURIComponent(i.text),c=encodeURIComponent(i.hover),h=!0===this.options.autoHideControls?1:0,f=this.options.playButton,d=this.options.playButtonStyle,p=this.options.sleekPlayer?1:0,v=100*Number(i.opacity),y=this.options.stretch?1:0;this.wrapper.querySelector("#embedInput").value=o+"popplayer.php?it="+t+"&is_link=1&w=720&h=405&pause=1&title="+n+"&skin=3&repeat=&brandNW=1&start_volume=100&bg_gradient1="+a+"&bg_gradient2="+s+"&fullscreen=1&fs_mode=2&skinAlpha="+v+"&colorBase="+l+"&colorIcon="+u+"&colorHighlight="+c+"&direct=false&no_ctrl=&auto_hide="+h+"&viewers_limit=0&cc_position=bottom&cc_positionOffset=70&cc_multiplier=0.03&cc_textColor=%23ffffff&cc_textOutlineColor=%23ffffff&cc_bkgColor=%23000000&cc_bkgAlpha=0.1&image="+r+"&mainBg_Color=%23ffffff&aspect_ratio=16%3A9&play_button="+f+"&play_button_style="+d+"&sleek_player="+p+"&stretch="+y}},{key:"show",value:function(){this.wrapper.classList.remove("svp-vjs-hidden")}},{key:"hide",value:function(){this.wrapper.classList.add("svp-vjs-hidden")}},{key:"handleClick",value:function(e){ft(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleClick",this).call(this,e)}}]),t}(dt);pt.prototype.controlText_="Share button",ge.a.registerComponent("ShareButton",pt);var vt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),yt={base:"#000",hover:"#ff8f00",text:"#fff",playProgress:"#ffb300",loadProgress:"#ccc",menuSelectedBgr:"#fff",menuSelectedText:"#333",opacity:.7,opacityHover:1,adsMarker:"#FFFF00",threeColorsMode:!1},gt=function(){function e(t,n){D(this,e),this.player=t,this.options=n,this.baseRGB="",this.textRGB="",this.hoverRGB="",this.menuSelectedBgrRGB="",this.sourceCSS="",this.finalCSS="",this.styleId="style-"+this.player.id(),this.sheet={},this.sourceCSS=".vjs-svp-skin.video-js{color:$text-color}.vjs-svp-skin.video-js .vjs-play-progress,.vjs-svp-skin.video-js .vjs-play-progress:before,.vjs-svp-skin.video-js .vjs-volume-level,.vjs-svp-skin.video-js .vjs-volume-level:before{background:$play-progress-color}.vjs-svp-skin.video-js .vjs-load-progress,.vjs-svp-skin.video-js .vjs-load-progress>div{background:$load-progress-color}.vjs-svp-skin.video-js .svp-animated-play-pause,.vjs-svp-skin.video-js .vjs-big-play-button{background:$base-clr-alpha}.vjs-svp-skin.video-js:hover .vjs-big-play-button{background:$hover-clr-alpha}.vjs-svp-skin.video-js:hover .vjs-big-play-button:before{text-shadow:0 0 1em $text-color}.vjs-svp-skin.video-js .vjs-loading-spinner{border-color:$spinner-border-color}.vjs-svp-skin.video-js .vjs-error-display{color:$text-color}.vjs-svp-skin.video-js .vjs-error-display .vjs-modal-dialog-content{background:$base-clr-alpha}.vjs-svp-skin.video-js .vjs-text-holder{background:$base-clr-alpha;color:$text-color}.vjs-svp-skin.vjs-force-waiting .vjs-loading-spinner:after,.vjs-svp-skin.vjs-force-waiting .vjs-loading-spinner:before,.vjs-svp-skin.vjs-seeking .vjs-loading-spinner:after,.vjs-svp-skin.vjs-seeking .vjs-loading-spinner:before,.vjs-svp-skin.vjs-waiting .vjs-loading-spinner:after,.vjs-svp-skin.vjs-waiting .vjs-loading-spinner:before{border-top-color:$hover-color}.vjs-svp-skin .vjs-control-bar>*{background:$base-clr-alpha}.vjs-svp-skin .vjs-menu li:focus,.vjs-svp-skin .vjs-menu li:hover{color:$menu-selected-text-color;background:$menu-selected-bgr-clr-halpha}.vjs-svp-skin .vjs-menu li.vjs-selected{color:$menu-selected-text-color;background:$menu-selected-bgr-color}.vjs-svp-skin .vjs-menu-button-popup .vjs-menu .vjs-menu-content{background:$base-clr-alpha}.vjs-svp-skin .vjs-modal-overlay{color:$text-color;background:$base-clr-alpha}.vjs-svp-skin .vjs-control:not(.vjs-volume-menu-button):not(.vjs-progress-control):not(.vjs-remaining-time):not(.vjs-live-control):not(.svp-viewers):not(.vjs-current-time):not(.vjs-duration):not(.svp-slides-switch):hover{background:$hover-clr-alpha}.vjs-svp-skin .vjs-control:focus,.vjs-svp-skin .vjs-control:focus:before,.vjs-svp-skin .vjs-control:hover:before{text-shadow:0 0 1em $text-color}.vjs-svp-skin .svp_holder_ima-controls-div{background:$base-clr-alpha}.vjs-svp-skin .svp_holder_ima-progress-div,.vjs-svp-skin .svp_holder_ima-slider-level-div{background:$play-progress-color}.vjs-svp-skin .svp_holder_ima-countdown-div,.vjs-svp-skin .svp_holder_ima-fullscreen-div,.vjs-svp-skin .svp_holder_ima-mute-div,.vjs-svp-skin .svp_holder_ima-play-pause-div,.vjs-svp-skin .svp_holder_ima-slider-div{color:$text-color}.vjs-svp-skin .svp_holder_ima-fullscreen-div:hover:before,.vjs-svp-skin .svp_holder_ima-mute-div:hover:before,.vjs-svp-skin .svp_holder_ima-play-pause-div:hover:before{text-shadow:0 0 1em $text-color}.vjs-svp-skin .svp-marker{background:$marker-bgr-color}.vjs-svp-skin .svp-close-button{color:$text-color;background:$base-clr-alpha}.vjs-svp-skin .svp-slides-container{background:$base-clr-alpha;background-size:contain;background-position:50%;background-repeat:no-repeat}.vjs-svp-skin .svp-slides-switch{border:1px solid $hover-color}.vjs-svp-skin .svp-slides-switch:hover,.vjs-svp-skin.svp-slides.svp-slides--active .vjs-tech{background:$base-clr-alpha}",this.sourceCSS=this.sourceCSS.replace(/(\.vjs-svp-skin)/g,"$1#"+this.player.id())}return vt(e,[{key:"setup",value:function(){var e=this;this.options.threeColorsMode&&(this.options.playProgress=this.options.hover),this.buildCSS(),this.appendStyle(),this.player.on("dispose",function(){return e.dispose()}),this.player.on("setColors",function(t,n){return e.updateColors(n)})}},{key:"dispose",value:function(){var e=document.getElementById(this.styleId);e.parentNode.removeChild(e),delete this.sheet,delete this.player}},{key:"updateColors",value:function(e){this.options.threeColorsMode&&"string"==typeof e.hover&&(e.playProgress=e.hover),this.setColors(e),this.buildCSS();var t=this.getTheme(),n=this.sheet.cssRules;Object.keys(this.sheet.cssRules).map(function(e){n[e].style.cssText=t[e]})}},{key:"updateRGB",value:function(){this.baseRGB=e.hexToRgb(this.options.base),this.textRGB=e.hexToRgb(this.options.text),this.hoverRGB=e.hexToRgb(this.options.hover),this.menuSelectedBgrRGB=e.hexToRgb(this.options.menuSelectedBgr)}},{key:"appendStyle",value:function(){var e=document.createElement("style");e.type="text/css",e.id=this.styleId,e.appendChild(document.createTextNode(this.finalCSS)),this.player.el().parentNode.insertBefore(e,this.player.el()),this.sheet=e.sheet}},{key:"buildCSS",value:function(){this.updateRGB(),this.finalCSS=this.sourceCSS.replace(/\$text-color/g,this.options.text).replace(/\$hover-color/g,this.options.hover).replace(/\$marker-bgr-color/g,this.options.adsMarker).replace(/\$play-progress-color/g,this.options.playProgress).replace(/\$load-progress-color/g,this.options.loadProgress).replace(/\$spinner-border-color/g,"rgba("+this.textRGB+", .4)").replace(/\$menu-selected-text-color/g,this.options.menuSelectedText).replace(/\$menu-selected-bgr-color/g,this.options.menuSelectedBgr).replace(/\$base-clr-alpha/g,"rgba("+this.baseRGB+","+this.options.opacity+")").replace(/\$hover-clr-alpha/g,"rgba("+this.hoverRGB+","+this.options.opacityHover+")").replace(/\$menu-selected-bgr-clr-halpha/g,"rgba("+this.menuSelectedBgrRGB+","+this.options.opacityHover+")")}},{key:"setColors",value:function(e){var t=this;Object.keys(e).map(function(n){void 0!==t.options[n]&&(t.options[n]=e[n])})}},{key:"getTheme",value:function(){var e=[],t=this.finalCSS.replace(/:before/g,"::before").replace(/:after/g,"::after").replace(/}/g,"}!!").split("!!");return t.splice(t.length-1),t.forEach(function(t){var n=t.indexOf("{")+1,r=t.indexOf("}");e.push(t.slice(n,r)+";")}),e}}],[{key:"hexToRgb",value:function(e){if("string"!=typeof e)return"";e=e.replace(/[^0-9A-F]/gi,""),3===e.length&&(e+=e);var t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t].join()}}]),e}();ge.a.plugin("svpColors",I);var mt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),bt={minViewers:0},_t=function(){function e(t,n){M(this,e),this.player=t,this.options=n,this.counter=null,this.updateDelay=2e3,this.countViewers=0,this.updateInterval=null}return mt(e,[{key:"setup",value:function(){var e=this.player.getChild("controlBar");if(void 0!==e){var t=e.getChild("svpViewers").el();this.counter=t.querySelector(".svp-viewers-counter"),this.handleDispose=this.dispose.bind(this),this.handleSetMinimum=this.setMinViewers.bind(this),this.handleViewers=this.viewers.bind(this),this.player.on("dispose",this.handleDispose),this.player.on("min-viewers",this.handleSetMinimum),this.player.on("viewers",this.handleViewers),this.setViewers(0),this.setUpdateInterval()}}},{key:"dispose",value:function(){this.setUpdateInterval(!1),this.player.off("dispose",this.handleDispose),this.player.off("min-viewers",this.handleSetMinimum),this.player.off("viewers",this.handleViewers),delete this.counter,delete this.player}},{key:"setUpdateInterval",value:function(e){if(void 0===e&&(e=this.options.minViewers>0),this.updateViewers(),!e)return clearInterval(this.updateInterval),void(this.updateInterval=null);null===this.updateInterval&&(this.updateInterval=setInterval(this.updateViewers.bind(this),this.updateDelay))}},{key:"updateViewers",value:function(){this.options.minViewers>0&&this.countViewers>=this.options.minViewers?this.player.addClass("svp-viewers-active"):this.player.removeClass("svp-viewers-active"),this.counter.innerHTML=this.numberWithCommas(this.countViewers)}},{key:"setViewers",value:function(e){e=parseInt(e,10),isNaN(e)&&(e=0),this.countViewers=e}},{key:"setMinViewers",value:function(e,t){this.options.minViewers=t.viewers,this.setUpdateInterval()}},{key:"viewers",value:function(e,t){this.setViewers(t.viewers)}},{key:"numberWithCommas",value:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}]),e}();ge.a.plugin("svpViewers",N);var Et=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),kt={volumeStep:.1,seekStep:5,enableMute:!0,enableVolumeScroll:!1,enableFullscreen:!0,enableNumbers:!0,alwaysCaptureHotKeys:!1,enableInactiveFocus:!0,playPauseKey:B,rewindKey:U,forwardKey:H,volumeUpKey:V,volumeDownKey:G,muteKey:W,fullscreenKey:K,customKeys:{}},Tt=function(){function e(t,n){F(this,e),this.player=t,this.options=n}return Et(e,[{key:"setup",value:function(){this.playerEl=this.player.el(),this.timeoutPlayPause=null,this.focusingPlayerTimeout=null,this.codePlay=1,this.codeRewind=2,this.codeForward=3,this.codeVolumeUp=4,this.codeVolumeDown=5,this.codeMute=6,this.codeFullscreen=7,this.volumeStep=this.options.volumeStep,this.seekStep=this.options.seekStep,this.enableMute=this.options.enableMute,this.enableVolumeScroll=this.options.enableVolumeScroll,this.enableFull=this.options.enableFullscreen,this.enableNumbers=this.options.enableNumbers,this.alwaysCaptureHotKeys=this.options.alwaysCaptureHotKeys,this.enableInactiveFocus=this.options.enableInactiveFocus,this.playerEl.hasAttribute("tabIndex")||this.playerEl.setAttribute("tabIndex","-1"),this.playerEl.style.outline="none",this.bindEvents()}},{key:"bindEvents",value:function(){this.onPlayHandler=this.onPlay.bind(this),this.keyDownHandler=this.keyDown.bind(this),this.doubleClickHandler=this.doubleClick.bind(this),this.mouseScrollHandler=this.mouseScroll.bind(this),this.disposeHandler=this.dispose.bind(this),this.startAnimationHandler=this.startAnimation.bind(this),this.focusingPlayerHandler=this.focusingPlayer.bind(this),this.cancelFocusingPlayerHandler=this.cancelFocusingPlayer.bind(this),!this.alwaysCaptureHotKeys&&this.player.autoplay()||this.player.one("play",this.onPlayHandler),this.enableInactiveFocus&&this.player.on("userinactive",this.focusingPlayerHandler),this.player.on("dispose",this.disposeHandler),this.player.on("keydown",this.keyDownHandler),this.player.on("dblclick",this.doubleClickHandler),this.player.on(["mousewheel","DOMMouseScroll"],this.mouseScrollHandler),this.player.tech_.on("mousedown",this.startAnimationHandler)}},{key:"dispose",value:function(){this.enableInactiveFocus&&this.player.off("userinactive",this.focusingPlayerHandler),this.cancelFocusingPlayer(),clearTimeout(this.timeoutPlayPause),this.timeoutPlayPause=null,this.player.off("dispose",this.disposeHandler),this.player.off("play",this.onPlayHandler),this.player.off("keydown",this.keyDownHandler),this.player.off("dblclick",this.doubleClickHandler),this.player.off(["mousewheel","DOMMouseScroll"],this.mouseScrollHandler),this.player.tech_.off("mousedown",this.startAnimationHandler),this.player.off("useractive",this.cancelFocusingPlayerHandler),delete this.playerEl,delete this.player}},{key:"cancelFocusingPlayer",value:function(){clearTimeout(this.focusingPlayerTimeout),this.focusingPlayerTimeout=null}},{key:"canTogglePlay",value:function(){return!(this.player.hasClass("vjs-offline")||this.player.hasClass("vjs-live")&&this.player.hasClass("vjs-has-started"))}},{key:"focusingPlayer",value:function(){var e=this;this.focusingPlayerTimeout=setTimeout(function(){e.focusingPlayerTimeout=null;var t=document.activeElement;e.player.off("useractive",e.cancelFocusingPlayerHandler),t&&t.parentElement===e.playerEl.querySelector(".vjs-control-bar")&&e.playerEl.focus()},10),this.player.one("useractive",this.cancelFocusingPlayerHandler)}},{key:"checkActiveElement",value:function(e,t){if(e===this.playerEl)return!0;var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(e===this.playerEl.querySelector(s))return!0}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return!1}},{key:"startAnimation",value:function(){if(this.canTogglePlay())return this.player.paused()?void this.player.trigger("play-animation"):void this.player.trigger("pause-animation")}},{key:"togglePlayPause",value:function(){if(this.canTogglePlay())return this.player.paused()?void this.player.play():void this.player.pause()}},{key:"onPlay",value:function(){this.playerEl.focus()}},{key:"keyDown",value:function(e){var t=this,n=null,r=[".vjs-tech",".vjs-control-bar"],i=this.checkActiveElement(document.activeElement,r),o=this.alwaysCaptureHotKeys||i,a=this.player.duration()===1/0,s=document.activeElement===this.playerEl.querySelector(".vjs-play-control"),l=document.activeElement===this.playerEl,u=1===this.checkKeys(e)||13===e.which;if((this.player.isOffline&&u&&s||l)&&(e.preventDefault(),e.stopPropagation()),!this.alwaysCaptureHotKeys&&!1!==o)switch(this.checkKeys(e)){case this.codePlay:if(e.preventDefault(),this.alwaysCaptureHotKeys&&e.stopPropagation(),null!==this.timeoutPlayPause)return;this.timeoutPlayPause=setTimeout(function(){t.togglePlayPause(),t.startAnimation(),t.timeoutPlayPause=null},300);break;case this.codeRewind:if(a)return;e.preventDefault(),n=this.player.currentTime()-this.seekStep,this.player.currentTime(n);break;case this.codeForward:if(a)return;e.preventDefault(),this.player.currentTime(this.player.currentTime()+this.seekStep);break;case this.codeVolumeDown:e.preventDefault(),this.player.volume(this.player.volume()-this.volumeStep);break;case this.codeVolumeUp:e.preventDefault(),this.player.volume(this.player.volume()+this.volumeStep);break;case this.codeMute:this.enableMute&&this.player.muted(!this.player.muted());break;case this.codeFullscreen:if(!1===this.enableFull)return;if(this.player.isFullscreen())return void this.player.exitFullscreen();this.player.requestFullscreen();break;default:this.handleCustomKeys(e),!a&&this.enableNumbers&&this.skipToPercentage(e)}}},{key:"handleCustomKeys",value:function(e){var t=this.options.customKeys;for(var n in t){if(!1===this.options.customKeys.hasOwnProperty(n))return;var r=this.options.customKeys[n];r&&r.key(e)&&"function"==typeof r.handler&&(e.preventDefault(),r.handler(this.player,this.options,e))}}},{key:"skipToPercentage",value:function(e){var t=e.which,n=t>47&&t<59||t>95&&t<106,r=e.ctrlKey||e.metaKey||e.altKey;if(!1!==n&&!r){var i=t>95?96:48,o=t-i;e.preventDefault(),this.player.currentTime(this.player.duration()*o*.1)}}},{key:"checkKeys",value:function(e){return this.options.playPauseKey(e,this.player)?this.codePlay:this.options.rewindKey(e,this.player)?this.codeRewind:this.options.forwardKey(e,this.player)?this.codeForward:this.options.volumeUpKey(e,this.player)?this.codeVolumeUp:this.options.volumeDownKey(e,this.player)?this.codeVolumeDown:this.options.muteKey(e,this.player)?this.codeMute:!!this.options.fullscreenKey(e,this.player)&&this.codeFullscreen}},{key:"doubleClick",value:function(e){var t=e.relatedTarget||e.toElement||document.activeElement,n=[".vjs-tech"],r=this.checkActiveElement(t,n);if(r&&this.enableFull&&this.player.isFullscreen())return void this.player.exitFullscreen();r&&this.enableFull&&this.player.requestFullscreen()}},{key:"mouseScroll",value:function(e){var t=e.relatedTarget||e.toElement||document.activeElement,n=[".vjs-tech",".vjs-control-bar"],r=this.checkActiveElement(t,n);if(!1!==(this.alwaysCaptureHotKeys||r&&this.enableVolumeScroll)){e=window.event||e;var i=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));if(e.preventDefault(),1===i)return void this.player.volume(this.player.volume()+this.volumeStep);-1===i&&this.player.volume(this.player.volume()-this.volumeStep)}}}]),e}();ge.a.plugin("hotKeys",z);var wt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),St=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},Ct=ge.a.getComponent("Button"),Ot=function(e){function t(e,n){X(this,t);var r=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.options=n,r.onDownloadHide=r.hide.bind(r),r.onDownloadShow=r.show.bind(r),r.init(),r}return Y(t,e),wt(t,[{key:"init",value:function(){this.el().classList.add("vjs-icon-download"),this.addClass("svp-download-button"),this.hide(),this.bindEvents()}},{key:"dispose",value:function(){this.unbindEvents(),delete this.options,St(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"bindEvents",value:function(){this.player().on("download-hide",this.onDownloadHide),this.player().on("download-show",this.onDownloadShow)}},{key:"unbindEvents",value:function(){this.player().off("download-hide",this.onDownloadHide),this.player().off("download-show",this.onDownloadShow)}},{key:"handleClick",value:function(e){St(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleClick",this).call(this,e),this.player().trigger("download-start")}}]),t}(Ct);Ot.prototype.controlText_="Download",ge.a.registerComponent("DownloadButton",Ot);var Pt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Rt=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},Lt=ge.a.getComponent("Component"),At=ge.a.getComponent("ClickableComponent"),xt={startWithSlides:!1,verticalPosition:"bottom",horizontalPosition:"left"},Dt={HIDDEN:"vjs-hidden",PLAYER_SLIDES:"svp-slides",CONTAINER:"svp-slides-container",SWITCH:"svp-slides-switch",PLAYER_SLIDES_ACTIVE:"svp-slides--active",POSITION_PREFIX:"svp-slides--position-"},It=function(e){function t(e,n){$(this,t);var r=Q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.options=ge.a.mergeOptions(xt,n),r.slidesSwitch=r.player().addChild("SlidesSwitch"),r.addClass(Dt.CONTAINER),r.bindEvents(),r.hide(),r}return J(t,e),Pt(t,[{key:"dispose",value:function(){this.unbindEvents(),delete this.slidesSwitch,Rt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"bindEvents",value:function(){this.onLoadSlide=this.load.bind(this),this.onSwitch=this.toggle.bind(this),this.player().on("load-slide",this.onLoadSlide),this.player().on("switch-slides",this.onSwitch)}},{key:"unbindEvents",value:function(){this.player().off("load-slide",this.onLoadSlide),this.player().off("switch-slides",this.onSwitch)}},{key:"isVisible",value:function(){return this.hasClass(Dt.HIDDEN)}},{key:"isSlideHolder",value:function(){return this.player().hasClass(Dt.PLAYER_SLIDES_ACTIVE)}},{key:"hide",value:function(){Rt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hide",this).call(this),this.player().removeClass(Dt.PLAYER_SLIDES),this.clearPosition(),this.isSlideHolder()&&this.toggle()}},{key:"show",value:function(){Rt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.player().addClass(Dt.PLAYER_SLIDES),this.setPosition(),this.options.startWithSlides&&this.toggle()}},{key:"setPosition",value:function(){this.player().addClass(Dt.POSITION_PREFIX+("top"===this.options.verticalPosition?"top":"bottom")),this.player().addClass(Dt.POSITION_PREFIX+("right"===this.options.horizontalPosition?"right":"left"))}},{key:"clearPosition",value:function(){this.player().removeClass(Dt.POSITION_PREFIX+("top"===this.options.verticalPosition?"top":"bottom")),this.player().removeClass(Dt.POSITION_PREFIX+("right"===this.options.horizontalPosition?"right":"left"))}},{key:"load",value:function(e,t){if(""===t)return void this.hide();this.isVisible()&&this.show(),this.el().style.backgroundImage="url("+t+")"}},{key:"toggle",value:function(){this.player().toggleClass(Dt.PLAYER_SLIDES_ACTIVE)}}]),t}(Lt),Mt=function(e){function t(e,n){$(this,t);var r=Q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.player=e,r.options=ge.a.mergeOptions(xt,n),r.init(),r}return J(t,e),Pt(t,[{key:"init",value:function(){this.el().classList.add(Dt.SWITCH)}},{key:"handleClick",value:function(e){this.player.trigger("switch-slides"),e.stopPropagation()}}]),t}(At);ge.a.registerComponent("SlidesSwitch",Mt),ge.a.registerComponent("SlidesHolder",It);var jt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Nt={},Ft=function(){function e(t,n){Z(this,e),this.player=t,this.options=n,this.adsPlugins="js/ads.js",this.IMA="//imasdk.googleapis.com/js/sdkloader/ima3.js",this.tag=null,this.contentPaused=!1,this.adsPluginsReady=!1,this.IMAReady=!1,this.scriptsReady=!1,this.delayed=!1,this.initialized=!1,this.requested=!1,this.touchEndPrevented=!1,this.playerWasPaused=!0,this.adClicked=!1,this.markersCount=0}return jt(e,[{key:"setup",value:function(){this.setEventHandlers(),this.bindEvents()}},{key:"setEventHandlers",value:function(){this.onAdEventHandler=this.onAdEvent.bind(this),this.adsLoadedHandler=this.adsLoaded.bind(this),this.adsUrlHandler=this.adsUrl.bind(this),this.onPlayHandler=this.onPlay.bind(this),this.onDisposeHandler=this.onDispose.bind(this),this.proxyTechEventHandler=this.proxyTechEvent.bind(this)}},{key:"bindEvents",value:function(){this.player.on("play",this.onPlayHandler),this.player.on("ads-url",this.adsUrlHandler),this.player.on("dispose",this.onDisposeHandler)}},{key:"unbindEvents",value:function(){this.player.off("play",this.onPlayHandler),this.player.off("ads-url",this.adsUrlHandler),this.player.off("dispose",this.onDisposeHandler)}},{key:"googleImaEvents",value:function(){this.ImaEvents=[google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED],this.proxyTechEvents=["mousedown","touchstart","touchmove","touchend"]}},{key:"requestAds",value:function(){if("function"!=typeof this.player.ima){var e=this.tag,t=null!==e,n=this.player.paused()&&!this.contentPaused,r=this.player.currentTime();this.removeMarkers(),this.contentPaused=!1,t&&this.player.ima.initializeAdDisplayContainer(),this.player.ima.setContentWithAdTag(null,e,!0),t&&this.player.ima.requestAds(),this.player.currentTime(r),n||this.player.play(),this.requested=!0}}},{key:"adsUrl",value:function(e,t){var n=t.tag;if(this.tag!==n){if(this.tag=n,this.scriptsReady)return void this.requestAds();this.loadAdsScripts()}}},{key:"initAds",value:function(){"function"==typeof this.player.ima&&(this.googleImaEvents(),this.initVideojsIma(),this.initialized=!0)}},{key:"initVideojsIma",value:function(){var e={id:this.player.el().id,nativeControlsForTouch:!1};this.player.ima(ge.a.mergeOptions(e,this.options),this.adsLoadedHandler)}},{key:"proxyTechEvent",value:function(e){if(!this.contentPaused){var t=e.type;if(!("mousedown"===t||"click"===t)||!this.touchEndPrevented){"mousedown"!==t&&"touchstart"!==t||(this.playerWasPaused=this.player.paused());var n=new e.constructor(t,e);if(!this.player.tech_.el().dispatchEvent(n)){if("touchend"===t){if(!this.player.controls())return;this.touchEndPrevented=!0}e.preventDefault()}}}}},{key:"adsLoaded",value:function(){if(null!==this.player.ima.adsManager){this.player.duration()!==1/0&&this.initMarkers();var e=!0,t=!1,n=void 0;try{for(var r,i=this.ImaEvents[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;this.player.ima.addEventListener(o,this.onAdEventHandler)}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}if(this.adContainer=this.player.ima.adContainerDiv,void 0!==this.adContainer){var a=!0,s=!1,l=void 0;try{for(var u,c=this.proxyTechEvents[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var h=u.value;this.adContainer.addEventListener(h,this.proxyTechEventHandler)}}catch(e){s=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw l}}}this.player.ima.startFromReadyCallback()}}},{key:"onPlay",value:function(){if(!this.scriptsReady)return void(this.delayed=!0);null!==this.tag&&(this.initialized||this.initAds(),this.requested||this.requestAds(),this.contentPaused&&this.player.pause())}},{key:"onAdComplete",value:function(e){var t=e.getAd().getAdPodInfo().getPodIndex();this.removeMarker(-1===t?this.markersCount-1:t),this.player.duration()===1/0&&this.player.play()}},{key:"getMarkerPosition",value:function(e){var t=e/this.player.duration()*100;return Math.round(100*t)/100}},{key:"initMarkers",value:function(){var e=this.player.ima.adsManager.getCuePoints(),t=e.length;this.markersCount=t;for(var n=0;n<t;n++){var r=e[n];switch(r){case 0:this.createMarker("left",0,n);break;case-1:this.createMarker("right",0,n);break;default:this.createMarker("left",this.getMarkerPosition(r),n)}}}},{key:"removeMarkers",value:function(){for(var e=this.markersCount,t=0;t<e;t++)this.removeMarker(t)}},{key:"createMarker",value:function(e,t,n){var r=document.createElement("div");r.className="svp-marker",r.setAttribute("data-index",n),0===t&&r.classList.add("svp-marker-first"),"left"===e?r.style.left=t+"%":(r.classList.add("svp-marker-last"),r.style.right=t+"%"),this.player.getChild("controlBar").getChild("progressControl").getChild("seekBar").el().appendChild(r)}},{key:"removeMarker",value:function(e){var t=this.player.getChild("controlBar").getChild("progressControl").getChild("seekBar").el(),n=t.querySelector("div[data-index ='"+e+"']");null!==n&&t.removeChild(n)}},{key:"onAdEvent",value:function(e){switch(this.player.trigger("debug",{type:"log",message:"Ad event: "+e.type}),e.type){case google.ima.AdEvent.Type.CLICK:this.playerWasPaused?this.player.pause():this.player.play(),this.adClicked=!0;break;case google.ima.AdEvent.Type.PAUSED:this.adClicked&&(this.player.ima.resumeAd(),this.adClicked=!1),this.player.el().classList.remove("vjs-ad-playing"),this.player.el().classList.add("vjs-ad-paused");break;case google.ima.AdEvent.Type.RESUMED:this.adClicked&&(this.player.ima.pauseAd(),this.adClicked=!1),this.player.el().classList.remove("vjs-ad-paused"),this.player.el().classList.add("vjs-ad-playing");break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.contentPaused=!0;break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.contentPaused=!1;break;case google.ima.AdEvent.Type.LOADED:this.player.trigger("ad-loaded"),this.volume=this.player.volume();break;case google.ima.AdEvent.Type.STARTED:this.player.trigger("ad-started",this.player.ima.currentAd.isLinear()),this.player.el().classList.add("svp-ima-wrap"),this.player.volume(0),this.player.volume(this.volume);break;case google.ima.AdEvent.Type.COMPLETE:case google.ima.AdEvent.Type.SKIPPED:this.onAdComplete(e),this.player.trigger("ad-completed"),this.player.el().classList.remove("svp-ima-wrap")}}},{key:"loadScript",value:function(e,t){var n=document.createElement("script");n.type="text/javascript",n.onload=t,n.src=e,document.body.appendChild(n)}},{key:"loadAdsScripts",value:function(){var e=this;this.loadScript(this.IMA,function(){e.IMAReady=!0,e.adsPluginsReady&&e.onScriptsLoaded()}),this.loadScript(this.adsPlugins,function(){e.adsPluginsReady=!0,e.IMAReady&&e.onScriptsLoaded()})}},{key:"onScriptsLoaded",value:function(){this.player&&(this.scriptsReady=!0,this.delayed&&(this.initAds(),this.requestAds(),this.delayed=!1))}},{key:"onDispose",value:function(){if(this.unbindEvents(),this.player.ima&&this.player.ima.adsManager&&this.player.ima.adsManager.removeEventListener){var e=!0,t=!1,n=void 0;try{for(var r,i=this.ImaEvents[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;this.player.ima.adsManager.removeEventListener(o,this.onAdEventHandler)}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}if(void 0!==this.adContainer){var a=!0,s=!1,l=void 0;try{for(var u,c=this.proxyTechEvents[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var h=u.value;this.adContainer.removeEventListener(h,this.proxyTechEventHandler)}}catch(e){s=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw l}}delete this.adContainer}this.tag=null,delete this.player,delete this.options}}]),e}();ge.a.plugin("svpIma",ee);var Bt=(n(515),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Ut=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];te(this,e),this.debug=!0===t,this.debug&&(this.console=console)}return Bt(e,[{key:"log",value:function(){this.debug&&this.console.log.apply(this.console,arguments)}},{key:"warn",value:function(){this.debug&&this.console.warn.apply(this.console,arguments)}},{key:"error",value:function(){this.debug&&this.console.error.apply(this.console,arguments)}},{key:"destroy",value:function(){delete this.console}},{key:"logGroup",value:function(e){if(this.debug){this.console.group(e);for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,n),this.console.groupEnd()}}}]),e}(),Ht=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Vt=function(){function e(t,n){ne(this,e),this.player=t,this.logger=n,this.events={},this.cachedEvents={}}return Ht(e,[{key:"destroy",value:function(){var e=Object.keys(this.events),t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;this.removeEventListener(a)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}delete this.logger,delete this.events,delete this.cachedEvents,delete this.player}},{key:"getEventIndex",value:function(e,t){if(void 0===this.events||void 0===this.events[e])return!1;for(var n=0;n<this.events[e].length;n++)if(this.events[e][n].handler===t)return n;return!1}},{key:"addSingleEventListener",value:function(e,t,n){this.logger.log("Add event listener for "+e),void 0===this.events[e]&&(this.events[e]=[]),this.events[e].push({handler:t,context:void 0!==n?n:this.player}),void 0!==this.cachedEvents[e]&&this.triggerCachedEvents(e)}},{key:"removeSingleEventListener",value:function(e,t){if(this.logger.log("Remove event listener for "+e),void 0!==this.events&&void 0!==this.events[e]){void 0===t&&delete this.events[t];var n=this.getEventIndex(e,t);!1!==n&&this.events[e].splice(n,1),0===this.events[e].length&&delete this.events[e]}}},{key:"addEventListener",value:function(e,t,n){e=e.split(" ");var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;this.addSingleEventListener(l,t,n)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}},{key:"removeEventListener",value:function(e,t){e=e.split(" ");var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this.removeSingleEventListener(s,t)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}},{key:"cacheEvent",value:function(e,t){void 0===this.cachedEvents[e]&&(this.cachedEvents[e]=[]),this.cachedEvents[e].push(t)}},{key:"triggerCachedEvents",value:function(e){if(void 0!==this.cachedEvents[e]){for(;this.cachedEvents[e].length>0;)this.trigger(e,this.cachedEvents[e].shift());delete this.cachedEvents[e]}}},{key:"trigger",value:function(e,t){if(this.logger.log("Trigger event "+e),void 0===this.events[e])return void this.cacheEvent(e,t);var n=!0,r=!1,i=void 0;try{for(var o,a=this.events[e][Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.handler.call(s.context,e,t)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}}]),e}(),Gt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Wt={GA:"TIMELINE.GA",DOWNLOAD:"TIMELINE.DOWNLOAD",PPV:"TIMELINE.PPV"},Kt=function(){function e(t,n,r){re(this,e),this.player=t,this.logger=n,this.eventBus=r,this.events={},this.eventBus.addEventListener("collect-xml-events",this.collectXMLEvents,this)}return Gt(e,[{key:"destroy",value:function(){this.eventBus.removeEventListener("collect-xml-events",this.collectXMLEvents),delete this.player,delete this.logger,delete this.eventBus,delete this.events}},{key:"collectXMLEvents",value:function(){var e=this.player.getXmlNodes("event"),t=e.length;this.hasPpv=!1,this.hasDownload=!1,this.hasGa=!1;for(var n=0;n<t;n++)this.collectXMLEvent(e[n]);this.hasPpv||this.eventBus.trigger("ppv-destroy"),this.hasDownload||this.eventBus.trigger("download-destroy"),this.hasGa||this.eventBus.trigger("ga-destroy")}},{key:"collectXMLEvent",value:function(e){var t=Wt[e.getAttribute("event_code")],n=e.querySelector("params"),r=null!==n?n.textContent:"";this.events[t]=r,t===Wt.PPV?(this.hasPpv=!0,this.eventBus.trigger("ppv-init",{event:e,code:t,params:n,hash:e.getAttribute("hash")}),delete this.events[t]):t===Wt.DOWNLOAD?(this.hasDownload=!0,this.eventBus.trigger("download-init")):t===Wt.GA&&(this.hasGa=!0,this.eventBus.trigger("ga-init",{code:t,params:r}))}}]),e}(),zt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Xt=function(){function e(t,n,r){ie(this,e),this.player=t,this.logger=n,this.eventBus=r,this.playerReady=!1,this.message="",this.customError=!1,this.initEvents()}return zt(e,[{key:"destroy",value:function(){this.hide(),this.removeEvents(),delete this.player,delete this.logger,delete this.eventBus}},{key:"initEvents",value:function(){this.onError=this.handle.bind(this),this.onPlayerError=this.handlePlayer.bind(this),this.eventBus.addEventListener("player:ready",this.onPlayerReady,this),this.eventBus.addEventListener("info:ready",this.onInfoReady,this),window.addEventListener("error",this.onError)}},{key:"removeEvents",value:function(){this.eventBus.removeEventListener("player:ready",this.onPlayerReady),this.eventBus.removeEventListener("info:ready",this.onInfoReady),window.removeEventListener("error",this.onError),this.player.video.removeEventListener("error",this.onError),this.player.player.off("error",this.onPlayerError)}},{key:"onPlayerReady",value:function(){this.playerReady=!0,""!==this.message&&this.show(),this.player.player.on("error",this.onPlayerError),this.player.video.addEventListener("error",this.onError)}},{key:"onInfoReady",value:function(){this.hide()}},{key:"set",value:function(e){""===this.message&&(this.message=e),this.customError=!0,this.logger.error(this.message),this.show()}},{key:"show",value:function(){this.playerReady&&this.player.player.error(this.message)}},{key:"hide",value:function(){this.playerReady&&(this.player.player.error(null),this.message="")}},{key:"getMessage",value:function(e){var t=e.error,n=e.message;if(void 0===n&&void 0!==t&&(n=t.message),void 0!==n)return n;if(void 0!==e.detail)return e.detail;var r=e.currentTarget.error;if(r){var i=r.code;switch(i){case r.MEDIA_ERR_ABORTED:n="You aborted the video playback";break;case r.MEDIA_ERR_DECODE:n="The video playback was aborted due to a corruption problem or because the video used features your browser did not support";break;case r.MEDIA_ERR_NETWORK:n="A network error caused the video download to fail part-way";break;case r.MEDIA_ERR_SRC_NOT_SUPPORTED:n="The video could not be loaded, either because the server or network failed or because the format is not supported";break;default:n="Unknown error"}return n+" (CODE = "+i+")"}return"Unknown error"}},{key:"handlePlayer",value:function(){var e=this.player.player.error();4===e.code?this.player.loadFlash():this.customError||"undefined"==typeof Raven?this.customError=!1:Raven.captureException(e.message)}},{key:"isMediaError",value:function(){try{return this.player.video.error instanceof MediaError}catch(e){return!1}}},{key:"handle",value:function(e){this.isMediaError()&&this.set(this.getMessage(e))}}]),e}(),qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),$t={NONE:0,FULL:1,HLS_ONLY:2,PLAYER_ONLY:3},Qt=[1],Jt=function(){function e(){oe(this,e)}return Yt(e,null,[{key:"getControlBar",value:function(){return{children:{progressControl:{},playToggle:{},volumeMenuButton:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},liveDisplay:{},flexibleWidthSpacer:{},shareButton:{},svpViewers:{},downloadButton:{},settingsButton:{setup:{maxHeightOffset:40},entries:[]}},progressControl:{keepTooltipsInside:!0}}}},{key:"getHtml5",value:function(e,t){return{nativeTextTracks:void 0===window.MediaSource,hlsjsConfig:{autoStartLoad:!1,debug:e===$t.FULL||e===$t.HLS_ONLY,xhrSetup:function(e){t||(e.withCredentials=!0)}}}}},{key:"getPlugins",value:function(e){return{svpColors:{base:void 0!==e.colorBase?e.colorBase:"#ff8f00",hover:void 0!==e.colorHover?e.colorHover:"#ff8f00",text:void 0!==e.colorText?e.colorText:"#fff",playProgress:void 0!==e.colorPlayProgress?e.colorPlayProgress:"#fff",opacity:void 0!==e.opacity?Number(e.opacity):.7,threeColorsMode:!0===e.threeColorsMode},svpViewers:{minViewers:void 0!==e.minViewers?Number(e.minViewers):0},svpBrand:{target:!0===e.brandNewWindow||"_self"},closeButton:{show:void 0!==e.closeButton&&Boolean(e.closeButton)},qualitySwitch:{},hlsStateManager:{},hotKeys:{},svpIma:{}}}},{key:"getLocalStorageDebug",value:function(){try{return window.localStorage.getItem("svp-debug")}catch(e){return null}}},{key:"getDebugMode",value:function(t){var n=e.getLocalStorageDebug(),r=$t.NONE;return void 0!==t.debug&&(r=Number(t.debug)),null!==n&&(r=Number(n)),isNaN(r)&&(r=$t.NONE),r}},{key:"parse",value:function(t){var n=e.getDebugMode(t),r=t.customUrl,i=void 0!==r,o=t.customPoster,a=void 0!==o,s=isNaN(Number(t.volume))?100:Number(t.volume),l=!1;!0===t.muted?l=!0:0===s&&(s=100,l=!0);var u=e.getControlBar();-1===Qt.indexOf(Number(t.shareOptions))&&delete u.children.shareButton;var c={staticRoot:void 0!==t.staticRoot?t.staticRoot:"https://play.streamingvideoprovider.com/",servicesEntry:void 0!==t.servicesEntry?t.servicesEntry:"https://service.webvideocore.net/",confirmEntry:void 0!==t.confirmEntry?t.confirmEntry:"https://service.webvideocore.net/",logsEntry:void 0!==t.logsEntry?t.logsEntry:"https://flashlogs.webvideocore.net/",preview:void 0!==t.preview&&Boolean(t.preview),page:t.page,debug:n===$t.FULL||n===$t.PLAYER_ONLY,containerId:t.containerId,params:t.params,clipId:t.clipId,rid:t.rid,stretch:void 0!==t.stretch&&Boolean(t.stretch),playButton:void 0!==t.playButton&&Boolean(t.playButton),playButtonStyle:t.playButtonStyle,volume:s,muted:l,loop:void 0!==t.loop&&t.loop,controls:void 0===t.controls||t.controls,videoPosterFollowControls:void 0!==t.videoPosterFollowControls&&t.videoPosterFollowControls,autoplay:void 0!==t.autoplay&&t.autoplay,autoHideControls:void 0===t.autoHideControls||t.autoHideControls,playbackRates:"object"===qt(t.playbackRates)&&t.playbackRates instanceof Array?t.playbackRates:[.5,1,1.5,2],livePosterOptions:t.livePosterOptions,disabledTimedPPV:void 0!==t.disabledTimedPPV&&t.disabledTimedPPV,controlBar:u,slidesHolder:{},useCustomUrl:i,customUrl:r,useCustomPoster:a,customPoster:o,html5:e.getHtml5(n,i),plugins:e.getPlugins(t),bgColor1:t.bgColor1,bgColor2:t.bgColor2,shareOptions:t.shareOptions,allowedShareOptions:Qt};return void 0!==t.fullscreenToggle&&!1===t.fullscreenToggle||(c.controlBar.fullscreenToggle={}),c}}]),e}(),Zt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),en=function(){function e(t,n){ae(this,e),this.logger=t,this.entry=n,this.callback=null,this.request=new XMLHttpRequest,this.onCompleteListener=this.onComplete.bind(this),this.onErrorListener=this.onError.bind(this),this.onAbortListener=this.onAbort.bind(this),this.onTimeoutListener=this.onTimeout.bind(this),this.addEventListeners()}return Zt(e,[{key:"destroy",value:function(){this.request.readyState!==XMLHttpRequest.OPENED&&this.request.abort(),this.removeEventListeners(),delete this.logger,delete this.request,delete this.callback}},{key:"addEventListeners",value:function(){this.request.addEventListener("load",this.onCompleteListener),this.request.addEventListener("error",this.onErrorListener),this.request.addEventListener("abort",this.onAbortListener),this.request.addEventListener("timeout",this.onTimeoutListener)}},{key:"removeEventListeners",value:function(){this.request.removeEventListener("load",this.onCompleteListener),this.request.removeEventListener("error",this.onErrorListener),this.request.removeEventListener("abort",this.onAbortListener),this.request.removeEventListener("timeout",this.onTimeoutListener)}},{key:"send",value:function(e,t){"function"==typeof this.callback&&this.callback(e,t)}},{key:"parseResponse",value:function(){return null!==this.request.responseXML?{response:this.request.responseXML,error:null}:{response:null,error:{type:"Parse",message:"Invalid document: "+this.request.responseText}}}},{key:"onComplete",value:function(){this.logger.log("HTTP request completed");var e=this.parseResponse(),t=e.response,n=e.error;this.send(t,n)}},{key:"onError",value:function(){this.logger.error("HTTP request error"),this.send(null,{type:"Network",message:"Network error!"})}},{key:"onAbort",value:function(){this.logger.warn("HTTP request aborted")}},{key:"onTimeout",value:function(){this.logger.warn("HTTP request timeout"),this.send(null,{type:"Network",message:"Network timeout!"})}},{key:"paramsToQuery",value:function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}},{key:"buildUrl",value:function(e){var t="GET"===e.method?this.paramsToQuery(e.data):"",n=-1!==this.entry.indexOf("?")?"&":"?";return""+this.entry+e.url+n+t}},{key:"call",value:function(e,t){this.request.readyState!==XMLHttpRequest.OPENED&&this.request.abort(),e=Object.assign({url:"",method:"GET",data:{},callback:null},e),this.callback=e.callback,this.request.open(e.method,this.buildUrl(e),!0),!0===t&&(this.request.withCredentials=!0),"GET"!==e.method&&this.request.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),this.request.send("POST"===e.method?this.paramsToQuery(e.data):null)}}]),e}(),tn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),nn=function(){function e(t,n,r){se(this,e),this.logger=t,this.eventBus=n,this.service=new en(this.logger,r),this.eventsProcessing={}}return tn(e,[{key:"destroy",value:function(){this.service.destroy(),delete this.logger,delete this.eventBus,delete this.service}},{key:"trigger",value:function(e,t){this.logger.log("Triggering event:",e,t),this.eventBus.trigger(e,t)}},{key:"triggerError",value:function(t,n){this.eventBus.trigger("ppv-show"),this.trigger(t,e.buildError(t,n))}},{key:"onConfirm",value:function(t,n,r,i){if(delete this.eventsProcessing[t],null!==i)return void this.triggerError(t,i.message);var o=e.parseXML(r);if("ok"!==o.status)return void this.triggerError(t,o.message);o.data=n,this.trigger(t,o)}},{key:"process",value:function(e,t){var n=t.data;if(""===n)return void this.eventBus.trigger("ppv-show");this.eventsProcessing[e]||(this.eventsProcessing[e]=!0,t.l="info",t.a="confirm_clip",this.service.call({data:t,callback:this.onConfirm.bind(this,e,n)},!0))}}],[{key:"parseXML",value:function(e){var t=e.querySelector("status"),n=e.querySelector("data"),r=e.querySelector("message");return{status:null!==t?t.textContent:"error",params:null!==n?n.textContent:"",message:null!==r?r.textContent:"error"}}},{key:"parseParams",value:function(e){var t={},n=e.split(";"),r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value,u=l.split("=");t[u.shift()]=u.join("=")}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return t}},{key:"buildError",value:function(e,t){return{status:"error",params:"code="+("ppv"===e?"PPV":"DL"),message:t}}}]),e}(),rn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),on=function(){function e(t,n,r,i,o){le(this,e),this.player=t,this.logger=n,this.eventBus=r,this.service=new en(this.logger,i),this.eventProcessor=new nn(n,this.eventBus,o),this.eventBus.addEventListener("DL",this.confirm,this),this.iframe=null,this.init()}return rn(e,[{key:"destroy",value:function(){this.player.hideDownloadButton(),this.eventBus.removeEventListener("DL",this.confirm,this),this.service.destroy(),this.eventProcessor.destroy(),null!==this.iframe&&this.iframe.parentNode.removeChild(this.iframe),delete this.player,delete this.service,delete this.eventProcessor,delete this.logger,delete this.eventBus,delete this.iframe}},{key:"init",value:function(){this.service.call({data:{l:"dl",a:"is_downloadable",clip_id:this.player.clipId},callback:this.onDownloadCheck.bind(this)})}},{key:"onDownloadCheck",value:function(e,t){var n=this.player;null===t&&"1"===n.getXmlText("is_downloadable",e)&&n.showDownloadButton()}},{key:"start",value:function(){this.logger.log("Starting download for clip "+this.player.clipId),this.eventProcessor.process("DL",{code:"DL",id:this.player.clipId,data:this.player.ppvCode+"|false"})}},{key:"createIframe",value:function(){this.iframe=document.createElement("iframe"),this.iframe.style.display="none",document.body.appendChild(this.iframe)}},{key:"confirm",value:function(e,t){if(this.logger.log("Download confirmed "+t),"ok"===t.status){var n=nn.parseParams(t.params);n.storage_link&&(null===this.iframe&&this.createIframe(),this.iframe.src=n.storage_link)}}}]),e}(),an=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),sn=function(){function e(){ue(this,e)}return an(e,null,[{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:365,r="";if(n){var i=new Date;i.setTime(i.getTime()+864e5*n),r=";expires="+i.toGMTString()}try{document.cookie=e+"="+t+r+";path=/;SameSite=None;Secure"}catch(e){return!1}return!0}},{key:"get",value:function(e){var t=null;try{t=document.cookie.split(";")}catch(e){return null}var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(s=s.trim(),-1!==s.indexOf(e))return s.split("=").pop()}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return null}},{key:"remove",value:function(t){e.set(t,"",-1)}}]),e}(),ln=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),un=function(){function e(t,n,r,i){ce(this,e),this.player=t,this.eventBus=n,this.eventProcessor=new nn(r,this.eventBus,i),this.eventCode="",this.eventParams="",this.code="",this.shownTicketCookie="ppv-shown-"+t.clipId,this.delay=0,this.isRefreshing=!1,this.eventBus.addEventListener("ppv-close",this.onClose,this),this.eventBus.addEventListener("ppv-paid",this.onPaid,this),this.eventBus.addEventListener("ppv-show",this.showTickets,this)}return ln(e,[{key:"destroy",value:function(){this.eventBus.removeEventListener("ppv-close",this.onClose),this.eventBus.removeEventListener("ppv-paid",this.onPaid),this.eventBus.removeEventListener("ppv-show",this.showTickets),this.eventBus.removeEventListener("progress play",this.onProgress),this.eventProcessor.destroy(),delete this.player,delete this.eventBus,delete this.eventProcessor}},{key:"parse",value:function(e){e=e.replace("confirm:",""),e=e.split(",");var t=e.shift(),n=e.shift();return this.getCode(e),{code:t,data:e.join(","),id:n,nt:this.player.shouldInsertUsage(this.isRefreshing,this.code)?0:1,m:"overlay"}}},{key:"getCode",value:function(e){if(0!==e.length){var t=e[0].split("|");t.length>0&&(this.code=t[0])}}},{key:"refresh",value:function(e,t){this.eventCode=t.code,this.eventParams=t.params.textContent,this.setDelay(t.event),this.player.shouldPPVTrigger(!0)&&(this.isRefreshing=!0,this.onProgress())}},{key:"init",value:function(e,t){this.eventCode=t.code,this.eventParams=t.params.textContent,this.eventBus.addEventListener("progress play",this.onProgress,this),this.setDelay(t.event),this.player.shouldPPVTrigger()&&this.onProgress()}},{key:"setDelay",value:function(e){"timeline"===e.getAttribute("on")&&(this.delay=parseInt(e.getAttribute("seconds"),10)),(this.player.options.disabledTimedPPV||null!==this.getIsShown())&&(this.delay=0)}},{key:"onClose",value:function(e){this.player.onPPVClose(e)}},{key:"onPaid",value:function(e,t){this.player.onPPVPaid(this.code,t)}},{key:"onProgress",value:function(e,t){var n=!0;void 0===t?t=this.player.currentSecond:n=this.player.isPlaying(),!n||t<this.delay||this.trigger()}},{key:"setIsShown",value:function(){if(this.player.usageInserted=!1,sn.set(this.shownTicketCookie,"1"),null!==sn.get(this.shownTicketCookie))return!0;try{return window.localStorage.setItem(this.shownTicketCookie,"1"),!0}catch(e){return!1}}},{key:"getIsShown",value:function(){var e=sn.get(this.shownTicketCookie);if(null!==e)return e;try{return window.localStorage.getItem(this.shownTicketCookie)}catch(e){return null}}},{key:"trigger",value:function(){this.player.onPPVOpen(),this.eventBus.trigger(this.eventCode,this.eventParams)}},{key:"showTickets",value:function(){var e=this;this.player.onPPVShow(function(){e.eventBus.trigger("PPV.RESIZE"),e.setIsShown()})}},{key:"process",value:function(e){return this.eventProcessor.process("ppv",this.parse(e))}}]),e}(),cn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),hn=function(){function e(t,n){he(this,e),this.player=t,this.logger=n,this.textTracks=this.player.textTracks(),this.trackChangeListener=this.onTrackChange.bind(this),this.resetListener=this.onReset.bind(this),this.loadedMetaDataListener=this.onLoadedMetaData.bind(this),this.textTracks.addEventListener("change",this.trackChangeListener),this.player.player.on("reset",this.resetListener),this.player.player.on("loadedmetadata",this.loadedMetaDataListener),this.tracks=[],this.player.addCaptionsButton(),this.addTracks(),this.setTracksVisibility()}return cn(e,[{key:"destroy",value:function(){this.textTracks.removeEventListener("change",this.trackChangeListener),this.player.player.off("reset",this.resetListener),this.player.player.off("loadedmetadata",this.loadedMetaDataListener),this.currentTrack=0,this.player.removeCaptionsButton(),this.removeTracks(),delete this.tracks,delete this.textTracks,delete this.player,delete this.logger}},{key:"onReset",value:function(){this.currentTrack=0,this.removeTracks()}},{key:"onLoadedMetaData",value:function(){this.onReset(),this.refresh()}},{key:"addTracks",value:function(){var e=this.player.getXmlNodes("subs sub"),t=e.length;this.currentTrack=0;for(var n=0;n<t;n++)this.addTrack(e[n])}},{key:"removeTracks",value:function(){for(var e=this.currentTrack,t=this.tracks,n=t.length,r=e;r<n;r++)this.player.removeSubtitlesTrack(t[r]);t.splice(e)}},{key:"setTracksVisibility",value:function(){if(""===this.lastShownTrack)return void this.disableTracks();this.showLastShown()||this.showDefault()}},{key:"refresh",value:function(){this.player.removeCaptionsButton(),this.player.addCaptionsButton(),this.addTracks(),this.removeTracks(),this.setTracksVisibility()}},{key:"onTrackChange",value:function(){var e=this.textTracks,t=e.length;this.lastShownTrack="";for(var n=0;n<t;n++){var r=e[n];"showing"===r.mode&&(this.lastShownTrack=r.src)}}},{key:"trackExists",value:function(e,t){var n=this.tracks[t];return void 0!==n&&(n.label===e.label&&n.default===e.default&&n.src===e.src||(this.player.removeSubtitlesTrack(n),!1))}},{key:"addTrack",value:function(e){var t=this.player,n=t.getXmlText("link",e);if(n){var r={kind:"captions",label:t.getXmlText("label",e),default:"1"===t.getXmlText("default",e),src:n},i=this.currentTrack++;this.trackExists(r,i)||(this.tracks[i]=t.addSubtitlesTrack(r))}}},{key:"disableTracks",value:function(){for(var e=this.textTracks,t=e.length,n=0;n<t;n++){e[n].mode="disabled"}}},{key:"showLastShown",value:function(){for(var e=this.textTracks,t=e.length,n=0;n<t;n++){var r=e[n];if(this.lastShownTrack===r.src)return r.mode="showing",!0}return!1}},{key:"showDefault",value:function(){for(var e=this.textTracks,t=e.length,n=0;n<t;n++){var r=e[n];if(r.default)return r.mode="showing",!0}return!1}}]),e}(),fn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),dn=function(){function e(t,n,r,i){fe(this,e),this.player=t,this.logger=n,this.eventBus=r,this.service=new en(this.logger,i),this.currentSlide=null,this.times={},this.paths={},this.isFetching=!1,this.isFetchingCurrent=!1,this.reloadDelay=1e3,this.player.isLive||(this.parseTimes(),this.eventBus.addEventListener("progress",this.handleProgress,this)),this.eventBus.addEventListener("play",this.handleProgress,this),this.eventBus.addEventListener("slide:change",this.onChange,this),this.player.hasPlayed&&this.handleProgress()}return fn(e,[{key:"destroy",value:function(){this.player.isLive||this.eventBus.removeEventListener("progress",this.handleProgress),this.eventBus.removeEventListener("play",this.handleProgress),this.eventBus.removeEventListener("slide:change",this.onChange),this.load(""),this.service.destroy(),delete this.service,delete this.times,delete this.paths,delete this.player,delete this.logger,delete this.eventBus}},{key:"getClosestTime",value:function(e){for(var t=Object.keys(this.times),n=t.length,r=e,i=0;i<n;i++){var o=t[i];if(o>e)break;o<e&&(r=o)}return r}},{key:"handleProgress",value:function(e,t){if(this.player.isLive)return void(null===this.currentSlide?this.fetchCurrent():this.showCurrent());void 0===t&&(t=this.player.currentSecond);var n=this.times[t];void 0===n&&void 0===(n=this.times[this.getClosestTime(t)])&&(n=0),this.eventBus.trigger("slide:change",n)}},{key:"parseTimes",value:function(){for(var e=this.player,t=e.getXmlNodes("slides slide"),n=t.length,r=0;r<n;r++){var i=t[r];this.times[e.getXmlText("slide_time",i)]=parseInt(e.getXmlText("slide_item_id",i),10)}}},{key:"parsePaths",value:function(e){var t=this.player,n=t.getXmlNodes("slides slide",e),r=n.length;this.paths={};for(var i=0;i<r;i++){var o=n[i];this.paths[t.getXmlText("slide_item_id",o)]=t.getXmlText("path",o)}}},{key:"refresh",value:function(){if(this.player.isLive)return void(this.player.isOffline&&this.load(""));this.times={},this.parseTimes(),this.player.hasPlayed&&this.handleProgress()}},{key:"load",value:function(e){this.player.loadSlide(e)}},{key:"onChange",value:function(e,t){this.player.hasPlayed&&t!==this.currentSlide&&(this.currentSlide=t,this.showCurrent(!0))}},{key:"fetch",value:function(){this.isFetching||(this.isFetching=!0,this.service.call({data:{l:"info",a:"xmlSlides",cid:this.player.clipId},callback:this.handleFetch.bind(this)}))}},{key:"handleFetch",value:function(e,t){if(this.isFetching=!1,t)return void(this.reloadTimeout=setTimeout(this.fetch.bind(this),this.reloadDelay));this.parsePaths(e),this.showCurrent()}},{key:"fetchCurrent",value:function(){this.isFetchingCurrent||(this.isFetchingCurrent=!0,this.service.call({data:{l:"info",a:"xmlGetCurrentSlide",cid:this.player.clipId},callback:this.handleFetchCurrent.bind(this)}))}},{key:"handleFetchCurrent",value:function(e,t){if(this.isFetchingCurrent=!1,t)return void(this.reloadCurrentTimeout=setTimeout(this.fetchCurrent.bind(this),this.reloadDelay));this.eventBus.trigger("slide:change",parseInt(this.player.getXmlText("current_slide_id",e),10))}},{key:"showCurrent",value:function(e){var t=this.paths[this.currentSlide];if(void 0===t)return void(0===this.currentSlide?this.load(""):!0===e&&this.fetch());this.load(t)}}]),e}(),pn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),vn=function(){function e(t,n,r,i){if(de(this,e),this.player=t,this.logger=n,this.eventBus=r,this.reloadDelay=5e3,this.reconnectDelay=5e3,this.pingDelay=5e3,this.hasAddEventListener=!1,"function"!=typeof WebSocket)return this.reloadInterval=setInterval(this.onReload.bind(this),this.reloadDelay),void this.logger.error("WebSocket is not supported.");null!==i&&(this.address=this.player.getXmlText("address",i),this.port=this.player.getXmlText("port",i),this.item=this.player.getXmlText("item",i),this.init())}return pn(e,[{key:"isOpen",value:function(){return void 0!==this.ws&&this.ws.readyState===this.ws.OPEN}},{key:"attachListeners",value:function(){this.onOpenListener=this.onOpen.bind(this),this.onErrorListener=this.onError.bind(this),this.onCloseListener=this.onClose.bind(this),this.onMessageListener=this.onMessage.bind(this),this.hasAddEventListener="function"==typeof this.ws.addEventListener,this.hasAddEventListener?(this.ws.addEventListener("open",this.onOpenListener),this.ws.addEventListener("error",this.onErrorListener),this.ws.addEventListener("close",this.onCloseListener),this.ws.addEventListener("message",this.onMessageListener)):(this.ws.onopen=this.onOpenListener,this.ws.onerror=this.onErrorListener,this.ws.onclose=this.onCloseListener,this.ws.onmessage=this.onMessageListener)}},{key:"detachListeners",value:function(){this.hasAddEventListener?(this.ws.removeEventListener("open",this.onOpenListener),this.ws.removeEventListener("error",this.onErrorListener),this.ws.removeEventListener("close",this.onCloseListener),this.ws.removeEventListener("message",this.onMessageListener)):(this.ws.onopen=null,this.ws.onerror=null,this.ws.onclose=null,this.ws.onmessage=null)}},{key:"init",value:function(){var e="https:"===document.location.protocol?"wss://":"ws://",t=e+this.address+":"+this.port+"/";try{this.ws=new WebSocket(t)}catch(e){return this.reloadInterval=setInterval(this.onReload.bind(this),this.reloadDelay),void this.logger.error(e)}this.ws.binaryType="arraybuffer",this.attachListeners()}},{key:"reconnect",value:function(e){if(null!==e){var t=this.player.getXmlText("address",e),n=this.player.getXmlText("port",e);this.address===t&&this.port===n||(this.address=t,this.port=n,this.close(),this.init())}}},{key:"clearReconnectTimeout",value:function(){void 0!==this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),delete this.reconnectTimeout)}},{key:"clearReloadInterval",value:function(){void 0!==this.reloadInterval&&(clearInterval(this.reloadInterval),delete this.reloadInterval)}},{key:"clearPingInterval",value:function(){void 0!==this.pingInterval&&(clearInterval(this.pingInterval),delete this.pingInterval)}},{key:"onPing",value:function(){this.send({method:"ping",timestamp:(new Date).toUTCString()})}},{key:"onOpen",value:function(){this.logger.log("WebSocket opened."),this.send({method:"init",vid:this.item,rid:this.player.rid,timestamp:(new Date).toUTCString(),preview:this.player.preview}),void 0===this.pingInterval&&(this.pingInterval=setInterval(this.onPing.bind(this),this.pingDelay))}},{key:"onClose",value:function(e){var t="WebSocket server closed the connection.";e.reason&&(t+=" Reason "+e.reason+"."),this.logger.log(t),this.clearPingInterval(),void 0===this.reloadInterval&&(this.reloadInterval=setInterval(this.onReload.bind(this),this.reloadDelay)),this.reconnectTimeout=setTimeout(this.onReconnect.bind(this),this.reconnectDelay)}},{key:"onReload",value:function(){this.logger.log("WebSocket reloading"),this.player.reload(),this.isOpen()&&this.clearReloadInterval()}},{key:"onReconnect",value:function(){this.logger.log("WebSocket reconnecting"),this.init()}},{key:"onError",value:function(){this.logger.error("WebSocket error")}},{key:"onMessage",value:function(e){var t=e.data,n=null;this.logger.log("WebSocket received: "+t);try{n=JSON.parse(t)}catch(e){return void this.logger.error(e)}var r=n.method;"viewers"===r?this.player.setViewers(n.count):"reloadLiveOnly"===r||"reload"===r?this.player.reload():"changeSlide"===r&&this.eventBus.trigger("slide:change",n.id)}},{key:"send",value:function(e,t){if(!1!==t&&this.logger.log("WebSocket send: "+JSON.stringify(e)),!this.isOpen())return void this.logger.log("WebSocket currently not active");try{this.ws.send(JSON.stringify(e))}catch(e){this.logger.error(e.message)}}},{key:"close",value:function(){if(this.clearReloadInterval(),void 0!==this.ws){this.logger.log("Closing WebSocket"),this.clearReconnectTimeout(),this.clearPingInterval(),this.detachListeners();try{this.ws.close()}catch(e){this.logger.error(e.message)}}}},{key:"destroy",value:function(){this.logger.log("Destroying WebSocket"),this.close(),delete this.ws,delete this.player,delete this.logger,delete this.eventBus}}]),e}(),yn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),gn={DEFAULT:["video-js","vjs-default-skin","vjs-svp-skin","vjs-big-play-centered"],VOLUME_INLINE:"vjs-menu-button-inline",VOLUME_POPUP:"vjs-menu-button-popup",VOLUME_BUTTON_VERTICAL:"vjs-volume-menu-button-vertical",VOLUME_BUTTON_HORIZONTAL:"vjs-volume-menu-button-horizontal",VOLUME_SLIDER_VERTICAL:"vjs-slider-vertical",VOLUME_SLIDER_HORIZONTAL:"vjs-slider-horizontal",NATIVE_HLS:"vjs-native-hls",SEEKING:"vjs-seeking",STRETCH:"vjs-svp-stretch",PPV:"vjs-svp-ppv",LIVE_PPV:"vjs-immediate-live-ppv",TRIAL:"vjs-svp-trial",LOGO:"vjs-svp-logo",NO_HIDE_CONTROLS:"vjs-no-hide-controls",ANIMATION_PLAY:"svp-play-animation",ANIMATION_PAUSE:"svp-pause-animation",VIDEO_POSTER:"vjs-svp-video-poster"},mn={TL:"TL",TR:"TR",BL:"BL",BR:"BR"},bn=function(){function e(t){pe(this,e),this.options=Jt.parse(t),this.logger=new Ut(this.options.debug),this.eventBus=new Vt(this,this.logger),this.xmlEvents=new Kt(this,this.logger,this.eventBus),this.errorHandler=new Xt(this,this.logger,this.eventBus),this.service=new en(this.logger,this.options.servicesEntry),this.ppv=null,this.downloader=null,this.ga=null,this.subtitles=null,this.slides=null,this.websocketClient=null,this.nativeHls=void 0===window.MediaSource,this.useCustomUrl=this.options.useCustomUrl,this.useCustomPoster=this.options.useCustomPoster,this.url=null,this.lastUrl=null,this.vastUrl=null,this.restart=!1,this.locked=!1,this.hasPlayed=!1,this.ppvWasPlaying=!1,this.delayedPlay=!1,this.isPlayerReady=!1,this.isInfoReady=!1,this.isReady=!1,this.isReloading=!1,this.stackedReloading=!1,this.hlsReady=!1,this.hlsLoading=!1,this.currentSecond=0,this.seekTo=0,this.changePlaybackRateTo=0,this.isOffline=!1,this.isDisabled=!1,this.isLive=!1,this.immediateLivePpv=!1,this.immediateVodPpv=!1,this.isStarted=!1,this.isDestroyed=!1,this.canPlay=!1,this.timeUpdated=!1,this.isCompleted=!1,this.isStopping=!1,this.adShown=!1,this.isResized=!1,this.usageInserted=!1,this.changeAutoPlay=!1,this.ppvCode="",this.ppvHash=null,this.errorMessage="",this.reloadXMLDelay=5e3,this.recoveryDelay=5e3,this.completeDelay=500,this.stopDelay=250,this.clipId=this.options.clipId,this.rid=this.options.rid,this.isPreview=this.options.preview,this.preview=this.isPreview?"1":"0",this.onPlay=this.handlePlay.bind(this),this.onEnded=this.handleEnded.bind(this),this.onSeeking=this.handleSeeking.bind(this),this.onSeeked=this.handleSeeked.bind(this),this.onTimeUpdate=this.updateTime.bind(this),this.onPlaybackRateChange=this.playbackRateChange.bind(this),this.onLoadedMetaData=this.loadedMetaData.bind(this),this.onReconnect=this.handleReconnect.bind(this),this.onHlsReady=this.handleHlsReady.bind(this),this.onHlsMediaError=this.handleHlsMediaError.bind(this),this.onDebug=this.handleDebug.bind(this),this.onPlayAnimation=this.startPlayAnimation.bind(this),this.onPauseAnimation=this.startPauseAnimation.bind(this),this.onDownloadClick=this.startDownload.bind(this),this.onAdLoaded=this.handleAdLoaded.bind(this),this.onAdStarted=this.handleAdStarted.bind(this),this.onAdCompleted=this.handleAdCompleted.bind(this),this.onAnimationIconSoundClickListener=this.onAnimationIconSoundClick.bind(this),this.eventBus.addEventListener("ppv-init",this.initPPV,this),this.eventBus.addEventListener("ppv-destroy",this.destroyPPV,this),this.eventBus.addEventListener("download-init",this.initDownloader,this),this.eventBus.addEventListener("download-destroy",this.destroyDownloader,this),this.eventBus.addEventListener("ga-init",this.initGa,this),this.eventBus.addEventListener("ga-destroy",this.destroyGa,this),this.eventBus.addEventListener("resize-init",this.changePlayerSize,this),this.build(),this.loadVideo(this.clipId,!0)}return yn(e,[{key:"destroy",value:function(){this.isDestroyed=!0,this.removeClickListener(),this.removeVideoClickListener(),this.removeVideoFirstClickListener(),this.removeOfflineListeners(),this.destroyPlugins(),this.clearTimeouts(),this.player.off("play",this.onPlay),this.player.off("ended",this.onEnded),this.player.off("seeking",this.onSeeking),this.player.off("seeked",this.onSeeked),this.player.off("timeupdate",this.onTimeUpdate),this.player.off("ratechange",this.onPlaybackRateChange),this.player.off("loadedmetadata",this.onLoadedMetaData),this.player.off("reconnect",this.onReconnect),this.player.off("hls-ready",this.onHlsReady),this.player.off("hls-media-error",this.onHlsMediaError),this.player.off("debug",this.onDebug),this.player.off("play-animation",this.onPlayAnimation),this.player.off("pause-animation",this.onPauseAnimation),this.player.off("download-start",this.onDownloadClick),this.player.off("ad-loaded",this.onAdLoaded),this.player.off("ad-started",this.onAdStarted),this.player.off("ad-completed",this.onAdCompleted),this.soundNoControlsElement.removeEventListener("click",this.onAnimationIconSoundClickListener),this.eventBus.trigger("destroy"),this.errorHandler.destroy(),this.player.dispose(),this.xmlEvents.destroy(),this.service.destroy(),this.eventBus.destroy(),this.logger.log("Destroyed"),this.logger.destroy(),delete this.logger,delete this.eventBus,delete this.xmlEvents,delete this.errorHandler,delete this.player,delete this.video,delete this.element,delete this.soundNoControlsElement,delete this.service}},{key:"addEventListener",value:function(e,t){this.eventBus.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.eventBus.removeEventListener(e,t)}},{key:"loadFlash",value:function(){this.eventBus.trigger("flash:load")}},{key:"initPlugins",value:function(){this.isPreview||this.updateBrand(),this.updatePlayButton(),this.initSubtitles(),this.initSlides(),this.initWebSocket()}},{key:"initDownloader",value:function(){null===this.downloader&&(this.downloader=new on(this,this.logger,this.eventBus,this.options.servicesEntry,this.options.confirmEntry))}},{key:"showDownloadButton",value:function(){this.player.trigger("download-show")}},{key:"hideDownloadButton",value:function(){this.player.trigger("download-hide")}},{key:"startDownload",value:function(){this.downloader.start()}},{key:"destroyDownloader",value:function(e){null!==this.downloader&&(void 0!==e&&this.eventBus.trigger("DOWNLOAD.DESTROY"),this.downloader.destroy(),this.downloader=null)}},{key:"shouldPPVTrigger",value:function(e){return e?this.locked||this.isOffline||this.ppv.delay>0&&this.currentTime()>=this.ppv.delay:this.canPlay&&!this.isLive&&!this.isStopping&&!this.currentTime()&&""!==this.ppvCode}},{key:"checkImmediatePPV",value:function(){this.canPlay||0!==this.ppv.delay||(this.immediateLivePpv=this.isLive,this.immediateVodPpv=!this.isLive),(this.immediateLivePpv||this.immediateVodPpv)&&(this.removeOfflineListeners(),this.addOfflineListeners(),this.immediateLivePpv&&this.element.classList.add(gn.LIVE_PPV),(this.options.autoplay&&""===this.ppvCode||this.isOffline||this.delayedPlay)&&this.handleOfflineClick())}},{key:"initPPV",value:function(e,t){if(this.canPlay||this.seekTo||(this.ppvWasPlaying=this.isPlaying(),this.seekTo=this.currentTime()),null!==this.ppv)return this.ppvHash!==t.hash&&(this.eventBus.trigger("PPV.DESTROY"),this.ppvHash=t.hash),this.ppv.refresh(e,t),void this.checkImmediatePPV();this.ppvHash=t.hash,this.ppv=new un(this,this.eventBus,this.logger,this.options.confirmEntry),this.ppv.init(e,t),this.element.classList.add(gn.PPV),this.checkImmediatePPV()}},{key:"onFullscreenChange",value:function(){this.player.off("fullscreenchange",this.handleFullscreenChange),this.exitFullscreenCallback()}},{key:"exitFullscreen",value:function(e){this.exitFullscreenCallback=e,this.handleFullscreenChange=this.onFullscreenChange.bind(this),this.player.on("fullscreenchange",this.handleFullscreenChange),this.player.exitFullscreen()}},{key:"shouldInsertUsage",value:function(e,t){return e?""!==t&&t!==this.ppvCode:this.hasPlayed&&!this.usageInserted}},{key:"hasControls",value:function(){return!(void 0!==this.videoPoster&&!this.options.videoPosterFollowControls)&&this.options.controls}},{key:"onPPVShow",value:function(e){if(this.stopLoad(),this.isPlaying()||this.player.hasStarted(!1),this.hasControls()&&this.controls(!1),this.player.isFullscreen())return void this.exitFullscreen(e);e()}},{key:"onPPVPaid",value:function(e,t){if(this.ppvCode=e,void 0!==t&&(this.fetchExtraData={ticket_data:t}),this.hasPlayed&&(this.usageInserted=!0),this.destroyPPV("ppv-paid"),!this.isDisabled&&!this.canPlay&&this.immediateVodPpv)return void this.reload();this.isLive||this.eventBus.trigger("download-init"),this.setAdsUrl()}},{key:"onPPVOpen",value:function(){this.locked=!0}},{key:"onPPVClose",value:function(e){this.locked=!1,this.canPlay||(this.hasPlayed=!1),void 0===e||this.currentTime()||(this.pause(),this.player.hasStarted(!1)),this.hasControls()&&this.controls(!0)}},{key:"destroyPPV",value:function(e){if(null!==this.ppv){this.element.classList.remove(gn.PPV),(this.immediateLivePpv||this.immediateVodPpv)&&(this.removeOfflineListeners(),this.immediateLivePpv&&this.element.classList.remove(gn.LIVE_PPV));var t=this.locked;this.ppv.destroy(),this.ppv=null,this.onPPVClose(),void 0!==e&&("ppv-paid"!==e&&this.eventBus.trigger("PPV.DESTROY"),"video:change"!==e&&(this.immediateLivePpv?this.canPlay?this.startLoad():this.setOffline():t&&!this.isDisabled&&this.canPlay&&(!this.hlsLoading&&this.isLive&&this.currentTime()>0?this.resetSource():this.startLoad())))}}},{key:"processPPV",value:function(e){null!==this.ppv&&this.ppv.process(e)}},{key:"addOfflineListeners",value:function(){this.isLive||(this.onOfflineClick=this.handleOfflineClick.bind(this),this.player.tech_.on("click",this.onOfflineClick),this.player.tech_.on("touchend",this.onOfflineClick),this.player.posterImage.on("click",this.onOfflineClick),this.player.posterImage.on("touchend",this.onOfflineClick),this.player.bigPlayButton.on("click",this.onOfflineClick),this.player.bigPlayButton.on("touchend",this.onOfflineClick),this.player.controlBar.playToggle.on("click",this.onOfflineClick),this.player.controlBar.playToggle.on("touchend",this.onOfflineClick));var e=this.element.querySelector(".vjs-offline-holder");null!==e&&(this.offlineHolder=e,void 0===this.onOfflineClick&&(this.onOfflineClick=this.handleOfflineClick.bind(this)),this.offlineHolder.addEventListener("click",this.onOfflineClick),this.offlineHolder.addEventListener("touchend",this.onOfflineClick))}},{key:"removeOfflineListeners",value:function(){void 0!==this.onOfflineClick&&(this.isLive||(this.player.tech_.off("click",this.onOfflineClick),this.player.tech_.off("touchend",this.onOfflineClick),this.player.posterImage.off("click",this.onOfflineClick),this.player.posterImage.off("touchend",this.onOfflineClick),this.player.bigPlayButton.off("click",this.onOfflineClick),this.player.bigPlayButton.off("touchend",this.onOfflineClick),this.player.controlBar.playToggle.off("click",this.onOfflineClick),this.player.controlBar.playToggle.off("touchend",this.onOfflineClick)),void 0!==this.offlineHolder&&(this.offlineHolder.removeEventListener("click",this.onOfflineClick),this.offlineHolder.removeEventListener("touchend",this.onOfflineClick),delete this.offlineHolder),delete this.onOfflineClick)}},{key:"initGa",value:function(e,t){null===this.ga&&(this.ga=t)}},{key:"destroyGa",value:function(){this.ga=null}},{key:"onPlayerReady",value:function(){this.logger.log("Player is ready");var e=document.getElementById(this.videoId);this.element=this.player.el(),null!==e&&e!==this.video&&(this.video=e),this.appendIcon(),this.togglePlayButton(this.options.playButton),this.togglePlayButtonStyle(this.options.playButtonStyle),this.appendAnimatedPlayPause(),this.appendSoundAnimation(),this.isPlayerReady=!0,this.player.on("play",this.onPlay),this.player.on("ended",this.onEnded),this.player.on("seeking",this.onSeeking),this.player.on("seeked",this.onSeeked),this.player.on("timeupdate",this.onTimeUpdate),this.player.on("ratechange",this.onPlaybackRateChange),this.player.on("loadedmetadata",this.onLoadedMetaData),this.player.on("reconnect",this.onReconnect),this.player.on("hls-ready",this.onHlsReady),this.player.on("hls-media-error",this.onHlsMediaError),this.player.on("debug",this.onDebug),this.player.on("play-animation",this.onPlayAnimation),this.player.on("pause-animation",this.onPauseAnimation),this.player.on("download-start",this.onDownloadClick),this.player.on("ad-loaded",this.onAdLoaded),this.player.on("ad-started",this.onAdStarted),this.player.on("ad-completed",this.onAdCompleted),this.soundNoControlsElement.addEventListener("click",this.onAnimationIconSoundClickListener),this.eventBus.trigger("player:ready"),""!==this.errorMessage?(this.eventBus.trigger("info:ready",this.xml),this.eventBus.trigger("ready"),this.errorHandler.set(this.errorMessage),this.errorMessage=""):this.isStopping?this.resetVideo():this.isInfoReady&&this.onReady(),this.isStopping=!1}},{key:"onAnimationIconSoundClick",value:function(){this.player.muted(!this.player.muted())}},{key:"volumeControl",value:function(){var e=this.player.getChild("controlBar").getChild("volumeMenuButton"),t=e.volumeBar;e.volumeBar.vertical(this.isResized),t.volumeLevel.height((this.isResized?this.volume():100)+"%"),t.volumeLevel.width((this.isResized?100:this.volume())+"%"),e.toggleClass(gn.VOLUME_INLINE,!this.isResized),e.toggleClass(gn.VOLUME_BUTTON_HORIZONTAL,!this.isResized),e.toggleClass(gn.VOLUME_POPUP,this.isResized),e.toggleClass(gn.VOLUME_BUTTON_VERTICAL,this.isResized),t.toggleClass(gn.VOLUME_SLIDER_VERTICAL,this.isResized),t.toggleClass(gn.VOLUME_SLIDER_HORIZONTAL,!this.isResized)}},{key:"changePlayerSize",value:function(e,t){this.isResized=t,this.volumeControl()}},{key:"onInfoReady",value:function(){this.logger.log("Info is loaded"),this.setData(),this.isInfoReady=!0,this.eventBus.trigger("info:ready",this.xml),this.isPlayerReady&&this.onReady()}},{key:"onReady",value:function(){if(this.logger.log("Ready"),"1"===this.getXmlText("trial")&&this.element.classList.add(gn.TRIAL),this.eventBus.trigger("collect-xml-events"),this.canPlay){if(!this.prepareSource(!0))return}else this.setPoster();this.isLive?this.duration(1/0):this.duration(this.getXmlText("duration")),this.player.trigger("timeupdate"),this.player.trigger("progress"),this.initPlaybackRate(),this.initPlugins(),this.options.controls?this.options.autoHideControls?this.poster||this.addVideoFirstClickListener():(this.element.classList.add(gn.NO_HIDE_CONTROLS),this.addVideoClickListener()):this.addClickListener(),this.nativeHls&&this.element.classList.add(gn.NATIVE_HLS),this.volume(this.options.volume),this.isReady=!0,this.eventBus.trigger("ready"),this.setAdsUrl();var e=this.ga;null!==e&&this.eventBus.trigger(e.code,e.params),this.changeAutoPlay&&(this.changeAutoPlay=!1,this.options.autoplay=!0,this.player.autoplay(!0)),this.delayedPlay&&(this.canPlay&&this.play(),this.delayedPlay=!1)}},{key:"build",value:function(){var e=this;this.isPlayerReady||("undefined"!=typeof Raven&&Raven.setExtraContext({options:this.options}),this.changeAutoPlay=this.isStopping&&this.options.autoplay,this.changeAutoPlay&&(this.options.autoplay=!1),this.logger.log("Initializing Video.js"),this.createVideo(),this.player=ge()(this.video,this.options),this.player.ready(function(){return e.onPlayerReady()}))}},{key:"hasShareOptions",value:function(){return this.options.allowedShareOptions.indexOf(Number(this.options.shareOptions))>-1}},{key:"getXmlNodes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===t&&(t=this.xml),null===t?[]:t.querySelectorAll(e)}},{key:"getXmlNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===t&&(t=this.xml),null===t?null:t.querySelector(e)}},{key:"getXmlText",value:function(e,t){var n=this.getXmlNode(e,t);return null===n?null:n.textContent}},{key:"getClassName",value:function(){var e=gn.DEFAULT.slice();return this.options.stretch&&e.push(gn.STRETCH),e.join(" ")}},{key:"createVideo",value:function(){this.logger.log("Creating video element");var e=this.options.containerId,t="svp_"+e,n=document.getElementById(e),r=document.createElement("video");r.setAttribute("playsinline",""),this.nativeHls&&r.setAttribute("crossorigin","anonymous"),r.id=t,r.className=this.getClassName(),n.appendChild(r),this.videoId=t+"_html5_api",this.logger.log("Video element created"),this.video=r}},{key:"fetchInfo",value:function(e){if(this.useCustomUrl)return void this.onFetchComplete(!0,null,null);this.logger.log("Fetching clip info: "+this.clipId);var t=this.options.params,n={l:"info",a:"xmlClipPath",page_url:this.options.page,clip_id:this.clipId,version:"5",preview:this.preview,timezone_offset:60*(new Date).getTimezoneOffset()};if(!0===e&&(n.init=!0),void 0!==t)for(var r=t.split("&"),i=r.length,o=0;o<i;o++){var a=r[o].split("=");n[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}this.service.call({data:Object.assign(n,this.fetchExtraData),callback:this.onFetchComplete.bind(this,e)},!0)}},{key:"prepareSource",value:function(e){return this.setPoster(),this.setSource(e)}},{key:"setSource",value:function(e){this.logger.log("Loading source with url "+this.url);var t=this.url.endsWith(".m3u8");if(""===this.url)return this.setXmlError("No playback URL for clip "+this.clipId,e),!1;if(!this.useCustomUrl&&!t)return this.loadFlash(),!1;if(this.url===this.lastUrl)return!0;this.lastUrl=this.url,this.hlsReady=!1,this.nativeHls||(this.hlsLoading=!1);var n={type:t?"application/x-mpegURL":"",src:this.url};return this.player.src(n),this.eventBus.trigger("source:changed",n),!0}},{key:"resetSource",value:function(){this.lastUrl=null,this.restart=!0,this.setSource(),this.setPoster("")}},{key:"onVideoPosterReady",value:function(e){this.videoPoster.addClass(gn.VIDEO_POSTER),this.videoPoster.src(e),this.videoPoster.muted(!0),this.videoPoster.autoplay(!0),this.videoPoster.loop(!0),this.options.controls&&!this.options.videoPosterFollowControls&&(this.controls(!1),this.addClickListener())}},{key:"cleanVideoPoster",value:function(){void 0!==this.videoPoster&&(this.options.controls&&!this.options.videoPosterFollowControls&&(this.controls(!0),this.removeClickListener()),this.videoPoster.dispose(),delete this.videoPoster)}},{key:"getPoster",value:function(){if(this.useCustomPoster)return this.options.customPoster;var e=this.getXmlText("clip_image");return this.isLive&&""===e?this.buildLivePoster():e}},{key:"setPoster",value:function(e){var t=this;if(void 0===e&&(e=this.poster),this.cleanVideoPoster(),/\.(?:mp4|m3u8)\b/.test(e)){var n=this.player.posterImage,r=document.createElement("video");return r.setAttribute("playsinline",""),n.el().appendChild(r),n.show(),this.videoPoster=ge()(r),void this.videoPoster.ready(function(){return t.onVideoPosterReady(e)})}this.player.poster(e)}},{key:"setData",value:function(){this.url=this.useCustomUrl?this.options.customUrl:this.getXmlText("url"),this.isLive=null!==this.getXmlNode("is_live"),this.vastUrl=this.getXmlText("vast"),this.poster=this.getPoster(),this.canPlay=""!==this.url,this.isLive?(this.isStarted="1"===this.getXmlText("is_started"),this.canPlay=this.canPlay&&(this.isStarted||this.isPreview),this.duration(1/0)):this.duration(this.getXmlText("duration")),this.canPlay||!this.isDisabled&&!this.isLive?this.unsetOffline():this.setOffline()}},{key:"setOffline",value:function(){var e=this.getXmlText("broadcast_off_title"),t=this.getXmlText("broadcast_off_subtitle"),n=this.getXmlText("countdown_seconds"),r={image:this.poster,heading:"",text:""};null===e||this.isPreview||(r.heading=e),null===t||this.isPreview||(r.text=t),null===n||this.isPreview||(r.countDownSeconds=n),this.stopLoad(),this.player.trigger("goOffline",r),this.isOffline=!0,this.hlsReady=!1,this.hasPlayed=!1,this.lastUrl=null}},{key:"unsetOffline",value:function(){this.isOffline&&(this.hasControls()&&this.controls(!0),this.player.trigger("offlineStreamUp"),this.isOffline=!1)}},{key:"buildLivePoster",value:function(){var e=this.options.livePosterOptions,t={width:"100%",height:"100%",offlineBackground:e.offlineDefaultBackground,offlineBox:""},n=e.posterSVG;for(var r in t)t.hasOwnProperty(r)&&(n=n.replace("%"+r+"%",t[r]));return"data:image/svg+xml;base64,"+btoa(n)}},{key:"reload",value:function(){if(this.isReloading)return void(this.stackedReloading=!0);this.isReloading=!0,this.fetchInfo(!1)}},{key:"checkReloadResponse",value:function(){var e=this.url,t=this.poster,n=this.isStarted;if(this.setData(),this.isInfoReady=!0,this.isReady=!0,this.eventBus.trigger("collect-xml-events"),this.setAdsUrl(),!this.canPlay)return this.errorHandler.hide(),void this.initPlugins();e!==this.url||n!==this.isStarted?(this.isPlaying()&&(this.restart=!this.nativeHls),this.prepareSource(!1),this.ppvWasPlaying&&!this.locked&&this.canPlay&&this.play()):t!==this.poster&&this.setPoster(),this.initPlugins()}},{key:"initWebSocket",value:function(){var e=this.getXmlNode("socket");return null===e?void this.destroyWebSocket():null!==this.websocketClient?void this.websocketClient.reconnect(e):void(this.websocketClient=new vn(this,this.logger,this.eventBus,e))}},{key:"destroyWebSocket",value:function(){null!==this.websocketClient&&(this.websocketClient.destroy(),this.websocketClient=null)}},{key:"initPlaybackRate",value:function(){this.isLive||this.player.trigger("addsettingsitem",["PlaybackRateMenuButton",{playbackRates:this.options.playbackRates}])}},{key:"destroyPlaybackRate",value:function(){null===this.player||this.isLive||this.player.trigger("disposesettingsitem","PlaybackRateMenuButton")}},{key:"initSlides",value:function(){return null!==this.getXmlNode("slides")||this.isLive?null!==this.slides?void this.slides.refresh():void(this.slides=new dn(this,this.logger,this.eventBus,this.options.servicesEntry)):void this.destroySlides()}},{key:"loadSlide",value:function(e){this.player.trigger("load-slide",e)}},{key:"destroySlides",value:function(){null!==this.slides&&(this.slides.destroy(),this.slides=null)}},{key:"initSubtitles",value:function(){return null===this.getXmlNode("subs")?void this.destroySubtitles():null!==this.subtitles?void this.subtitles.refresh():void(this.subtitles=new hn(this,this.logger))}},{key:"destroySubtitles",value:function(){null!==this.subtitles&&(this.subtitles.destroy(),this.subtitles=null)}},{key:"addCaptionsButton",value:function(){this.player.trigger("addsettingsitem",["CaptionsButton",{}])}},{key:"removeCaptionsButton",value:function(){this.player.trigger("disposesettingsitem","CaptionsButton")}},{key:"textTracks",value:function(){return this.player.textTracks()}},{key:"addSubtitlesTrack",value:function(e){return this.player.addRemoteTextTrack(e,!1)}},{key:"removeSubtitlesTrack",value:function(e){return this.player.removeRemoteTextTrack(e)}},{key:"startLoad",value:function(){null===this.player||this.hlsLoading||(this.hlsLoading=!0,this.nativeHls?this.setSource():this.player.trigger("hlsStartLoad",{isLive:this.isLive}),this.player.play())}},{key:"stopLoad",value:function(){if(null!==this.player)if(this.hlsLoading=!1,this.nativeHls){if(this.isStopping)return;this.seekTo||(this.seekTo=this.currentTime()),this.lastUrl=null,this.changePlaybackRateTo=this.player.playbackRate(),this.player.trigger("reset"),this.player.reset(),this.player.removeClass("vjs-waiting"),this.player.removeClass("vjs-playing"),this.player.addClass("vjs-paused"),this.player.playbackRate(this.changePlaybackRateTo),this.isLive&&this.duration(1/0),this.player.trigger("pause"),this.setPoster()}else this.pause(),this.player.trigger("hlsStopLoad")}},{key:"isPlaying",value:function(){return null!==this.player&&!this.player.paused()}},{key:"duration",value:function(e){return this.player.duration(e)}},{key:"setViewers",value:function(e){null!==this.player&&this.player.trigger("viewers",{viewers:e})}},{key:"setAdsUrl",value:function(){var e=this.vastUrl;null!==this.ppv&&0===this.ppv.delay&&(e=null),this.player.trigger("ads-url",{tag:e,autoplay:this.options.autoplay})}},{key:"addVideoFirstClickListener",value:function(){this.onVideoFirstClick=this.handleClick.bind(this),this.video.addEventListener("touchend",this.onVideoFirstClick)}},{key:"removeVideoFirstClickListener",value:function(){void 0!==this.onVideoFirstClick&&(this.video.removeEventListener("touchend",this.onVideoFirstClick),delete this.onVideoFirstClick)}},{key:"addVideoClickListener",value:function(){this.onVideoClick=this.handleClick.bind(this),this.video.addEventListener("touchend",this.onVideoClick)}},{key:"removeVideoClickListener",value:function(){void 0!==this.onVideoClick&&(this.video.removeEventListener("touchend",this.onVideoClick),delete this.onVideoClick)}},{key:"addClickListener",value:function(){this.onClick=this.handleClick.bind(this),this.element.addEventListener("click",this.onClick),this.element.addEventListener("touchend",this.onClick)}},{key:"removeClickListener",value:function(){void 0!==this.onClick&&(this.element.removeEventListener("click",this.onClick),this.element.removeEventListener("touchend",this.onClick),delete this.onClick)}},{key:"recoveryPlayer",value:function(){this.clearTimeout("recoveryTimeout"),""!==this.url&&(this.resetSource(),this.isLive||this.seek(this.currentSecond+1))}},{key:"clearTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){void 0!==this[e]&&(clearTimeout(this[e]),delete this[e])})},{key:"clearTimeouts",value:function(){this.clearTimeout("reloadXMLTimeout"),this.clearTimeout("recoveryTimeout"),this.clearTimeout("completeTimeout"),this.clearTimeout("stopTimeout"),this.clearTimeout("animationPlayTimeout"),this.clearTimeout("animationPauseTimeout")}},{key:"handleHlsReady",value:function(){this.hlsReady=!0,this.restart&&!this.locked&&(this.startLoad(),this.restart=!1)}},{key:"handleHlsMediaError",value:function(){this.isDestroyed||void 0!==this.recoveryTimeout||(this.recoveryTimeout=setTimeout(this.recoveryPlayer.bind(this),this.recoveryDelay))}},{key:"handleDebug",value:function(e,t){switch(t.type){case"log":this.logger.log(t.message);break;case"warn":this.logger.warn(t.message);break;case"error":this.logger.error(t.message)}}},{key:"handleClick",value:function(e){var t=e.target;t.parentElement!==this.soundNoControlsElement&&t!==this.soundNoControlsElement&&(this.isPlaying()?this.pause():this.play())}},{key:"handleOfflineClick",value:function(e){void 0!==e&&(this.hasPlayed=!0),this.ppv.trigger()}},{key:"handlePlay",value:function(){this.hasPlayed=!0,this.nativeHls&&(this.hlsLoading=!0),this.locked||(this.cleanVideoPoster(),null!==this.ppv&&this.currentTime()>=this.ppv.delay?(this.ppvWasPlaying=!0,this.stopLoad()):(this.removeVideoFirstClickListener(),this.hlsReady?this.startLoad():this.restart=!this.nativeHls,this.clearCompleted()),this.eventBus.trigger("play"))}},{key:"handleEnded",value:function(){if(!this.isCompleted)return null!==this.vastUrl?(this.clearTimeout("completeTimeout"),void(this.completeTimeout=setTimeout(this.setCompleted.bind(this),this.completeDelay))):void this.setCompleted()}},{key:"handleSeeking",value:function(){this.eventBus.trigger("seeking"),null!==this.ppv&&this.currentTime()>this.ppv.delay&&this.element.classList.remove(gn.SEEKING)}},{key:"handleSeeked",value:function(){this.eventBus.trigger("seeked")}},{key:"handleAdLoaded",value:function(){this.setPoster()}},{key:"handleAdStarted",value:function(e,t){t&&(this.adShown=!0)}},{key:"handleAdCompleted",value:function(){this.adShown=!1,this.isCompleted&&this.setCompleted()}},{key:"clearCompleted",value:function(){this.isCompleted&&(this.player.trigger("completed",!1),this.isCompleted=!1)}},{key:"setCompleted",value:function(){var e=this;if(this.isCompleted=!0,!this.adShown)return null!==this.vastUrl&&this.player.isFullscreen()?void this.exitFullscreen(function(){e.fireCompleted()}):void this.fireCompleted()}},{key:"fireCompleted",value:function(){this.player.trigger("completed",!0),this.stopTimeout=setTimeout(this.stop.bind(this),this.stopDelay)}},{key:"updateTime",value:function(){if(this.isReady){if(!this.timeUpdated&&this.isPlaying()&&("-1"!==this.getXmlText("video_codec")&&this.setPoster(""),this.timeUpdated=!0),this.hasPlayed&&this.canPlay&&this.seekTo)return this.seek(this.seekTo),void(this.seekTo=0);var e=Math.floor(this.currentTime());e!==this.currentSecond&&(this.currentSecond=e,this.eventBus.trigger("progress",e))}}},{key:"playbackRateChange",value:function(){this.canPlay||(this.changePlaybackRateTo=this.player.playbackRate())}},{key:"loadedMetaData",value:function(){0!==this.changePlaybackRateTo&&(this.player.playbackRate(this.changePlaybackRateTo),this.changePlaybackRateTo=0)}},{key:"handleReconnect",value:function(){this.logger.log("Handle reconnect."),this.isLive&&this.resetSource()}},{key:"updateBrand",value:function(){var e=this.getXmlText("brand_logo"),t=this.getXmlText("brand_position"),n={type:""!==e?"image":"text",content:""!==e?e:this.getXmlText("brand_title"),destination:this.getXmlText("brand_link"),target:"_blank"};switch(t){case mn.TL:n.positionVertical="top",n.positionHorizontal="left";break;case mn.TR:n.positionVertical="top",n.positionHorizontal="right";break;case mn.BL:n.positionVertical="bottom",n.positionHorizontal="left";break;default:n.positionVertical="bottom",n.positionHorizontal="right"}this.player.trigger("setBrand",n)}},{key:"startPlayAnimation",value:function(){var e=this;this.player.removeClass(gn.ANIMATION_PAUSE),this.player.addClass(gn.ANIMATION_PLAY),this.animationPlayTimeout=setTimeout(function(){e.player.removeClass(gn.ANIMATION_PLAY)},300)}},{key:"startPauseAnimation",value:function(){var e=this;this.player.removeClass(gn.ANIMATION_PLAY),this.player.addClass(gn.ANIMATION_PAUSE),this.animationPauseTimeout=setTimeout(function(){e.player.removeClass(gn.ANIMATION_PAUSE)},300)}},{key:"createElement",value:function(e){var t=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=e;n.childNodes[0];)t.appendChild(n.childNodes[0]);return t}},{key:"appendIcon",value:function(){var e=this.createElement('<svg class="svp-logo svp-play"><use xlink:href="#svp-play"></use></svg>');this.player.bigPlayButton.el().appendChild(e)}},{key:"appendAnimatedPlayPause",value:function(){var e=this.createElement('<div class="svp-animated-play-pause"></div>');this.player.el().appendChild(e)}},{key:"updatePlayButton",value:function(){if(!!this.useCustomUrl||"1"===this.getXmlText("service"))return void this.element.classList.remove(gn.LOGO);this.element.classList.add(gn.LOGO)}},{key:"destroyPlugins",value:function(e){this.destroyDownloader(e),this.destroyPPV(e),this.destroySubtitles(),this.destroySlides(),this.destroyWebSocket(),this.destroyPlaybackRate()}},{key:"checkXmlResponse",value:function(){var e=this.getXmlNode("links");return null!==e&&e.hasChildNodes()&&null!==this.getXmlText("url")?"yes"!==this.getXmlText("allow")?this.getXmlText("reason"):"":"Video ID: "+this.clipId+" has been deleted!"}},{key:"onFetchComplete",value:function(e,t,n){if(null!==n)return this.logger.error("Fetch info error: "+n.message),e&&this.setXmlError(n.message,e),void(this.reloadXMLTimeout=setTimeout(this.fetchInfo.bind(this,e),this.reloadXMLDelay));if(this.isReloading=!1,this.isDisabled=!1,this.stackedReloading&&(this.stackedReloading=!1,this.reload()),this.xml=t,!this.useCustomUrl){var r=this.checkXmlResponse();if("The current clip is disabled!"===r)this.isDisabled=!0,this.seek(0);else if(""!==r)return this.url=null,this.lastUrl=null,this.poster="",this.setPoster(),this.setXmlError(r),void this.initWebSocket()}e?this.onInfoReady():this.checkReloadResponse(),this.hasShareOptions()&&this.player.trigger("video:change",{clipId:this.clipId,title:this.getXmlText("video_title"),image:this.poster})}},{key:"setXmlError",value:function(e,t){t?(this.errorHandler.set(e),this.eventBus.trigger("ready")):(this.errorMessage=e,this.isInfoReady=!1,this.isStopping=!0,this.loadVideo(this.clipId))}},{key:"setStretch",value:function(e){var t=e?"add":"remove";this.video.classList[t](gn.STRETCH),this.player.el().classList[t](gn.STRETCH)}},{key:"setAutoHide",value:function(e){this.player.userActive(!0),e?this.element.classList.remove(gn.NO_HIDE_CONTROLS):this.element.classList.add(gn.NO_HIDE_CONTROLS),this.player.userActive(!e)}},{key:"setMinViewers",value:function(e){this.player.trigger("min-viewers",{viewers:e})}},{key:"currentTime",value:function(e){return this.player.currentTime(e)}},{key:"resetVideo",value:function(){this.vastUrl=null,this.canPlay=!1,this.hasPlayed=!1,this.isInfoReady=!1,this.immediateVodPpv=!1,this.ppvCode="",this.fetchInfo(!0)}},{key:"loadVideo",value:function(e,t){0!==e&&""!==e&&(this.logger.log("Loading video "+e),this.clipId=e,this.eventBus.trigger("video:change"),this.player.trigger("download-hide"),!0!==t&&this.isReady&&(this.stopLoad(),this.setViewers(0),this.destroyPlugins("video:change"),this.removeClickListener(),this.removeVideoClickListener(),this.removeVideoFirstClickListener(),this.removeOfflineListeners(),this.unsetOffline(),this.clearTimeouts(),this.cleanVideoPoster(),this.element.classList.remove(gn.TRIAL)),"undefined"!=typeof Raven&&Raven.setTagsContext({clipId:e}),this.isStopping||null!==this.vastUrl?(this.isStopping=!0,this.isPlayerReady=!1,this.lastUrl=null,this.player.dispose(),this.build()):this.seek(0),this.isReady=!1,this.isReloading=!1,this.hlsReady=!1,this.hlsLoading=!1,this.usageInserted=!1,this.isOffline=!1,this.isDisabled=!1,this.timeUpdated=!1,this.adShown=!1,this.immediateLivePpv=!1,this.ppvWasPlaying=!1,this.delayedPlay=!1,this.currentSecond=0,this.seekTo=0,this.clearCompleted(),this.isStopping||this.resetVideo())}},{key:"setColors",value:function(e){this.player.trigger("setColors",e)}},{key:"play",value:function(){if(!this.isReady)return void(this.delayedPlay=!0);this.player.play()}},{key:"pause",value:function(){if(this.delayedPlay)return void(this.delayedPlay=!1);this.player.pause()}},{key:"stop",value:function(){if(null!==this.vastUrl||""!==this.ppvCode)return this.isStopping=!0,void this.loadVideo(this.clipId);this.stopLoad(),this.seek(0),this.clearCompleted(),this.player.hasStarted(!1),this.setPoster()}},{key:"muted",value:function(e){return this.player.muted(e)}},{key:"seek",value:function(e){this.currentTime(e),this.hasPlayed||this.player.trigger("timeupdate")}},{key:"volume",value:function(e){return void 0===e?100*this.player.volume():this.player.volume(isNaN(e)?1:e/100)}},{key:"controls",value:function(e){return this.player.controls(e)}},{key:"fullscreenButton",value:function(e){var t=this.player.getChild("controlBar").fullscreenToggle;void 0!==t&&(e?t.show():t.hide())}},{key:"togglePlayButton",value:function(e){var t=this.player.bigPlayButton.el();void 0!==t&&(e?t.classList.remove("force"):t.classList.add("force"))}},{key:"togglePlayButtonStyle",value:function(e){var t=this.player.bigPlayButton.el();void 0!==t&&("pulsing"===e?t.classList.add("pulsing"):t.classList.remove("pulsing"))}},{key:"appendSoundAnimation",value:function(){var e=document.getElementById("svp_holder");if(null!==e){for(var t="",n=1;n<=6;n++)t+='<div id="spike-'+n+'" class="spike"></div>';var r=document.createElement("div");r.setAttribute("id","sound-no-controls"),r.innerHTML='\n\t\t\t<div class="sound-icon"></div>\n\t\t\t<div class="spike-container">\n\t\t\t\t'+t+"\n\t\t\t</div>\n\t\t",this.soundNoControlsElement=r,e.appendChild(r)}}},{key:"closeButton",value:function(e){var t=e?"close-button-show":"close-button-hide";this.player.trigger(t)}}]),e}(),_n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),En=function(){function e(){ve(this,e),this.resizeTimeout=null,this.endingTime=0,this.endingTriggered=!1,this.isStartTriggered=!1,this.isInitialized=!1,this.isReady=!1,this.onMessageListener=this.onMessage.bind(this),this.onResizerListener=this.debounceResize.bind(this),window.addEventListener("message",this.onMessageListener,!1),this.sendMessage("init")}return _n(e,[{key:"debounceResize",value:function(){null!==this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(this.onResize.bind(this),200)}},{key:"destroy",value:function(){window.removeEventListener("message",this.onMessageListener),null!==this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),this.isReady&&(this.removeEvents(),this.removePlayerEvents(),this.player.destroy(),delete this.eventBus,delete this.logger,delete this.player),this.isReady=!1,this.sendMessage("destroy")}},{key:"initEvents",value:function(){this.eventBus.addEventListener("player:ready",this.onPlayerReady,this),this.eventBus.addEventListener("info:ready",this.onInfoReady,this),this.eventBus.addEventListener("ready",this.onReady,this),this.eventBus.addEventListener("source:changed",this.onSourceChange,this),this.eventBus.addEventListener("play",this.onPlay,this),this.eventBus.addEventListener("ppv",this.confirmPPV,this),this.eventBus.addEventListener("progress",this.onProgress,this),this.eventBus.addEventListener("flash:load",this.loadFlash,this),window.addEventListener("resize",this.onResizerListener)}},{key:"removeEvents",value:function(){this.eventBus.removeEventListener("player:ready",this.onPlayerReady),this.eventBus.removeEventListener("info:ready",this.onInfoReady),this.eventBus.removeEventListener("ready",this.onReady),this.eventBus.removeEventListener("source:changed",this.onSourceChange),this.eventBus.removeEventListener("play",this.onPlay),this.eventBus.removeEventListener("ppv",this.confirmPPV),this.eventBus.removeEventListener("progress",this.onProgress),this.eventBus.removeEventListener("flash:load",this.loadFlash),window.removeEventListener("resize",this.onResizerListener)}},{key:"initPlayerEvents",value:function(){this.onFullScreenChange=this.handleFullScreenChange.bind(this),this.onTimeUpdate=this.handleTimeUpdate.bind(this),this.onPlay=this.handlePlay.bind(this),this.onPause=this.handlePause.bind(this),this.onVolumeChange=this.handleVolumeChange.bind(this),this.onCompleted=this.handleCompleted.bind(this),this.onCloseButtonClick=this.handleCloseButtonClick.bind(this),this.player.player.on("fullscreenchange",this.onFullScreenChange),this.player.player.on("timeupdate",this.onTimeUpdate),this.player.player.on("play",this.onPlay),this.player.player.on("pause",this.onPause),this.player.player.on("volumechange",this.onVolumeChange),this.player.player.on("completed",this.onCompleted),this.player.player.on("close-button-click",this.onCloseButtonClick)}},{key:"removePlayerEvents",value:function(){this.player.player.off("fullscreenchange",this.onFullScreenChange),this.player.player.off("timeupdate",this.onTimeUpdate),this.player.player.off("play",this.onPlay),this.player.player.off("pause",this.onPause),this.player.player.off("volumechange",this.onVolumeChange),this.player.player.off("completed",this.onCompleted),this.player.player.off("close-button-click",this.onCloseButtonClick)}},{key:"onResize",value:function(){this.resizeTimeout=null,this.eventBus.trigger("resize-init",window.innerWidth<=360)}},{key:"sendMessage",value:function(e,t){void 0!==window.parent&&"function"==typeof window.parent.postMessage&&window.parent.postMessage({message:e,data:t},"*")}},{key:"onMessage",value:function(e){var t=e.message?"message":"data",n=e[t];if(void 0!==n){var r=n.message,i=n.data;e.source!==window&&this.processMessage(r,i)}}},{key:"processMessage",value:function(e,t){switch(e){case"init":this.init(t);break;case"seekToAndPlay":this.isReady&&this.seekToAndPlay(t);break;case"seekToAndPause":this.isReady&&this.seekToAndPause(t);break;case"setVolume":this.isReady&&this.setVolume(t);break;case"loadVideo":this.isReady&&this.loadVideo(t);break;case"registerJSEvent":this.isReady&&this.registerJSEvent(t.name,t.handler);break;case"executeCommand":this.isReady&&this.executeCommand(t);break;case"playerCommand":this.isReady&&this.playerCommand(t);break;case"destroy":this.destroy()}}},{key:"getVolume",value:function(){return this.player.muted()?0:this.player.volume()}},{key:"init",value:function(e){this.isInitialized||(e.containerId="holder",this.player=new bn(e),this.logger=this.player.logger,this.eventBus=this.player.eventBus,this.initEvents(),this.isInitialized=!0)}},{key:"onPlay",value:function(){this.player.isLive&&this.eventBus.trigger("LIVE.CONNECTED"),this.isStartTriggered||(this.isStartTriggered=!0,this.eventBus.trigger("PLAYHEAD.START"))}},{key:"handleFullScreenChange",value:function(){var e=this.player.player.isFullscreen()?"ENTER_FULLSCREEN":"CLOSE_FULLSCREEN";this.eventBus.trigger(e)}},{key:"handleTimeUpdate",value:function(){this.eventBus.trigger("PLAYHEAD.UPDATE")}},{key:"handleCompleted",value:function(e,t){this.player.isCompleted===t&&this.eventBus.trigger("PLAYHEAD.COMPLETE"),this.sendMessage("isComplete",t)}},{key:"handleCloseButtonClick",value:function(){this.sendMessage("closePlayer",{rid:this.player.rid})}},{key:"handlePlay",value:function(){this.sendMessage("isPlaying",!0)}},{key:"handlePause",value:function(){this.sendMessage("isPlaying",!1)}},{key:"handleVolumeChange",value:function(){this.sendMessage("volume",this.getVolume())}},{key:"onProgress",value:function(){if(this.sendMessage("currentSecond",this.player.currentSecond),this.player.currentSecond<=this.endingTime)return void(this.endingTriggered&&(this.endingTriggered=!1));this.endingTriggered||(this.endingTriggered=!0,this.eventBus.trigger("PLAYHEAD.ENDING"))}},{key:"onPlayerReady",value:function(){this.initPlayerEvents(),this.onResize()}},{key:"onInfoReady",value:function(){this.eventBus.trigger("PLAYER.INITIALIZED")}},{key:"onReady",value:function(){this.isReady=!0,this.sendMessage("ready",{isLive:this.player.isLive,duration:this.player.duration(),volume:this.getVolume()})}},{key:"fireEvent",value:function(e,t,n){this.sendMessage("fireEvent",{handler:e,event:t,data:n})}},{key:"registerJSEvent",value:function(e,t){this.eventBus.addEventListener(e,this.fireEvent.bind(this,t))}},{key:"confirmPPV",value:function(e,t){var n=encodeURIComponent(t.status)+":"+encodeURIComponent(t.params);"ok"!==t.status&&(n+=":"+t.message),this.logger.log("PPV confirmed:",n),this.eventBus.trigger("CONFIRM.RESULT",n),"ok"===t.status&&this.eventBus.trigger("ppv-paid",t.data)}},{key:"loadFlash",value:function(){this.sendMessage("reinitialize",!0)}},{key:"onSourceChange",value:function(){this.endingTime=.9*this.player.duration(),this.isStartTriggered=!1,this.endingTriggered=!1}},{key:"toggleAutoPlay",value:function(e){if(!0===e)return void this.playerCommand("play");this.stop()}},{key:"executeCommand",value:function(e){e=JSON.parse(e),this.logger.log("Executing command:",e);var t=e.value;switch(e.cmd){case"colorBase":this.player.setColors({base:t});break;case"colorHighlight":this.player.setColors({hover:t});break;case"colorIcon":this.player.setColors({text:t});break;case"skinAlpha":this.player.setColors({opacity:t/100});break;case"noControls":this.player.controls(!t);break;case"fs_mode":this.player.fullscreenButton(Boolean(t));break;case"autoHide":this.player.setAutoHide(Boolean(t));break;case"showCloseButton":this.player.closeButton(Boolean(t));break;case"autoPlay":this.toggleAutoPlay(Boolean(t));break;case"setViewersLimit":this.player.setMinViewers(t);break;case"repeatVideo":this.player.player.loop(Boolean(t));break;case"stretchVideo":this.player.setStretch(Boolean(t));break;case"playButton":this.player.togglePlayButton(Boolean(t));break;case"playButtonStyle":this.player.togglePlayButtonStyle(t)}}},{key:"playerCommand",value:function(e){if(this.logger.log("Executing command "+e),0===e.indexOf("confirm:PPV"))return void this.player.processPPV(e);switch(e){case"confirm:close":this.eventBus.trigger("ppv-close");break;case"play":this.player.play();break;case"pause":this.player.isLive||this.player.pause();break;case"stop":this.player.isLive||this.stop();break;case"toggle":this.toggle();break;case"adjust":this.eventBus.trigger("error","Error: playerCommand(adjust) is no longer used. Player make the adjustments automatically.");break;case"replay":this.replay();break;case"toggle_audio":this.toggleAudio();break;case"mute":this.mute();break;case"unmute":this.unMute()}}},{key:"stop",value:function(){this.player.stop()}},{key:"toggle",value:function(){if(this.player.isPlaying())return void this.player.pause();this.player.play()}},{key:"replay",value:function(){this.seekToAndPlay(0)}},{key:"toggleAudio",value:function(){if(this.player.muted())return void this.unMute();this.mute()}},{key:"mute",value:function(){this.player.muted(!0)}},{key:"unMute",value:function(){this.player.muted(!1)}},{key:"seekToAndPlay",value:function(e){this.player.seek(e),this.player.play()}},{key:"seekToAndPause",value:function(e){this.player.pause(),this.player.seek(e)}},{key:"setVolume",value:function(e){this.player.volume(e)}},{key:"loadVideo",value:function(e){this.player.loadVideo(e)}}]),e}(),kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tn=!1;if(1!==Object.getOwnPropertyNames({key:"value"}).length&&(Tn=!0,Object.getOwnPropertyNames=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),"undefined"!=typeof Raven){Raven.config("https://bdbe6baa4be9400182861dd4538d71f6@sentry.io/183102",{release:window.release,whitelistUrls:[/player\.js/,/ads\.js/]}).install();var wn=[];try{for(var Sn=navigator.plugins,Cn=Sn.length,On=0;On<Cn;On++){var Pn=Sn[On];Pn&&wn.push({name:Pn.name,description:Pn.description,filename:Pn.filename})}}catch(e){}var Rn=window.MediaSource||window.WebKitMediaSource;Raven.setExtraContext({appCodeName:navigator.appCodeName,appName:navigator.appName,appVersion:navigator.appVersion,userAgent:navigator.userAgent,vendor:navigator.vendor,platform:navigator.platform,product:navigator.product,language:navigator.language,cookieEnabled:navigator.cookieEnabled,plugins:wn,bugInOwnPropertyNames:Tn,mediaSource:kn(window.MediaSource),webkitMediaSource:kn(window.WebKitMediaSource),sourceBuffer:kn(window.SourceBuffer),webKitSourceBuffer:kn(window.WebKitSourceBuffer),isTypeSupported:Rn&&"function"==typeof Rn.isTypeSupported})}window.bridge=new En},function(e,t,n){n(202),n(398),n(69),n(400),n(171),n(401),n(402),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(410),e.exports=n(20)},function(e,t,n){n(203),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(143),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(282),n(283),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(118),n(306),n(155),n(307),n(156),n(308),n(309),n(310),n(311),n(312),n(159),n(161),n(162),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(377),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(392),n(393),n(394),n(395),n(396),n(397),e.exports=n(20)},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(3),o=n(25),a=n(9),s=n(0),l=n(27),u=n(47).KEY,c=n(4),h=n(66),f=n(61),d=n(53),p=n(6),v=n(139),y=n(100),g=n(205),m=n(79),b=n(2),_=n(5),E=n(16),k=n(22),T=n(36),w=n(45),S=n(41),C=n(142),O=n(28),P=n(78),R=n(14),L=n(40),A=O.f,x=R.f,D=C.f,I=i.Symbol,M=i.JSON,j=M&&M.stringify,N=p("_hidden"),F=p("toPrimitive"),B={}.propertyIsEnumerable,U=h("symbol-registry"),H=h("symbols"),V=h("op-symbols"),G=Object.prototype,W="function"==typeof I&&!!P.f,K=i.QObject,z=!K||!K.prototype||!K.prototype.findChild,X=a&&c(function(){return 7!=S(x({},"a",{get:function(){return x(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=A(G,t);r&&delete G[t],x(e,t,n),r&&e!==G&&x(G,t,r)}:x,q=function(e){var t=H[e]=S(I.prototype);return t._k=e,t},Y=W&&"symbol"==r(I.iterator)?function(e){return"symbol"==(void 0===e?"undefined":r(e))}:function(e){return e instanceof I},$=function(e,t,n){return e===G&&$(V,t,n),b(e),t=T(t,!0),b(n),o(H,t)?(n.enumerable?(o(e,N)&&e[N][t]&&(e[N][t]=!1),n=S(n,{enumerable:w(0,!1)})):(o(e,N)||x(e,N,w(1,{})),e[N][t]=!0),X(e,t,n)):x(e,t,n)},Q=function(e,t){b(e);for(var n,r=g(t=k(t)),i=0,o=r.length;o>i;)$(e,n=r[i++],t[n]);return e},J=function(e,t){return void 0===t?S(e):Q(S(e),t)},Z=function(e){var t=B.call(this,e=T(e,!0));return!(this===G&&o(H,e)&&!o(V,e))&&(!(t||!o(this,e)||!o(H,e)||o(this,N)&&this[N][e])||t)},ee=function(e,t){if(e=k(e),t=T(t,!0),e!==G||!o(H,t)||o(V,t)){var n=A(e,t);return!n||!o(H,t)||o(e,N)&&e[N][t]||(n.enumerable=!0),n}},te=function(e){for(var t,n=D(k(e)),r=[],i=0;n.length>i;)o(H,t=n[i++])||t==N||t==u||r.push(t);return r},ne=function(e){for(var t,n=e===G,r=D(n?V:k(e)),i=[],a=0;r.length>a;)!o(H,t=r[a++])||n&&!o(G,t)||i.push(H[t]);return i};W||(I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function t(n){this===G&&t.call(V,n),o(this,N)&&o(this[N],e)&&(this[N][e]=!1),X(this,e,w(1,n))};return a&&z&&X(G,e,{configurable:!0,set:t}),q(e)},l(I.prototype,"toString",function(){return this._k}),O.f=ee,R.f=$,n(55).f=C.f=te,n(68).f=Z,P.f=ne,a&&!n(46)&&l(G,"propertyIsEnumerable",Z,!0),v.f=function(e){return q(p(e))}),s(s.G+s.W+s.F*!W,{Symbol:I});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;re.length>ie;)p(re[ie++]);for(var oe=L(p.store),ae=0;oe.length>ae;)y(oe[ae++]);s(s.S+s.F*!W,"Symbol",{for:function(e){return o(U,e+="")?U[e]:U[e]=I(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in U)if(U[t]===e)return t},useSetter:function(){z=!0},useSimple:function(){z=!1}}),s(s.S+s.F*!W,"Object",{create:J,defineProperty:$,defineProperties:Q,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:ne});var se=c(function(){P.f(1)});s(s.S+s.F*se,"Object",{getOwnPropertySymbols:function(e){return P.f(E(e))}}),M&&s(s.S+s.F*(!W||c(function(){var e=I();return"[null]"!=j([e])||"{}"!=j({a:e})||"{}"!=j(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(_(t)||void 0!==e)&&!Y(e))return m(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Y(t))return t}),r[1]=t,j.apply(M,r)}}),I.prototype[F]||n(26)(I.prototype,F,I.prototype.valueOf),f(I,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},function(e,t,n){e.exports=n(66)("native-function-to-string",Function.toString)},function(e,t,n){var r=n(40),i=n(78),o=n(68);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),l=o.f,u=0;s.length>u;)l.call(e,a=s[u++])&&t.push(a);return t}},function(e,t,n){var r=n(0);r(r.S,"Object",{create:n(41)})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(9),"Object",{defineProperty:n(14).f})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(9),"Object",{defineProperties:n(141)})},function(e,t,n){var r=n(22),i=n(28).f;n(38)("getOwnPropertyDescriptor",function(){return function(e,t){return i(r(e),t)}})},function(e,t,n){var r=n(16),i=n(29);n(38)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t,n){var r=n(16),i=n(40);n(38)("keys",function(){return function(e){return i(r(e))}})},function(e,t,n){n(38)("getOwnPropertyNames",function(){return n(142).f})},function(e,t,n){var r=n(5),i=n(47).onFreeze;n(38)("freeze",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){var r=n(5),i=n(47).onFreeze;n(38)("seal",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){var r=n(5),i=n(47).onFreeze;n(38)("preventExtensions",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){var r=n(5);n(38)("isFrozen",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,n){var r=n(5);n(38)("isSealed",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,n){var r=n(5);n(38)("isExtensible",function(e){return function(t){return!!r(t)&&(!e||e(t))}})},function(e,t,n){var r=n(0);r(r.S,"Object",{is:n(144)})},function(e,t,n){var r=n(0);r(r.S,"Object",{setPrototypeOf:n(105).set})},function(e,t,n){"use strict";var r=n(48),i={};i[n(6)("toStringTag")]="z",i+""!="[object z]"&&n(27)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(e,t,n){var r=n(0);r(r.P,"Function",{bind:n(145)})},function(e,t,n){var r=n(14).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(9)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(5),i=n(29),o=n(6)("hasInstance"),a=Function.prototype;o in a||n(14).f(a,o,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var r=n(0),i=n(146);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(e,t,n){var r=n(0),i=n(147);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(e,t,n){"use strict";var r=n(3),i=n(25),o=n(33),a=n(108),s=n(36),l=n(4),u=n(55).f,c=n(28).f,h=n(14).f,f=n(62).trim,d=r.Number,p=d,v=d.prototype,y="Number"==o(n(41)(v)),g="trim"in String.prototype,m=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=g?t.trim():f(t,3);var n,r,i,o=t.charCodeAt(0);if(43===o||45===o){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var a,l=t.slice(2),u=0,c=l.length;u<c;u++)if((a=l.charCodeAt(u))<48||a>i)return NaN;return parseInt(l,r)}}return+t};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof d&&(y?l(function(){v.valueOf.call(n)}):"Number"!=o(n))?a(new p(m(t)),n,d):m(t)};for(var b,_=n(9)?u(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;_.length>E;E++)i(p,b=_[E])&&!i(d,b)&&h(d,b,c(p,b));d.prototype=v,v.constructor=d,n(27)(r,"Number",d)}},function(e,t,n){"use strict";var r=n(0),i=n(34),o=n(148),a=n(109),s=1..toFixed,l=Math.floor,u=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",h=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*u[n],u[n]=r%1e7,r=l(r/1e7)},f=function(e){for(var t=6,n=0;--t>=0;)n+=u[t],u[t]=l(n/e),n=n%e*1e7},d=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==u[e]){var n=String(u[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t},p=function e(t,n,r){return 0===n?r:n%2==1?e(t,n-1,r*t):e(t*t,n/2,r)},v=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(4)(function(){s.call({})})),"Number",{toFixed:function(e){var t,n,r,s,l=o(this,c),u=i(e),y="",g="0";if(u<0||u>20)throw RangeError(c);if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(y="-",l=-l),l>1e-21)if(t=v(l*p(2,69,1))-69,n=t<0?l*p(2,-t,1):l/p(2,t,1),n*=4503599627370496,(t=52-t)>0){for(h(0,n),r=u;r>=7;)h(1e7,0),r-=7;for(h(p(10,r,1),0),r=t-1;r>=23;)f(1<<23),r-=23;f(1<<r),h(1,1),f(2),g=d()}else h(0,n),h(1<<-t,0),g=d()+a.call("0",u);return u>0?(s=g.length,g=y+(s<=u?"0."+a.call("0",u-s)+g:g.slice(0,s-u)+"."+g.slice(s-u))):g=y+g,g}})},function(e,t,n){"use strict";var r=n(0),i=n(4),o=n(148),a=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,n){var r=n(0);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(0),i=n(3).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,n){var r=n(0);r(r.S,"Number",{isInteger:n(149)})},function(e,t,n){var r=n(0);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(0),i=n(149),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},function(e,t,n){var r=n(0);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(0);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(0),i=n(147);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,n){var r=n(0),i=n(146);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,n){var r=n(0),i=n(150),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},function(e,t,n){function r(e){return isFinite(e=+e)&&0!=e?e<0?-r(-e):Math.log(e+Math.sqrt(e*e+1)):e}var i=n(0),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:r})},function(e,t,n){var r=n(0),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(0),i=n(110);r(r.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(0),i=Math.exp;r(r.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,n){var r=n(0),i=n(111);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t,n){var r=n(0);r(r.S,"Math",{fround:n(151)})},function(e,t,n){var r=n(0),i=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,o=0,a=0,s=arguments.length,l=0;a<s;)n=i(arguments[a++]),l<n?(r=l/n,o=o*r*r+1,l=n):n>0?(r=n/l,o+=r*r):o+=n;return l===1/0?1/0:l*Math.sqrt(o)}})},function(e,t,n){var r=n(0),i=Math.imul;r(r.S+r.F*n(4)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var r=n(0);r(r.S,"Math",{log1p:n(150)})},function(e,t,n){var r=n(0);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(0);r(r.S,"Math",{sign:n(110)})},function(e,t,n){var r=n(0),i=n(111),o=Math.exp;r(r.S+r.F*n(4)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(0),i=n(111),o=Math.exp;r(r.S,"Math",{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},function(e,t,n){var r=n(0);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var r=n(0),i=n(54),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){var r=n(0),i=n(22),o=n(10);r(r.S,"String",{raw:function(e){for(var t=i(e.raw),n=o(t.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(t[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(e,t,n){"use strict";n(62)("trim",function(e){return function(){return e(this,3)}})},function(e,t,n){"use strict";var r=n(80)(!0);n(81)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){"use strict";var r=n(0),i=n(80)(!1);r(r.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(0),i=n(10),o=n(112),a="".endsWith;r(r.P+r.F*n(113)("endsWith"),"String",{endsWith:function(e){var t=o(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(t.length),s=void 0===n?r:Math.min(i(n),r),l=String(e);return a?a.call(t,l,s):t.slice(s-l.length,s)===l}})},function(e,t,n){"use strict";var r=n(0),i=n(112);r(r.P+r.F*n(113)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(0);r(r.P,"String",{repeat:n(109)})},function(e,t,n){"use strict";var r=n(0),i=n(10),o=n(112),a="".startsWith;r(r.P+r.F*n(113)("startsWith"),"String",{startsWith:function(e){var t=o(this,e,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return a?a.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";n(30)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,n){"use strict";n(30)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,n){"use strict";n(30)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,n){"use strict";n(30)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,n){"use strict";n(30)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,n){"use strict";n(30)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,n){"use strict";n(30)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,n){"use strict";n(30)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,n){"use strict";n(30)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,n){"use strict";n(30)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,n){"use strict";n(30)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,n){"use strict";n(30)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,n){"use strict";n(30)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,n){var r=n(0);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(0),i=n(16),o=n(36);r(r.P+r.F*n(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=i(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(0),i=n(281);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(e,t,n){"use strict";var r=n(4),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(e){return e>9?e:"0"+e};e.exports=r(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!r(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},function(e,t,n){var r=Date.prototype,i=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(27)(r,"toString",function(){var e=o.call(this);return e===e?i.call(this):"Invalid Date"})},function(e,t,n){var r=n(6)("toPrimitive"),i=Date.prototype;r in i||n(26)(i,r,n(284))},function(e,t,n){"use strict";var r=n(2),i=n(36);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(r(this),"number"!=e)}},function(e,t,n){var r=n(0);r(r.S,"Array",{isArray:n(79)})},function(e,t,n){"use strict";var r=n(32),i=n(0),o=n(16),a=n(152),s=n(114),l=n(10),u=n(115),c=n(69);i(i.S+i.F*!n(84)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,h,f=o(e),d="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,y=void 0!==v,g=0,m=c(f);if(y&&(v=r(v,p>2?arguments[2]:void 0,2)),void 0==m||d==Array&&s(m))for(t=l(f.length),n=new d(t);t>g;g++)u(n,g,y?v(f[g],g):f[g]);else for(h=m.call(f),n=new d;!(i=h.next()).done;g++)u(n,g,y?a(h,v,[i.value,g],!0):i.value);return n.length=g,n}})},function(e,t,n){"use strict";var r=n(0),i=n(115);r(r.S+r.F*n(4)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)i(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(0),i=n(22),o=[].join;r(r.P+r.F*(n(67)!=Object||!n(35)(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(0),i=n(103),o=n(33),a=n(54),s=n(10),l=[].slice;r(r.P+r.F*n(4)(function(){i&&l.call(i)}),"Array",{slice:function(e,t){var n=s(this.length),r=o(this);if(t=void 0===t?n:t,"Array"==r)return l.call(this,e,t);for(var i=a(e,n),u=a(t,n),c=s(u-i),h=new Array(c),f=0;f<c;f++)h[f]="String"==r?this.charAt(i+f):this[i+f];return h}})},function(e,t,n){"use strict";var r=n(0),i=n(18),o=n(16),a=n(4),s=[].sort,l=[1,2,3];r(r.P+r.F*(a(function(){l.sort(void 0)})||!a(function(){l.sort(null)})||!n(35)(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),i(e))}})},function(e,t,n){"use strict";var r=n(0),i=n(39)(0),o=n(35)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(5),i=n(79),o=n(6)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(0),i=n(39)(1);r(r.P+r.F*!n(35)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(39)(2);r(r.P+r.F*!n(35)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(39)(3);r(r.P+r.F*!n(35)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(39)(4);r(r.P+r.F*!n(35)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(153);r(r.P+r.F*!n(35)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(0),i=n(153);r(r.P+r.F*!n(35)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(0),i=n(77)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(35)(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(22),o=n(34),a=n(10),s=[].lastIndexOf,l=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(l||!n(35)(s)),"Array",{lastIndexOf:function(e){if(l)return s.apply(this,arguments)||0;var t=i(this),n=a(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){var r=n(0);r(r.P,"Array",{copyWithin:n(154)}),n(49)("copyWithin")},function(e,t,n){var r=n(0);r(r.P,"Array",{fill:n(117)}),n(49)("fill")},function(e,t,n){"use strict";var r=n(0),i=n(39)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(49)("find")},function(e,t,n){"use strict";var r=n(0),i=n(39)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(49)(o)},function(e,t,n){n(57)("Array")},function(e,t,n){var r=n(3),i=n(108),o=n(14).f,a=n(55).f,s=n(83),l=n(70),u=r.RegExp,c=u,h=u.prototype,f=/a/g,d=/a/g,p=new u(f)!==f;if(n(9)&&(!p||n(4)(function(){return d[n(6)("match")]=!1,u(f)!=f||u(d)==d||"/a/i"!=u(f,"i")}))){u=function(e,t){var n=this instanceof u,r=s(e),o=void 0===t;return!n&&r&&e.constructor===u&&o?e:i(p?new c(r&&!o?e.source:e,t):c((r=e instanceof u)?e.source:e,r&&o?l.call(e):t),n?this:h,u)};for(var v=a(c),y=0;v.length>y;)!function(e){e in u||o(u,e,{configurable:!0,get:function(){return c[e]},set:function(t){c[e]=t}})}(v[y++]);h.constructor=u,u.prototype=h,n(27)(r,"RegExp",u)}n(57)("RegExp")},function(e,t,n){"use strict";n(156);var r=n(2),i=n(70),o=n(9),a=/./.toString,s=function(e){n(27)(RegExp.prototype,"toString",e,!0)};n(4)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?s(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)}):"toString"!=a.name&&s(function(){return a.call(this)})},function(e,t,n){"use strict";var r=n(2),i=n(10),o=n(121),a=n(85);n(86)("match",1,function(e,t,n,s){return[function(n){var r=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=s(n,e,this);if(t.done)return t.value;var l=r(e),u=String(this);if(!l.global)return a(l,u);var c=l.unicode;l.lastIndex=0;for(var h,f=[],d=0;null!==(h=a(l,u));){var p=String(h[0]);f[d]=p,""===p&&(l.lastIndex=o(u,i(l.lastIndex),c)),d++}return 0===d?null:f}]})},function(e,t,n){"use strict";var r=n(2),i=n(16),o=n(10),a=n(34),s=n(121),l=n(85),u=Math.max,c=Math.min,h=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g,p=function(e){return void 0===e?e:String(e)};n(86)("replace",2,function(e,t,n,v){function y(e,t,r,o,a,s){var l=r+e.length,u=o.length,c=d;return void 0!==a&&(a=i(a),c=f),n.call(s,c,function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(l);case"<":s=a[i.slice(1,-1)];break;default:var c=+i;if(0===c)return n;if(c>u){var f=h(c/10);return 0===f?n:f<=u?void 0===o[f-1]?i.charAt(1):o[f-1]+i.charAt(1):n}s=o[c-1]}return void 0===s?"":s})}return[function(r,i){var o=e(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(e,t){var i=v(n,e,this,t);if(i.done)return i.value;var h=r(e),f=String(this),d="function"==typeof t;d||(t=String(t));var g=h.global;if(g){var m=h.unicode;h.lastIndex=0}for(var b=[];;){var _=l(h,f);if(null===_)break;if(b.push(_),!g)break;""===String(_[0])&&(h.lastIndex=s(f,o(h.lastIndex),m))}for(var E="",k=0,T=0;T<b.length;T++){_=b[T];for(var w=String(_[0]),S=u(c(a(_.index),f.length),0),C=[],O=1;O<_.length;O++)C.push(p(_[O]));var P=_.groups;if(d){var R=[w].concat(C,S,f);void 0!==P&&R.push(P);var L=String(t.apply(void 0,R))}else L=y(w,f,S,C,P,t);S>=k&&(E+=f.slice(k,S)+L,k=S+w.length)}return E+f.slice(k)}]})},function(e,t,n){"use strict";var r=n(2),i=n(144),o=n(85);n(86)("search",1,function(e,t,n,a){return[function(n){var r=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=a(n,e,this);if(t.done)return t.value;var s=r(e),l=String(this),u=s.lastIndex;i(u,0)||(s.lastIndex=0);var c=o(s,l);return i(s.lastIndex,u)||(s.lastIndex=u),null===c?-1:c.index}]})},function(e,t,n){"use strict";var r=n(83),i=n(2),o=n(71),a=n(121),s=n(10),l=n(85),u=n(120),c=n(4),h=Math.min,f=[].push,d="length",p=!c(function(){RegExp(4294967295,"y")});n(86)("split",2,function(e,t,n,c){var v;return v="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[d]||2!="ab".split(/(?:ab)*/)[d]||4!=".".split(/(.?)(.?)/)[d]||".".split(/()()/)[d]>1||"".split(/.?/)[d]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(i,e,t);for(var o,a,s,l=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,p=void 0===t?4294967295:t>>>0,v=new RegExp(e.source,c+"g");(o=u.call(v,i))&&!((a=v.lastIndex)>h&&(l.push(i.slice(h,o.index)),o[d]>1&&o.index<i[d]&&f.apply(l,o.slice(1)),s=o[0][d],h=a,l[d]>=p));)v.lastIndex===o.index&&v.lastIndex++;return h===i[d]?!s&&v.test("")||l.push(""):l.push(i.slice(h)),l[d]>p?l.slice(0,p):l}:"0".split(void 0,0)[d]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var i=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,i,r):v.call(String(i),n,r)},function(e,t){var r=c(v,e,this,t,v!==n);if(r.done)return r.value;var u=i(e),f=String(this),d=o(u,RegExp),y=u.unicode,g=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(p?"y":"g"),m=new d(p?u:"^(?:"+u.source+")",g),b=void 0===t?4294967295:t>>>0;if(0===b)return[];if(0===f.length)return null===l(m,f)?[f]:[];for(var _=0,E=0,k=[];E<f.length;){m.lastIndex=p?E:0;var T,w=l(m,p?f:f.slice(E));if(null===w||(T=h(s(m.lastIndex+(p?0:E)),f.length))===_)E=a(f,E,y);else{if(k.push(f.slice(_,E)),k.length===b)return k;for(var S=1;S<=w.length-1;S++)if(k.push(w[S]),k.length===b)return k;E=_=T}}return k.push(f.slice(_)),k}]})},function(e,t,n){"use strict";var r,i,o,a,s=n(46),l=n(3),u=n(32),c=n(48),h=n(0),f=n(5),d=n(18),p=n(58),v=n(50),y=n(71),g=n(122).set,m=n(123)(),b=n(124),_=n(157),E=n(87),k=n(158),T=l.TypeError,w=l.process,S=w&&w.versions,C=S&&S.v8||"",O=l.Promise,P="process"==c(w),R=function(){},L=i=b.f,A=!!function(){try{var e=O.resolve(1),t=(e.constructor={})[n(6)("species")]=function(e){e(R,R)};return(P||"function"==typeof PromiseRejectionEvent)&&e.then(R)instanceof t&&0!==C.indexOf("6.6")&&-1===E.indexOf("Chrome/66")}catch(e){}}(),x=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},D=function(e,t){if(!e._n){e._n=!0;var n=e._c;m(function(){for(var r=e._v,i=1==e._s,o=0;n.length>o;)!function(t){var n,o,a,s=i?t.ok:t.fail,l=t.resolve,u=t.reject,c=t.domain;try{s?(i||(2==e._h&&j(e),e._h=1),!0===s?n=r:(c&&c.enter(),n=s(r),c&&(c.exit(),a=!0)),n===t.promise?u(T("Promise-chain cycle")):(o=x(n))?o.call(n,l,u):l(n)):u(r)}catch(e){c&&!a&&c.exit(),u(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&I(e)})}},I=function(e){g.call(l,function(){var t,n,r,i=e._v,o=M(e);if(o&&(t=_(function(){P?w.emit("unhandledRejection",i,e):(n=l.onunhandledrejection)?n({promise:e,reason:i}):(r=l.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=P||M(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},M=function(e){return 1!==e._h&&0===(e._a||e._c).length},j=function(e){g.call(l,function(){var t;P?w.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},N=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},F=function e(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw T("Promise can't be resolved itself");(n=x(t))?m(function(){var i={_w:r,_d:!1};try{n.call(t,u(e,i,1),u(N,i,1))}catch(e){N.call(i,e)}}):(r._v=t,r._s=1,D(r,!1))}catch(e){N.call({_w:r,_d:!1},e)}}};A||(O=function(e){p(this,O,"Promise","_h"),d(e),r.call(this);try{e(u(F,this,1),u(N,this,1))}catch(e){N.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(59)(O.prototype,{then:function(e,t){var n=L(y(this,O));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=P?w.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=u(F,e,1),this.reject=u(N,e,1)},b.f=L=function(e){return e===O||e===a?new o(e):i(e)}),h(h.G+h.W+h.F*!A,{Promise:O}),n(61)(O,"Promise"),n(57)("Promise"),a=n(20).Promise,h(h.S+h.F*!A,"Promise",{reject:function(e){var t=L(this);return(0,t.reject)(e),t.promise}}),h(h.S+h.F*(s||!A),"Promise",{resolve:function(e){return k(s&&this===a?O:this,e)}}),h(h.S+h.F*!(A&&n(84)(function(e){O.all(e).catch(R)})),"Promise",{all:function(e){var t=this,n=L(t),r=n.resolve,i=n.reject,o=_(function(){var n=[],o=0,a=1;v(e,!1,function(e){var s=o++,l=!1;n.push(void 0),a++,t.resolve(e).then(function(e){l||(l=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=L(t),r=n.reject,i=_(function(){v(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(e,t,n){"use strict";var r=n(163),i=n(60);n(88)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"WeakSet"),e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(0),i=n(89),o=n(125),a=n(2),s=n(54),l=n(10),u=n(5),c=n(3).ArrayBuffer,h=n(71),f=o.ArrayBuffer,d=o.DataView,p=i.ABV&&c.isView,v=f.prototype.slice,y=i.VIEW;r(r.G+r.W+r.F*(c!==f),{ArrayBuffer:f}),r(r.S+r.F*!i.CONSTR,"ArrayBuffer",{isView:function(e){return p&&p(e)||u(e)&&y in e}}),r(r.P+r.U+r.F*n(4)(function(){return!new f(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(e,t){if(void 0!==v&&void 0===t)return v.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),i=s(void 0===t?n:t,n),o=new(h(this,f))(l(i-r)),u=new d(this),c=new d(o),p=0;r<i;)c.setUint8(p++,u.getUint8(r++));return o}}),n(57)("ArrayBuffer")},function(e,t,n){var r=n(0);r(r.G+r.W+r.F*!n(89).ABV,{DataView:n(125).DataView})},function(e,t,n){n(42)("Int8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(42)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(42)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}},!0)},function(e,t,n){n(42)("Int16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(42)("Uint16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(42)("Int32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(42)("Uint32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(42)("Float32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(42)("Float64",8,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){var r=n(0),i=n(18),o=n(2),a=(n(3).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(4)(function(){a(function(){})}),"Reflect",{apply:function(e,t,n){var r=i(e),l=o(n);return a?a(r,t,l):s.call(r,t,l)}})},function(e,t,n){var r=n(0),i=n(41),o=n(18),a=n(2),s=n(5),l=n(4),u=n(145),c=(n(3).Reflect||{}).construct,h=l(function(){function e(){}return!(c(function(){},[],e)instanceof e)}),f=!l(function(){c(function(){})});r(r.S+r.F*(h||f),"Reflect",{construct:function(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(f&&!h)return c(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(u.apply(e,r))}var l=n.prototype,d=i(s(l)?l:Object.prototype),p=Function.apply.call(e,d,t);return s(p)?p:d}})},function(e,t,n){var r=n(14),i=n(0),o=n(2),a=n(36);i(i.S+i.F*n(4)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){o(e),t=a(t,!0),o(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(0),i=n(28).f,o=n(2);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=i(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var r=n(0),i=n(2),o=function(e){this._t=i(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(82)(o,"Object",function(){var e,t=this,n=t._k;do{if(t._i>=n.length)return{value:void 0,done:!0}}while(!((e=n[t._i++])in t._t));return{value:e,done:!1}}),r(r.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,n){function r(e,t){var n,s,c=arguments.length<3?e:arguments[2];return u(e)===c?e[t]:(n=i.f(e,t))?a(n,"value")?n.value:void 0!==n.get?n.get.call(c):void 0:l(s=o(e))?r(s,t,c):void 0}var i=n(28),o=n(29),a=n(25),s=n(0),l=n(5),u=n(2);s(s.S,"Reflect",{get:r})},function(e,t,n){var r=n(28),i=n(0),o=n(2);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(o(e),t)}})},function(e,t,n){var r=n(0),i=n(29),o=n(2);r(r.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},function(e,t,n){var r=n(0);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var r=n(0),i=n(2),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},function(e,t,n){var r=n(0);r(r.S,"Reflect",{ownKeys:n(126)})},function(e,t,n){var r=n(0),i=n(2),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},function(e,t,n){function r(e,t,n){var l,f,d=arguments.length<4?e:arguments[3],p=o.f(c(e),t);if(!p){if(h(f=a(e)))return r(f,t,n,d);p=u(0)}if(s(p,"value")){if(!1===p.writable||!h(d))return!1;if(l=o.f(d,t)){if(l.get||l.set||!1===l.writable)return!1;l.value=n,i.f(d,t,l)}else i.f(d,t,u(0,n));return!0}return void 0!==p.set&&(p.set.call(d,n),!0)}var i=n(14),o=n(28),a=n(29),s=n(25),l=n(0),u=n(45),c=n(2),h=n(5);l(l.S,"Reflect",{set:r})},function(e,t,n){var r=n(0),i=n(105);i&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){"use strict";var r=n(0),i=n(77)(!0);r(r.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(49)("includes")},function(e,t,n){"use strict";var r=n(0),i=n(165),o=n(16),a=n(10),s=n(18),l=n(116);r(r.P,"Array",{flatMap:function(e){var t,n,r=o(this);return s(e),t=a(r.length),n=l(r,0),i(n,r,r,t,0,1,e,arguments[1]),n}}),n(49)("flatMap")},function(e,t,n){"use strict";var r=n(0),i=n(165),o=n(16),a=n(10),s=n(34),l=n(116);r(r.P,"Array",{flatten:function(){var e=arguments[0],t=o(this),n=a(t.length),r=l(t,0);return i(r,t,t,n,0,void 0===e?1:s(e)),r}}),n(49)("flatten")},function(e,t,n){"use strict";var r=n(0),i=n(80)(!0),o=n(4),a=o(function(){return"𠮷"!=="𠮷".at(0)});r(r.P+r.F*a,"String",{at:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(0),i=n(166),o=n(87),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){"use strict";var r=n(0),i=n(166),o=n(87),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){"use strict";n(62)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,n){"use strict";n(62)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,n){"use strict";var r=n(0),i=n(37),o=n(10),a=n(83),s=n(70),l=RegExp.prototype,u=function(e,t){this._r=e,this._s=t};n(82)(u,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),r(r.P,"String",{matchAll:function(e){if(i(this),!a(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in l?String(e.flags):s.call(e),r=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=o(e.lastIndex),new u(r,t)}})},function(e,t,n){n(100)("asyncIterator")},function(e,t,n){n(100)("observable")},function(e,t,n){var r=n(0),i=n(126),o=n(22),a=n(28),s=n(115);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),l=a.f,u=i(r),c={},h=0;u.length>h;)void 0!==(n=l(r,t=u[h++]))&&s(c,t,n);return c}})},function(e,t,n){var r=n(0),i=n(167)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){var r=n(0),i=n(167)(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},function(e,t,n){"use strict";var r=n(0),i=n(16),o=n(18),a=n(14);n(9)&&r(r.P+n(90),"Object",{__defineGetter__:function(e,t){a.f(i(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(0),i=n(16),o=n(18),a=n(14);n(9)&&r(r.P+n(90),"Object",{__defineSetter__:function(e,t){a.f(i(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(0),i=n(16),o=n(36),a=n(29),s=n(28).f;n(9)&&r(r.P+n(90),"Object",{__lookupGetter__:function(e){var t,n=i(this),r=o(e,!0);do{if(t=s(n,r))return t.get}while(n=a(n))}})},function(e,t,n){"use strict";var r=n(0),i=n(16),o=n(36),a=n(29),s=n(28).f;n(9)&&r(r.P+n(90),"Object",{__lookupSetter__:function(e){var t,n=i(this),r=o(e,!0);do{if(t=s(n,r))return t.set}while(n=a(n))}})},function(e,t,n){var r=n(0);r(r.P+r.R,"Map",{toJSON:n(168)("Map")})},function(e,t,n){var r=n(0);r(r.P+r.R,"Set",{toJSON:n(168)("Set")})},function(e,t,n){n(91)("Map")},function(e,t,n){n(91)("Set")},function(e,t,n){n(91)("WeakMap")},function(e,t,n){n(91)("WeakSet")},function(e,t,n){n(92)("Map")},function(e,t,n){n(92)("Set")},function(e,t,n){n(92)("WeakMap")},function(e,t,n){n(92)("WeakSet")},function(e,t,n){var r=n(0);r(r.G,{global:n(3)})},function(e,t,n){var r=n(0);r(r.S,"System",{global:n(3)})},function(e,t,n){var r=n(0),i=n(33);r(r.S,"Error",{isError:function(e){return"Error"===i(e)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{clamp:function(e,t,n){return Math.min(n,Math.max(t,e))}})},function(e,t,n){var r=n(0);r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(e,t,n){var r=n(0),i=180/Math.PI;r(r.S,"Math",{degrees:function(e){return e*i}})},function(e,t,n){var r=n(0),i=n(170),o=n(151);r(r.S,"Math",{fscale:function(e,t,n,r,a){return o(i(e,t,n,r,a))}})},function(e,t,n){var r=n(0);r(r.S,"Math",{iaddh:function(e,t,n,r){var i=e>>>0,o=t>>>0,a=n>>>0;return o+(r>>>0)+((i&a|(i|a)&~(i+a>>>0))>>>31)|0}})},function(e,t,n){var r=n(0);r(r.S,"Math",{isubh:function(e,t,n,r){var i=e>>>0,o=t>>>0,a=n>>>0;return o-(r>>>0)-((~i&a|~(i^a)&i-a>>>0)>>>31)|0}})},function(e,t,n){var r=n(0);r(r.S,"Math",{imulh:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r,a=n>>16,s=r>>16,l=(a*o>>>0)+(i*o>>>16);return a*s+(l>>16)+((i*s>>>0)+(65535&l)>>16)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(e,t,n){var r=n(0),i=Math.PI/180;r(r.S,"Math",{radians:function(e){return e*i}})},function(e,t,n){var r=n(0);r(r.S,"Math",{scale:n(170)})},function(e,t,n){var r=n(0);r(r.S,"Math",{umulh:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r,a=n>>>16,s=r>>>16,l=(a*o>>>0)+(i*o>>>16);return a*s+(l>>>16)+((i*s>>>0)+(65535&l)>>>16)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}})},function(e,t,n){"use strict";var r=n(0),i=n(20),o=n(3),a=n(71),s=n(158);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var r=n(0),i=n(124),o=n(157);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){var r=n(43),i=n(2),o=r.key,a=r.set;r.exp({defineMetadata:function(e,t,n,r){a(e,t,i(n),o(r))}})},function(e,t,n){var r=n(43),i=n(2),o=r.key,a=r.map,s=r.store;r.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:o(arguments[2]),r=a(i(t),n,!1);if(void 0===r||!r.delete(e))return!1;if(r.size)return!0;var l=s.get(t);return l.delete(n),!!l.size||s.delete(t)}})},function(e,t,n){var r=n(43),i=n(2),o=n(29),a=r.has,s=r.get,l=r.key,u=function e(t,n,r){if(a(t,n,r))return s(t,n,r);var i=o(n);return null!==i?e(t,i,r):void 0};r.exp({getMetadata:function(e,t){return u(e,i(t),arguments.length<3?void 0:l(arguments[2]))}})},function(e,t,n){var r=n(161),i=n(169),o=n(43),a=n(2),s=n(29),l=o.keys,u=o.key,c=function e(t,n){var o=l(t,n),a=s(t);if(null===a)return o;var u=e(a,n);return u.length?o.length?i(new r(o.concat(u))):u:o};o.exp({getMetadataKeys:function(e){return c(a(e),arguments.length<2?void 0:u(arguments[1]))}})},function(e,t,n){var r=n(43),i=n(2),o=r.get,a=r.key;r.exp({getOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var r=n(43),i=n(2),o=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(e){return o(i(e),arguments.length<2?void 0:a(arguments[1]))}})},function(e,t,n){var r=n(43),i=n(2),o=n(29),a=r.has,s=r.key,l=function e(t,n,r){if(a(t,n,r))return!0;var i=o(n);return null!==i&&e(t,i,r)};r.exp({hasMetadata:function(e,t){return l(e,i(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){var r=n(43),i=n(2),o=r.has,a=r.key;r.exp({hasOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var r=n(43),i=n(2),o=n(18),a=r.key,s=r.set;r.exp({metadata:function(e,t){return function(n,r){s(e,t,(void 0!==r?i:o)(n),a(r))}}})},function(e,t,n){var r=n(0),i=n(123)(),o=n(3).process,a="process"==n(33)(o);r(r.G,{asap:function(e){var t=a&&o.domain;i(t?t.bind(e):e)}})},function(e,t,n){"use strict";var r=n(0),i=n(3),o=n(20),a=n(123)(),s=n(6)("observable"),l=n(18),u=n(2),c=n(58),h=n(59),f=n(26),d=n(50),p=d.RETURN,v=function(e){return null==e?void 0:l(e)},y=function(e){var t=e._c;t&&(e._c=void 0,t())},g=function(e){return void 0===e._o},m=function(e){g(e)||(e._o=void 0,y(e))},b=function(e,t){u(e),this._c=void 0,this._o=e,e=new _(this);try{var n=t(e),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:l(n),this._c=n)}catch(t){return void e.error(t)}g(this)&&y(this)};b.prototype=h({},{unsubscribe:function(){m(this)}});var _=function(e){this._s=e};_.prototype=h({},{next:function(e){var t=this._s;if(!g(t)){var n=t._o;try{var r=v(n.next);if(r)return r.call(n,e)}catch(e){try{m(t)}finally{throw e}}}},error:function(e){var t=this._s;if(g(t))throw e;var n=t._o;t._o=void 0;try{var r=v(n.error);if(!r)throw e;e=r.call(n,e)}catch(e){try{y(t)}finally{throw e}}return y(t),e},complete:function(e){var t=this._s;if(!g(t)){var n=t._o;t._o=void 0;try{var r=v(n.complete);e=r?r.call(n,e):void 0}catch(e){try{y(t)}finally{throw e}}return y(t),e}}});var E=function(e){c(this,E,"Observable","_f")._f=l(e)};h(E.prototype,{subscribe:function(e){return new b(e,this._f)},forEach:function(e){var t=this;return new(o.Promise||i.Promise)(function(n,r){l(e);var i=t.subscribe({next:function(t){try{return e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:n})})}}),h(E,{from:function(e){var t="function"==typeof this?this:E,n=v(u(e)[s]);if(n){var r=u(n.call(e));return r.constructor===t?r:new t(function(e){return r.subscribe(e)})}return new t(function(t){var n=!1;return a(function(){if(!n){try{if(d(e,!1,function(e){if(t.next(e),n)return p})===p)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}}),function(){n=!0}})},of:function(){for(var e=0,t=arguments.length,n=new Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:E)(function(e){var t=!1;return a(function(){if(!t){for(var r=0;r<n.length;++r)if(e.next(n[r]),t)return;e.complete()}}),function(){t=!0}})}}),f(E.prototype,s,function(){return this}),r(r.G,{Observable:E}),n(57)("Observable")},function(e,t,n){var r=n(3),i=n(0),o=n(87),a=[].slice,s=/MSIE .\./.test(o),l=function(e){return function(t,n){var r=arguments.length>2,i=!!r&&a.call(arguments,2);return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};i(i.G+i.B+i.F*s,{setTimeout:l(r.setTimeout),setInterval:l(r.setInterval)})},function(e,t,n){var r=n(0),i=n(122);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,n){for(var r=n(118),i=n(40),o=n(27),a=n(3),s=n(26),l=n(56),u=n(6),c=u("iterator"),h=u("toStringTag"),f=l.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(d),v=0;v<p.length;v++){var y,g=p[v],m=d[g],b=a[g],_=b&&b.prototype;if(_&&(_[c]||s(_,c,f),_[h]||s(_,h,g),l[g]=f,m))for(y in r)_[y]||o(_,y,r[y],!0)}},function(e,t,n){"use strict";function r(e){var t=d(null);return void 0!=e&&(_(e)?b(e,!0,function(e,n){t[e]=n}):f(t,e)),t}function i(e,t,n){m(t);var r,i,o=w(e),a=v(o),s=a.length,l=0;if(arguments.length<3){if(!s)throw TypeError("Reduce of empty object with no initial value");r=o[a[l++]]}else r=Object(n);for(;s>l;)C(o,i=a[l++])&&(r=t(r,o[i],i,e));return r}function o(e,t){return void 0!==(t==t?g(e,t):P(e,function(e){return e!=e}))}function a(e,t){if(C(e,t))return e[t]}function s(e,t,n){return S&&t in Object?y.f(e,t,h(0,n)):e[t]=n,e}function l(e){return T(e)&&p(e)===r.prototype}var u=n(32),c=n(0),h=n(45),f=n(104),d=n(41),p=n(29),v=n(40),y=n(14),g=n(399),m=n(18),b=n(50),_=n(171),E=n(82),k=n(119),T=n(5),w=n(22),S=n(9),C=n(25),O=function(e){var t=1==e,n=4==e;return function(i,o,a){var s,l,c,h=u(o,a,3),f=w(i),d=t||7==e||2==e?new("function"==typeof this?this:r):void 0;for(s in f)if(C(f,s)&&(l=f[s],c=h(l,s,i),e))if(t)d[s]=c;else if(c)switch(e){case 2:d[s]=l;break;case 3:return!0;case 5:return l;case 6:return s;case 7:d[c[0]]=c[1]}else if(n)return!1;return 3==e||n?n:d}},P=O(6),R=function(e){return function(t){return new L(t,e)}},L=function(e,t){this._t=w(e),this._a=v(e),this._i=0,this._k=t};E(L,"Dict",function(){var e,t=this,n=t._t,r=t._a,i=t._k;do{if(t._i>=r.length)return t._t=void 0,k(1)}while(!C(n,e=r[t._i++]));return"keys"==i?k(0,e):"values"==i?k(0,n[e]):k(0,[e,n[e]])}),r.prototype=null,c(c.G+c.F,{Dict:r}),c(c.S,"Dict",{keys:R("keys"),values:R("values"),entries:R("entries"),forEach:O(0),map:O(1),filter:O(2),some:O(3),every:O(4),find:O(5),findKey:P,mapPairs:O(7),reduce:i,keyOf:g,includes:o,has:C,get:a,set:s,isDict:l})},function(e,t,n){var r=n(40),i=n(22);e.exports=function(e,t){for(var n,o=i(e),a=r(o),s=a.length,l=0;s>l;)if(o[n=a[l++]]===t)return n}},function(e,t,n){var r=n(2),i=n(69);e.exports=n(20).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){var r=n(3),i=n(20),o=n(0),a=n(172);o(o.G+o.F,{delay:function(e){return new(i.Promise||r.Promise)(function(t){setTimeout(a.call(t,!0),e)})}})},function(e,t,n){var r=n(173),i=n(0);n(20)._=r._=r._||{},i(i.P+i.F,"Function",{part:n(172)})},function(e,t,n){var r=n(0);r(r.S+r.F,"Object",{isObject:n(5)})},function(e,t,n){var r=n(0);r(r.S+r.F,"Object",{classof:n(48)})},function(e,t,n){var r=n(0),i=n(174);r(r.S+r.F,"Object",{define:i})},function(e,t,n){var r=n(0),i=n(174),o=n(41);r(r.S+r.F,"Object",{make:function(e,t){return i(o(e),t)}})},function(e,t,n){"use strict";n(81)(Number,"Number",function(e){this._l=+e,this._i=0},function(){var e=this._i++,t=!(e<this._l);return{done:t,value:t?void 0:e}})},function(e,t,n){var r=n(0),i=n(127)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(e){return i(e)}})},function(e,t,n){"use strict";var r=n(0),i=n(127)(/[&<>"']/g,{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"});r(r.P+r.F,"String",{escapeHTML:function(){return i(this)}})},function(e,t,n){"use strict";var r=n(0),i=n(127)(/&(?:amp|lt|gt|quot|apos);/g,{"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'"});r(r.P+r.F,"String",{unescapeHTML:function(){return i(this)}})},function(e,t,n){(function(t){var n;n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=n}).call(t,n(63))},function(e,t){function n(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function r(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function i(){this.values=y(null)}function o(e,t,n,r){var i=r?e.split(r):[e];for(var o in i)if("string"==typeof i[o]){var a=i[o].split(n);if(2===a.length){var s=a[0],l=a[1];t(s,l)}}}function a(e,t,a){function s(){var t=r(e);if(null===t)throw new n(n.Errors.BadTimeStamp,"Malformed timestamp: "+u);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function l(){e=e.replace(/^\s+/,"")}var u=e;if(l(),t.startTime=s(),l(),"--\x3e"!==e.substr(0,3))throw new n(n.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+u);e=e.substr(3),l(),t.endTime=s(),l(),function(e,t){var n=new i;o(e,function(e,t){switch(e){case"region":for(var r=a.length-1;r>=0;r--)if(a[r].id===t){n.set(e,a[r].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var i=t.split(","),o=i[0];n.integer(e,o),n.percent(e,o)&&n.set("snapToLines",!1),n.alt(e,o,["auto"]),2===i.length&&n.alt("lineAlign",i[1],["start","middle","end"]);break;case"position":i=t.split(","),n.percent(e,i[0]),2===i.length&&n.alt("positionAlign",i[1],["start","middle","end"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical",""),t.line=n.get("line","auto"),t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align","middle"),t.position=n.get("position",{start:0,left:0,middle:50,end:100,right:100},t.align),t.positionAlign=n.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align)}(e,t)}function s(e,t){function n(e){return g[e]}for(var i,o=e.document.createElement("div"),a=o,s=[];null!==(i=function(){if(!t)return null;var e=t.match(/^([^<]*)(<[^>]*>?)?/);return function(e){return t=t.substr(e.length),e}(e[1]?e[1]:e[2])}());)if("<"!==i[0])a.appendChild(e.document.createTextNode(function(e){for(;c=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(c[0],n);return e}(i)));else{if("/"===i[1]){s.length&&s[s.length-1]===i.substr(2).replace(">","")&&(s.pop(),a=a.parentNode);continue}var l,u=r(i.substr(1,i.length-2));if(u){l=e.document.createProcessingInstruction("timestamp",u),a.appendChild(l);continue}var c=i.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!c)continue;if(!(l=function(t,n){var r=m[t];if(!r)return null;var i=e.document.createElement(r);i.localName=r;var o=b[t];return o&&n&&(i[o]=n.trim()),i}(c[1],c[3])))continue;if(!function(e,t){return!_[t.localName]||_[t.localName]===e.localName}(a,l))continue;c[2]&&(l.className=c[2].substr(1).replace("."," ")),s.push(c[1]),a.appendChild(l),a=l}return o}function l(e){for(var t=0;t<E.length;t++){var n=E[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function u(e){function t(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function n(e){if(!e||!e.length)return null;var r=e.pop(),i=r.textContent||r.innerText;if(i){var o=i.match(/^.*(\n|\r)/);return o?(e.length=0,o[0]):i}return"ruby"===r.tagName?n(e):r.childNodes?(t(e,r),n(e)):void 0}var r,i=[],o="";if(!e||!e.childNodes)return"ltr";for(t(i,e);o=n(i);)for(var a=0;a<o.length;a++)if(r=o.charCodeAt(a),l(r))return"rtl";return"ltr"}function c(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,r=0,i=0;i<n.length&&n[i]!==t;i++)"showing"===n[i].mode&&r++;return-1*++r}function h(){}function f(e,t,n){var r=/MSIE\s8\.0/.test(navigator.userAgent),i="rgba(255, 255, 255, 1)",o="rgba(0, 0, 0, 0.8)";r&&(i="rgb(255, 255, 255)",o="rgb(0, 0, 0)"),h.call(this),this.cue=t,this.cueDiv=s(e,t.text);var a={color:i,backgroundColor:o,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};r||(a.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",a.unicodeBidi="plaintext"),this.applyStyles(a,this.cueDiv),this.div=e.document.createElement("div"),a={textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},r||(a.direction=u(this.cueDiv),a.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(a),this.div.appendChild(this.cueDiv);var l=0;switch(t.positionAlign){case"start":l=t.position;break;case"middle":l=t.position-t.size/2;break;case"end":l=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(l,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(l,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function d(e){var t,n,r,i,o=/MSIE\s8\.0/.test(navigator.userAgent);if(e.div){n=e.div.offsetHeight,r=e.div.offsetWidth,i=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||n,this.bottom=e.bottom||i+(e.height||n),this.width=e.width||r,this.lineHeight=void 0!==t?t:e.lineHeight,o&&!this.lineHeight&&(this.lineHeight=13)}function p(e,t,n,r){var i=new d(t),o=t.cue,a=c(o),s=[];if(o.snapToLines){var l;switch(o.vertical){case"":s=["+y","-y"],l="height";break;case"rl":s=["+x","-x"],l="width";break;case"lr":s=["-x","+x"],l="width"}var u=i.lineHeight,h=u*Math.round(a),f=n[l]+u,p=s[0];Math.abs(h)>f&&(h=h<0?-1:1,h*=Math.ceil(f/u)*u),a<0&&(h+=""===o.vertical?n.height:n.width,s=s.reverse()),i.move(p,h)}else{var v=i.lineHeight/n.height*100;switch(o.lineAlign){case"middle":a-=v/2;break;case"end":a-=v}switch(o.vertical){case"":t.applyStyles({top:t.formatStyle(a,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(a,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(a,"%")})}s=["+y","-x","+x","-y"],i=new d(t)}var y=function(e,t){for(var i,o=new d(e),a=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(r);)e.move(t[s]);if(e.within(n))return e;var l=e.intersectPercentage(n);a>l&&(i=new d(e),a=l),e=new d(o)}return i||o}(i,s);t.move(y.toCSSCompatValues(n))}function v(){}var y=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();n.prototype=y(Error.prototype),n.prototype.constructor=n,n.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},i.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var g={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},m={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},b={v:"title",lang:"lang"},_={rt:"ruby"},E=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];h.prototype.applyStyles=function(e,t){t=t||this.div;for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},h.prototype.formatStyle=function(e,t){return 0===e?0:e+t},f.prototype=y(h.prototype),f.prototype.constructor=f,d.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},d.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},d.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},d.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},d.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},d.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},d.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},d.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e,{left:e.left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||n}},v.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},v.convertCueToDOMTree=function(e,t){return e&&t?s(e,t):null};v.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var r=e.document.createElement("div");if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin="1.5%",n.appendChild(r),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var i=[],o=d.getSimpleBoxPosition(r),a=Math.round(.05*o.height*100)/100,s={font:a+"px sans-serif"};!function(){for(var n,a,l=0;l<t.length;l++)a=t[l],n=new f(e,a,s),r.appendChild(n.div),p(e,n,o,i),a.displayState=n.div,i.push(d.getSimpleBoxPosition(n))}()}else for(var l=0;l<t.length;l++)r.appendChild(t[l].displayState)},v.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},v.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof n))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){function t(){for(var e=u.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var n=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,u.buffer=e.substr(t),n}function s(e){var t=new i;if(o(e,function(e,n){switch(e){case"id":t.set(e,n);break;case"width":t.percent(e,n);break;case"lines":t.integer(e,n);break;case"regionanchor":case"viewportanchor":var r=n.split(",");if(2!==r.length)break;var o=new i;if(o.percent("x",r[0]),o.percent("y",r[1]),!o.has("x")||!o.has("y"))break;t.set(e+"X",o.get("x")),t.set(e+"Y",o.get("y"));break;case"scroll":t.alt(e,n,["up"])}},/=/,/\s/),t.has("id")){var n=new(u.vttjs.VTTRegion||u.window.VTTRegion);n.width=t.get("width",100),n.lines=t.get("lines",3),n.regionAnchorX=t.get("regionanchorX",0),n.regionAnchorY=t.get("regionanchorY",100),n.viewportAnchorX=t.get("viewportanchorX",0),n.viewportAnchorY=t.get("viewportanchorY",100),n.scroll=t.get("scroll",""),u.onregion&&u.onregion(n),u.regionList.push({id:t.get("id"),region:n})}}function l(e){var t=new i;o(e,function(e,n){switch(e){case"MPEGT":t.integer(e+"S",n);break;case"LOCA":t.set(e+"L",r(n))}},/[^\d]:/,/,/),u.ontimestampmap&&u.ontimestampmap({MPEGTS:t.get("MPEGTS"),LOCAL:t.get("LOCAL")})}var u=this;e&&(u.buffer+=u.decoder.decode(e,{stream:!0}));try{var c;if("INITIAL"===u.state){if(!/\r\n|\n/.test(u.buffer))return this;c=t();var h=c.match(/^WEBVTT([ \t].*)?$/);if(!h||!h[0])throw new n(n.Errors.BadSignature);u.state="HEADER"}for(var f=!1;u.buffer;){if(!/\r\n|\n/.test(u.buffer))return this;switch(f?f=!1:c=t(),u.state){case"HEADER":/:/.test(c)?function(e){e.match(/X-TIMESTAMP-MAP/)?o(e,function(e,t){switch(e){case"X-TIMESTAMP-MAP":l(t)}},/=/):o(e,function(e,t){switch(e){case"Region":s(t)}},/:/)}(c):c||(u.state="ID");continue;case"NOTE":c||(u.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(c)){u.state="NOTE";break}if(!c)continue;if(u.cue=new(u.vttjs.VTTCue||u.window.VTTCue)(0,0,""),u.state="CUE",-1===c.indexOf("--\x3e")){u.cue.id=c;continue}case"CUE":try{a(c,u.cue,u.regionList)}catch(e){u.reportOrThrowError(e),u.cue=null,u.state="BADCUE";continue}u.state="CUETEXT";continue;case"CUETEXT":var d=-1!==c.indexOf("--\x3e");if(!c||d&&(f=!0)){u.oncue&&u.oncue(u.cue),u.cue=null,u.state="ID";continue}u.cue.text&&(u.cue.text+="\n"),u.cue.text+=c;continue;case"BADCUE":c||(u.state="ID");continue}}}catch(e){u.reportOrThrowError(e),"CUETEXT"===u.state&&u.cue&&u.oncue&&u.oncue(u.cue),u.cue=null,u.state="INITIAL"===u.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new n(n.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},e.exports=v},function(e,t){function n(e){return"string"==typeof e&&(!!s[e.toLowerCase()]&&e.toLowerCase())}function r(e){return"string"==typeof e&&(!!l[e.toLowerCase()]&&e.toLowerCase())}function i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function o(e,t,o){var s=this,l=/MSIE\s8\.0/.test(navigator.userAgent),u={};l?s=document.createElement("custom"):u.enumerable=!0,s.hasBeenReset=!1;var c="",h=!1,f=e,d=t,p=o,v=null,y="",g=!0,m="auto",b="start",_=50,E="middle",k=50,T="middle";if(Object.defineProperty(s,"id",i({},u,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(s,"pauseOnExit",i({},u,{get:function(){return h},set:function(e){h=!!e}})),Object.defineProperty(s,"startTime",i({},u,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},u,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},u,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},u,{get:function(){return v},set:function(e){v=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},u,{get:function(){return y},set:function(e){var t=n(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},u,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},u,{get:function(){return m},set:function(e){if("number"!=typeof e&&e!==a)throw new SyntaxError("An invalid number or illegal string was specified.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},u,{get:function(){return b},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},u,{get:function(){return _},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},u,{get:function(){return E},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},u,{get:function(){return k},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");k=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},u,{get:function(){return T},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");T=t,this.hasBeenReset=!0}})),s.displayState=void 0,l)return s}var a="auto",s={"":!0,lr:!0,rl:!0},l={start:!0,middle:!0,end:!0,left:!0,right:!0};o.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=o},function(e,t){function n(e){return"string"==typeof e&&(!!o[e.toLowerCase()]&&e.toLowerCase())}function r(e){return"number"==typeof e&&e>=0&&e<=100}function i(){var e=100,t=3,i=0,o=100,a=0,s=100,l="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!r(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!r(e))throw new Error("RegionAnchorX must be between 0 and 100.");o=e}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!r(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!r(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(e){if(!r(e))throw new Error("ViewportAnchorX must be between 0 and 100.");a=e}},scroll:{enumerable:!0,get:function(){return l},set:function(e){var t=n(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");l=t}}})}var o={"":!0,up:!0};e.exports=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){t&&(v=t),d.default.setTimeout(y,e)}t.__esModule=!0,t.hasLoaded=t.autoSetupTimeout=t.autoSetup=void 0;var a=n(12),s=i(a),l=n(51),u=i(l),c=n(15),h=r(c),f=n(11),d=r(f),p=!1,v=void 0,y=function(){if(s.isReal()){var e=h.default.getElementsByTagName("video"),t=h.default.getElementsByTagName("audio"),n=[];if(e&&e.length>0)for(var r=0,i=e.length;r<i;r++)n.push(e[r]);if(t&&t.length>0)for(var a=0,l=t.length;a<l;a++)n.push(t[a]);if(n&&n.length>0)for(var u=0,c=n.length;u<c;u++){var f=n[u];if(!f||!f.getAttribute){o(1);break}if(void 0===f.player){var d=f.getAttribute("data-setup");null!==d&&v(f)}}else p||o(1)}};s.isReal()&&"complete"===h.default.readyState?p=!0:u.one(d.default,"load",function(){p=!0});var g=function(){return p};t.autoSetup=y,t.autoSetupTimeout=o,t.hasLoaded=g},function(e,t,n){"use strict";t.__esModule=!0;for(var r=n(15),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o={},a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],s=a[0],l=void 0,u=0;u<a.length;u++)if(a[u][1]in i.default){l=a[u];break}if(l)for(var c=0;c<l.length;c++)o[s[c]]=l[c];t.default=o},function(e,t){function n(e,t){var n,r=null;try{n=JSON.parse(e,t)}catch(e){r=e}return[r,n]}e.exports=n},function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,n,r){return e[n]&&(t[n]=e[n]),t},{cues:e.cues&&Array.prototype.map.call(e.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})},i=function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,function(e){return e.track});return Array.prototype.map.call(t,function(e){var t=r(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===n.indexOf(e)}).map(r))},o=function(e,t){return e.forEach(function(e){var n=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return n.addCue(e)})}),t.textTracks()};t.default={textTracksToJson:i,jsonToTextTracks:o,trackToJson_:r}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(21),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(15),h=r(c),f=n(93),d=r(f),p=n(129),v=r(p),y=0,g=2,m=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=o(this,e.call(this)),a=void 0,s=r;if(u.IS_IE8){s=h.default.createElement("custom");for(var l in t.prototype)"constructor"!==l&&(s[l]=t.prototype[l])}var c=new v.default(n);if(s.kind=c.kind,s.src=c.src,s.srclang=c.language,s.label=c.label,s.default=c.default,Object.defineProperty(s,"readyState",{get:function(){return a}}),Object.defineProperty(s,"track",{get:function(){return c}}),a=y,c.addEventListener("loadeddata",function(){a=g,s.trigger({type:"load",target:s})}),u.IS_IE8){var f;return f=s,o(r,f)}return r}return a(t,e),t}(d.default);m.prototype.allowedEvents_={load:"load"},m.NONE=y,m.LOADING=1,m.LOADED=g,m.ERROR=3,t.default=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=n(21),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),a=n(15),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(){function e(t){r(this,e);var n=this;if(o.IS_IE8){n=s.default.createElement("custom");for(var i in e.prototype)"constructor"!==i&&(n[i]=e.prototype[i])}if(e.prototype.setCues_.call(n,t),Object.defineProperty(n,"length",{get:function(){return this.length_}}),o.IS_IE8)return n}return e.prototype.setCues_=function(e){var t=this.length||0,n=0,r=e.length;this.cues_=e,this.length_=e.length;var i=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<r)for(n=t;n<r;n++)i.call(this,n)},e.prototype.getCueById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},e}();t.default=l},function(e,t){function n(e){if(!e)return!1;var t=r.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}e.exports=n;var r=Object.prototype.toString},function(e,t){var n=function(e){return e.replace(/^\s+|\s+$/g,"")},r=function(e){return"[object Array]"===Object.prototype.toString.call(e)};e.exports=function(e){if(!e)return{};for(var t={},i=n(e).split("\n"),o=0;o<i.length;o++){var a=i[o],s=a.indexOf(":"),l=n(a.slice(0,s)).toLowerCase(),u=n(a.slice(s+1));void 0===t[l]?t[l]=u:r(t[l])?t[l].push(u):t[l]=[t[l],u]}return t}},function(e,t){function n(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e}e.exports=n;var r=Object.prototype.hasOwnProperty},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=n(21),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),a=n(15),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r(this,e);var n=this;if(o.IS_IE8){n=s.default.createElement("custom");for(var i in e.prototype)"constructor"!==i&&(n[i]=e.prototype[i])}n.trackElements_=[],Object.defineProperty(n,"length",{get:function(){return this.trackElements_.length}});for(var a=0,l=t.length;a<l;a++)n.addTrackElement_(t[a]);if(o.IS_IE8)return n}return e.prototype.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},e.prototype.getTrackElementByTrack_=function(e){for(var t=void 0,n=0,r=this.trackElements_.length;n<r;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},e.prototype.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_.splice(t,1);break}},e}();t.default=l},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var u=n(132),c=i(u),h=n(7),f=r(h),d=n(21),p=r(d),v=n(15),y=i(v),g=function(e){function t(){var n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,t);var s=void 0;if(p.IS_IE8){s=y.default.createElement("custom");for(var l in c.default.prototype)"constructor"!==l&&(s[l]=c.default.prototype[l]);for(var u in t.prototype)"constructor"!==u&&(s[u]=t.prototype[u])}return s=n=a(this,e.call(this,i,s)),r=s,a(n,r)}return s(t,e),t.prototype.addTrack_=function(t){e.prototype.addTrack_.call(this,t),t.addEventListener("modechange",f.bind(this,function(){this.trigger("change")}))},t}(c.default);t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(1),u=r(l),c=n(73),h=r(c),f=n(65),d=r(f),p=function(e){function t(n,r,a){i(this,t);var s=o(this,e.call(this,n,r,a));if(r.playerOptions.sources&&0!==r.playerOptions.sources.length)n.src(r.playerOptions.sources);else for(var l=0,c=r.playerOptions.techOrder;l<c.length;l++){var f=(0,d.default)(c[l]),p=h.default.getTech(f);if(f||(p=u.default.getComponent(f)),p&&p.isSupported()){n.loadTech_(f);break}}return s}return a(t,e),t}(u.default);u.default.registerComponent("MediaLoader",p),t.default=p},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){C[e]=function(){return this.el_.vjs_getProperty(e)}}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;for(var c=n(73),h=i(c),f=n(12),d=r(f),p=n(94),v=r(p),y=n(72),g=n(428),m=i(g),b=n(1),_=i(b),E=n(11),k=i(E),T=n(23),w=k.default.navigator,S=function(e){function t(n,r){o(this,t);var i=a(this,e.call(this,n,r));return n.source&&i.ready(function(){this.setSource(n.source)},!0),n.startTime&&i.ready(function(){this.load(),this.play(),this.currentTime(n.startTime)},!0),k.default.videojs=k.default.videojs||{},k.default.videojs.Flash=k.default.videojs.Flash||{},k.default.videojs.Flash.onReady=t.onReady,k.default.videojs.Flash.onEvent=t.onEvent,k.default.videojs.Flash.onError=t.onError,i.on("seeked",function(){this.lastSeekTarget_=void 0}),i}return s(t,e),t.prototype.createEl=function(){var e=this.options_;if(!e.swf){e.swf="//vjs.zencdn.net/swf/5.4.1/video-js.swf"}var n=e.techId,r=(0,T.assign)({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:e.autoplay,preload:e.preload,loop:e.loop,muted:e.muted},e.flashVars),i=(0,T.assign)({wmode:"opaque",bgcolor:"#000000"},e.params),o=(0,T.assign)({id:n,name:n,class:"vjs-tech"},e.attributes);return this.el_=t.embed(e.swf,r,i,o),this.el_.tech=this,this.el_},t.prototype.play=function(){this.ended()&&this.setCurrentTime(0),this.el_.vjs_play()},t.prototype.pause=function(){this.el_.vjs_pause()},t.prototype.src=function(e){return void 0===e?this.currentSrc():this.setSrc(e)},t.prototype.setSrc=function(e){var t=this;e=v.getAbsoluteURL(e),this.el_.vjs_src(e),this.autoplay()&&this.setTimeout(function(){return t.play()},0)},t.prototype.seeking=function(){return void 0!==this.lastSeekTarget_},t.prototype.setCurrentTime=function(t){var n=this.seekable();n.length&&(t=t>n.start(0)?t:n.start(0),t=t<n.end(n.length-1)?t:n.end(n.length-1),this.lastSeekTarget_=t,this.trigger("seeking"),this.el_.vjs_setProperty("currentTime",t),e.prototype.setCurrentTime.call(this))},t.prototype.currentTime=function(){return this.seeking()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},t.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.vjs_getProperty("currentSrc")},t.prototype.duration=function(){if(0===this.readyState())return NaN;var e=this.el_.vjs_getProperty("duration");return e>=0?e:1/0},t.prototype.load=function(){this.el_.vjs_load()},t.prototype.poster=function(){this.el_.vjs_getProperty("poster")},t.prototype.setPoster=function(){},t.prototype.seekable=function(){var e=this.duration();return 0===e?(0,y.createTimeRange)():(0,y.createTimeRange)(0,e)},t.prototype.buffered=function(){var e=this.el_.vjs_getProperty("buffered");return 0===e.length?(0,y.createTimeRange)():(0,y.createTimeRange)(e[0][0],e[0][1])},t.prototype.supportsFullScreen=function(){return!1},t.prototype.enterFullScreen=function(){return!1},t.prototype.getVideoPlaybackQuality=function(){var e=this.el_.vjs_getProperty("getVideoPlaybackQuality");return k.default.performance&&"function"==typeof k.default.performance.now?e.creationTime=k.default.performance.now():k.default.performance&&k.default.performance.timing&&"number"==typeof k.default.performance.timing.navigationStart&&(e.creationTime=k.default.Date.now()-k.default.performance.timing.navigationStart),e},t}(h.default),C=S.prototype,O="rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),P="networkState,readyState,initialTime,startOffsetTime,paused,ended,videoWidth,videoHeight".split(","),R=0;R<O.length;R++)l(O[R]),function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);C["set"+t]=function(t){return this.el_.vjs_setProperty(e,t)}}(O[R]);for(var L=0;L<P.length;L++)l(P[L]);S.isSupported=function(){return S.version()[0]>=10},h.default.withSourceHandlers(S),S.nativeSourceHandler={},S.nativeSourceHandler.canPlayType=function(e){return e in S.formats?"maybe":""},S.nativeSourceHandler.canHandleSource=function(e,t){var n=void 0;return n=e.type?e.type.replace(/;.*/,"").toLowerCase():function(e){var t=v.getFileExtension(e);return t?"video/"+t:""}(e.src),S.nativeSourceHandler.canPlayType(n)},S.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},S.nativeSourceHandler.dispose=function(){},S.registerSourceHandler(S.nativeSourceHandler),S.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},S.onReady=function(e){var t=d.getEl(e),n=t&&t.tech;n&&n.el()&&S.checkReady(n)},S.checkReady=function(e){e.el()&&(e.el().vjs_getProperty?e.triggerReady():this.setTimeout(function(){S.checkReady(e)},50))},S.onEvent=function(e,t){var n=d.getEl(e).tech,r=Array.prototype.slice.call(arguments,2);n.setTimeout(function(){n.trigger(t,r)},1)},S.onError=function(e,t){var n=d.getEl(e).tech;if("srcnotfound"===t)return n.error(4);n.error("FLASH: "+t)},S.version=function(){var e="0,0,0";try{e=new k.default.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){try{w.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(e=(w.plugins["Shockwave Flash 2.0"]||w.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(e){}}return e.split(",")},S.embed=function(e,t,n,r){var i=S.getEmbedCode(e,t,n,r);return d.createEl("div",{innerHTML:i}).childNodes[0]},S.getEmbedCode=function(e,t,n,r){var i="",o="",a="";return t&&Object.getOwnPropertyNames(t).forEach(function(e){i+=e+"="+t[e]+"&amp;"}),n=(0,T.assign)({movie:e,flashvars:i,allowScriptAccess:"always",allowNetworking:"all"},n),Object.getOwnPropertyNames(n).forEach(function(e){o+='<param name="'+e+'" value="'+n[e]+'" />'}),r=(0,T.assign)({data:e,width:"100%",height:"100%"},r),Object.getOwnPropertyNames(r).forEach(function(e){a+=e+'="'+r[e]+'" '}),'<object type="application/x-shockwave-flash" '+a+">"+o+"</object>"},(0,m.default)(S),_.default.registerComponent("Flash",S),h.default.registerTech("Flash",S),t.default=S},function(e,t,n){"use strict";function r(e){return e.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},e.streamFromParts=function(e,t){return e+"&"+t},e.streamToParts=function(e){var t={connection:"",stream:""};if(!e)return t;var n=e.search(/&(?!\w+=)/),r=void 0;return-1!==n?r=n+1:0===(n=r=e.lastIndexOf("/")+1)&&(n=r=e.length),t.connection=e.substring(0,n),t.stream=e.substring(r,e.length),t},e.isStreamingType=function(t){return t in e.streamingFormats},e.RTMP_RE=/^rtmp[set]?:\/\//i,e.isStreamingSrc=function(t){return e.RTMP_RE.test(t)},e.rtmpSourceHandler={},e.rtmpSourceHandler.canPlayType=function(t){return e.isStreamingType(t)?"maybe":""},e.rtmpSourceHandler.canHandleSource=function(t,n){var r=e.rtmpSourceHandler.canPlayType(t.type);return r||(e.isStreamingSrc(t.src)?"maybe":"")},e.rtmpSourceHandler.handleSource=function(t,n,r){var i=e.streamToParts(t.src);n.setRtmpConnection(i.connection),n.setRtmpStream(i.stream)},e.registerSourceHandler(e.rtmpSourceHandler),e}t.__esModule=!0,t.default=r},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var u=n(74),c=i(u),h=n(1),f=i(h),d=n(7),p=r(d),v=n(12),y=r(v),g=n(21),m=r(g),b=function(e){function t(n,r){o(this,t);var i=a(this,e.call(this,n,r));return i.update(),n.on("posterchange",p.bind(i,i.update)),i}return s(t,e),t.prototype.dispose=function(){this.player().off("posterchange",this.update),e.prototype.dispose.call(this)},t.prototype.createEl=function(){var e=y.createEl("div",{className:"vjs-poster",tabIndex:-1});return m.BACKGROUND_SIZE_SUPPORTED||(this.fallbackImg_=y.createEl("img"),e.appendChild(this.fallbackImg_)),e},t.prototype.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},t.prototype.setSrc=function(e){if(this.fallbackImg_)this.fallbackImg_.src=e;else{var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t}},t.prototype.handleClick=function(e){this.player_.controls()&&(this.player_.paused()?this.player_.play():this.player_.pause())},t}(c.default);f.default.registerComponent("PosterImage",b),t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return"rgba("+parseInt(e[1]+e[1],16)+","+parseInt(e[2]+e[2],16)+","+parseInt(e[3]+e[3],16)+","+t+")"}function l(e,t,n){try{e.style[t]=n}catch(e){return}}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var c=n(1),h=r(c),f=n(7),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),p=n(11),v=r(p),y={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},g=function(e){function t(n,r,a){i(this,t);var s=o(this,e.call(this,n,r,a));return n.on("loadstart",d.bind(s,s.toggleDisplay)),n.on("texttrackchange",d.bind(s,s.updateDisplay)),n.ready(d.bind(s,function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)return void this.hide();n.on("fullscreenchange",d.bind(this,this.updateDisplay));for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);var r={captions:1,subtitles:1},i=this.player_.textTracks(),o=void 0,a=void 0;if(i){for(var s=0;s<i.length;s++){var l=i[s];l.default&&("descriptions"!==l.kind||o?l.kind in r&&!a&&(a=l):o=l)}a?a.mode="showing":o&&(o.mode="showing")}})),s}return a(t,e),t.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},t.prototype.clearDisplay=function(){"function"==typeof v.default.WebVTT&&v.default.WebVTT.processCues(v.default,[],this.el_)},t.prototype.updateDisplay=function(){var e=this.player_.textTracks();if(this.clearDisplay(),e){for(var t=null,n=null,r=e.length;r--;){var i=e[r];"showing"===i.mode&&("descriptions"===i.kind?t=i:n=i)}n?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):t&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(t))}},t.prototype.updateForTrack=function(e){if("function"==typeof v.default.WebVTT&&e.activeCues){for(var t=this.player_.textTrackSettings.getValues(),n=[],r=0;r<e.activeCues.length;r++)n.push(e.activeCues[r]);v.default.WebVTT.processCues(v.default,n,this.el_);for(var i=n.length;i--;){var o=n[i];if(o){var a=o.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&l(a.firstChild,"color",s(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&l(a.firstChild,"backgroundColor",s(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?l(a,"backgroundColor",s(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===t.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),t.fontPercent&&1!==t.fontPercent){var u=v.default.parseFloat(a.style.fontSize);a.style.fontSize=u*t.fontPercent+"px",a.style.height="auto",a.style.top="auto",a.style.bottom="2px"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=y[t.fontFamily])}}}},t}(h.default);h.default.registerComponent("TextTrackDisplay",g),t.default=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var s=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e){function t(){return r(this,t),i(this,e.apply(this,arguments))}return o(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"})},t}(l.default);l.default.registerComponent("LoadingSpinner",u),t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(75),u=r(l),c=n(1),h=r(c),f=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.mouseused_=!1,a.on("mousedown",a.handleMouseDown),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-big-play-button"},t.prototype.handleClick=function(e){var t=this.player_.play();if(!(this.mouseused_&&e.clientX&&e.clientY)){var n=this.player_.getChild("controlBar"),r=n&&n.getChild("playToggle");if(!r)return void this.player_.focus();var i=function(){return r.focus()};if(t&&t.then){var o=function(){};t.then(i,o)}else this.setTimeout(i,1)}},t.prototype.handleKeyPress=function(t){this.mouseused_=!1,e.prototype.handleKeyPress.call(this,t)},t.prototype.handleMouseDown=function(e){this.mouseused_=!0},t}(u.default);f.prototype.controlText_="Play Video",h.default.registerComponent("BigPlayButton",f),t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(75),u=r(l),c=n(1),h=r(c),f=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.controlText(r&&r.controlText||a.localize("Close")),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},t}(u.default);h.default.registerComponent("CloseButton",f),t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var s=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(s);n(435),n(436),n(437),n(438),n(439),n(440),n(441),n(447),n(448),n(450),n(187),n(453),n(456),n(457),n(458),n(460),n(462),n(464);var u=function(e){function t(){return r(this,t),i(this,e.apply(this,arguments))}return o(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"},{role:"group"})},t}(l.default);u.prototype.options_={children:["playToggle","volumeMenuButton","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subtitlesButton","captionsButton","audioTrackButton","fullscreenToggle"]},l.default.registerComponent("ControlBar",u),t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(75),u=r(l),c=n(1),h=r(c),f=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.on(n,"play",a.handlePlay),a.on(n,"pause",a.handlePause),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.prototype.handlePlay=function(e){this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.prototype.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t}(u.default);f.prototype.controlText_="Play",h.default.registerComponent("PlayToggle",f),t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(1),u=r(l),c=n(12),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=n(52),d=r(f),p=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.on(n,"timeupdate",a.updateContent),a}return a(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-control vjs-control"});return this.contentEl_=h.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00'},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateContent=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),n=this.localize("Current Time"),r=(0,d.default)(t,this.player_.duration());r!==this.formattedTime_&&(this.formattedTime_=r,this.contentEl_.innerHTML='<span class="vjs-control-text">'+n+"</span> "+r)},t}(u.default);u.default.registerComponent("CurrentTimeDisplay",p),t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(1),u=r(l),c=n(12),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=n(52),d=r(f),p=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.on(n,"durationchange",a.updateContent),a.on(n,"timeupdate",a.updateContent),a.on(n,"loadedmetadata",a.updateContent),a}return a(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-control vjs-control"});return this.contentEl_=h.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> 0:00"},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateContent=function(e){var t=this.player_.duration();if(t&&this.duration_!==t){this.duration_=t;var n=this.localize("Duration Time"),r=(0,d.default)(t);this.contentEl_.innerHTML='<span class="vjs-control-text">'+n+"</span> "+r}},t}(u.default);u.default.registerComponent("DurationDisplay",p),t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var s=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e){function t(){return r(this,t),i(this,e.apply(this,arguments))}return o(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},t}(l.default);l.default.registerComponent("TimeDivider",u),t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(1),u=r(l),c=n(12),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=n(52),d=r(f),p=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.on(n,"timeupdate",a.updateContent),a.on(n,"durationchange",a.updateContent),a}return a(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-control vjs-control"});return this.contentEl_=h.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> -0:00"},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateContent=function(e){if(this.player_.duration()){var t=this.localize("Remaining Time"),n=(0,d.default)(this.player_.remainingTime());n!==this.formattedTime_&&(this.formattedTime_=n,this.contentEl_.innerHTML='<span class="vjs-control-text">'+t+"</span> -"+n)}},t}(u.default);u.default.registerComponent("RemainingTimeDisplay",p),t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var s=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=n(12),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),h=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return a.updateShowing(),a.on(a.player(),"durationchange",a.updateShowing),a}return o(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=c.createEl("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(l.default);l.default.registerComponent("LiveDisplay",h),t.default=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var s=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(s);n(442),n(446);var u=function(e){function t(){return r(this,t),i(this,e.apply(this,arguments))}return o(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t}(l.default);u.prototype.options_={children:["seekBar"]},l.default.registerComponent("ProgressControl",u),t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(185),u=r(l),c=n(1),h=r(c),f=n(7),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),p=n(52),v=r(p),y=n(133),g=r(y);n(443),n(444),n(445);var m=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.on(n,"timeupdate",a.updateProgress),a.on(n,"ended",a.updateProgress),n.ready(d.bind(a,a.updateProgress)),r.playerOptions&&r.playerOptions.controlBar&&r.playerOptions.controlBar.progressControl&&r.playerOptions.controlBar.progressControl.keepTooltipsInside&&(a.keepTooltipsInside=r.playerOptions.controlBar.progressControl.keepTooltipsInside),a.keepTooltipsInside&&(a.tooltipProgressBar=a.addChild("TooltipProgressBar")),a}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":"progress bar"})},t.prototype.updateProgress=function(e){if(this.updateAriaAttributes(this.el_),this.keepTooltipsInside){this.updateAriaAttributes(this.tooltipProgressBar.el_),this.tooltipProgressBar.el_.style.width=this.bar.el_.style.width;var t=parseFloat((0,g.default)(this.player().el(),"width")),n=parseFloat((0,g.default)(this.tooltipProgressBar.tooltip,"width")),r=this.tooltipProgressBar.el().style;r.maxWidth=Math.floor(t-n/2)+"px",r.minWidth=Math.ceil(n/2)+"px",r.right="-"+n/2+"px"}},t.prototype.updateAriaAttributes=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();e.setAttribute("aria-valuenow",(100*this.getPercent()).toFixed(2)),e.setAttribute("aria-valuetext",(0,v.default)(t,this.player_.duration()))},t.prototype.getPercent=function(){var e=this.player_.currentTime()/this.player_.duration();return e>=1?1:e},t.prototype.handleMouseDown=function(t){this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t)},t.prototype.handleMouseMove=function(e){var t=this.calculateDistance(e)*this.player_.duration();t===this.player_.duration()&&(t-=.1),this.player_.currentTime(t)},t.prototype.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),this.player_.scrubbing(!1),this.videoWasPlaying&&this.player_.play()},t.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},t.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},t}(u.default);m.prototype.options_={children:["loadProgressBar","mouseTimeDisplay","playProgressBar"],barName:"playProgressBar"},m.prototype.playerEvent="timeupdate",h.default.registerComponent("SeekBar",m),t.default=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var s=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=n(12),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),h=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return a.partEls_=[],a.on(n,"progress",a.update),a}return o(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},t.prototype.update=function(e){var t=this.player_.buffered(),n=this.player_.duration(),r=this.player_.bufferedEnd(),i=this.partEls_,o=function(e,t){var n=e/t||0;return 100*(n>=1?1:n)+"%"};this.el_.style.width=o(r,n);for(var a=0;a<t.length;a++){var s=t.start(a),l=t.end(a),u=i[a];u||(u=this.el_.appendChild(c.createEl()),i[a]=u),u.style.left=o(s,r),u.style.width=o(l-s,r)}for(var h=i.length;h>t.length;h--)this.el_.removeChild(i[h-1]);i.length=t.length},t}(l.default);l.default.registerComponent("LoadProgressBar",h),t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(1),u=r(l),c=n(7),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=n(52),d=r(f),p=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.updateDataAttr(),a.on(n,"timeupdate",a.updateDataAttr),n.ready(h.bind(a,a.updateDataAttr)),r.playerOptions&&r.playerOptions.controlBar&&r.playerOptions.controlBar.progressControl&&r.playerOptions.controlBar.progressControl.keepTooltipsInside&&(a.keepTooltipsInside=r.playerOptions.controlBar.progressControl.keepTooltipsInside),a.keepTooltipsInside&&a.addClass("vjs-keep-tooltips-inside"),a}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},t.prototype.updateDataAttr=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("data-current-time",(0,d.default)(t,this.player_.duration()))},t}(u.default);u.default.registerComponent("PlayProgressBar",p),t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(1),u=r(l),c=n(7),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=n(52),d=r(f),p=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.updateDataAttr(),a.on(n,"timeupdate",a.updateDataAttr),n.ready(h.bind(a,a.updateDataAttr)),a}return a(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-tooltip-progress-bar vjs-slider-bar",innerHTML:'<div class="vjs-time-tooltip"></div>\n        <span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"});return this.tooltip=t.querySelector(".vjs-time-tooltip"),t},t.prototype.updateDataAttr=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),n=(0,d.default)(t,this.player_.duration());this.el_.setAttribute("data-current-time",n),this.tooltip.innerHTML=n},t}(u.default);u.default.registerComponent("TooltipProgressBar",p),t.default=p},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var u=n(1),c=i(u),h=n(12),f=r(h),d=n(7),p=r(d),v=n(52),y=i(v),g=n(133),m=i(g),b=function(e){function t(n,r){o(this,t);var i=a(this,e.call(this,n,r));return r.playerOptions&&r.playerOptions.controlBar&&r.playerOptions.controlBar.progressControl&&r.playerOptions.controlBar.progressControl.keepTooltipsInside&&(i.keepTooltipsInside=r.playerOptions.controlBar.progressControl.keepTooltipsInside),i.keepTooltipsInside&&(i.tooltip=f.createEl("div",{className:"vjs-time-tooltip"}),i.el().appendChild(i.tooltip),i.addClass("vjs-keep-tooltips-inside")),i.update(0,0),n.on("ready",function(){i.on(n.controlBar.progressControl.el(),"mousemove",p.throttle(p.bind(i,i.handleMouseMove),25))}),i}return s(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.prototype.handleMouseMove=function(e){var t=this.player_.duration(),n=this.calculateDistance(e)*t,r=e.pageX-f.findElPosition(this.el().parentNode).left;this.update(n,r)},t.prototype.update=function(e,t){var n=(0,y.default)(e,this.player_.duration());if(this.el().style.left=t+"px",this.el().setAttribute("data-current-time",n),this.keepTooltipsInside){var r=this.clampPosition_(t),i=t-r+1,o=parseFloat((0,m.default)(this.tooltip,"width")),a=o/2;this.tooltip.innerHTML=n,this.tooltip.style.right="-"+(a-i)+"px"}},t.prototype.calculateDistance=function(e){return f.getPointerPosition(this.el().parentNode,e).x},t.prototype.clampPosition_=function(e){if(!this.keepTooltipsInside)return e;var t=parseFloat((0,m.default)(this.player().el(),"width")),n=parseFloat((0,m.default)(this.tooltip,"width")),r=n/2,i=e;return e<r?i=Math.ceil(r):e>t-r&&(i=Math.floor(t-r)),i},t}(c.default);c.default.registerComponent("MouseTimeDisplay",b),t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(75),u=r(l),c=n(1),h=r(c),f=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.on(n,"fullscreenchange",a.handleFullscreenChange),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.prototype.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(u.default);f.prototype.controlText_="Fullscreen",h.default.registerComponent("FullscreenToggle",f),t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var s=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(s);n(186);var u=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return n.tech_&&!1===n.tech_.featuresVolumeControl&&a.addClass("vjs-hidden"),a.on(n,"loadstart",function(){!1===n.tech_.featuresVolumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}),a}return o(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})},t}(l.default);u.prototype.options_={children:["volumeBar"]},l.default.registerComponent("VolumeControl",u),t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var s=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e){function t(){return r(this,t),i(this,e.apply(this,arguments))}return o(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(l.default);l.default.registerComponent("VolumeLevel",u),t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(7),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(1),h=r(c),f=n(451),d=r(f),p=n(452),v=r(p),y=n(187),g=r(y),m=n(186),b=r(m),_=function(e){function t(n){function r(){n.tech_&&!1===n.tech_.featuresVolumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),void 0===a.inline&&(a.inline=!0),void 0===a.vertical&&(a.inline?a.vertical=!1:a.vertical=!0),a.volumeBar=a.volumeBar||{},a.volumeBar.vertical=!!a.vertical;var s=o(this,e.call(this,n,a));return s.on(n,"volumechange",s.volumeUpdate),s.on(n,"loadstart",s.volumeUpdate),r.call(s),s.on(n,"loadstart",r),s.on(s.volumeBar,["slideractive","focus"],function(){this.addClass("vjs-slider-active")}),s.on(s.volumeBar,["sliderinactive","blur"],function(){this.removeClass("vjs-slider-active")}),s.on(s.volumeBar,["focus"],function(){this.addClass("vjs-lock-showing")}),s.on(s.volumeBar,["blur"],function(){this.removeClass("vjs-lock-showing")}),s}return a(t,e),t.prototype.buildCSSClass=function(){var t="";return t=this.options_.vertical?"vjs-volume-menu-button-vertical":"vjs-volume-menu-button-horizontal","vjs-volume-menu-button "+e.prototype.buildCSSClass.call(this)+" "+t},t.prototype.createPopup=function(){var e=new d.default(this.player_,{contentElType:"div"}),t=new b.default(this.player_,this.options_.volumeBar);return e.addChild(t),this.menuContent=e,this.volumeBar=t,this.attachVolumeBarEvents(),e},t.prototype.handleClick=function(t){g.default.prototype.handleClick.call(this),e.prototype.handleClick.call(this)},t.prototype.attachVolumeBarEvents=function(){this.menuContent.on(["mousedown","touchdown"],u.bind(this,this.handleMouseDown))},t.prototype.handleMouseDown=function(e){this.on(["mousemove","touchmove"],u.bind(this.volumeBar,this.volumeBar.handleMouseMove)),this.on(this.el_.ownerDocument,["mouseup","touchend"],this.handleMouseUp)},t.prototype.handleMouseUp=function(e){this.off(["mousemove","touchmove"],u.bind(this.volumeBar,this.volumeBar.handleMouseMove))},t}(v.default);_.prototype.volumeUpdate=g.default.prototype.update,_.prototype.controlText_="Mute",h.default.registerComponent("VolumeMenuButton",_),t.default=_},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(1),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=n(12),h=r(c),f=n(7),d=r(f),p=n(51),v=r(p),y=function(e){function t(){return i(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.addItem=function(e){this.addChild(e),e.on("click",d.bind(this,function(){this.unlockShowing()}))},t.prototype.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=h.createEl(t,{className:"vjs-menu-content"});var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),v.on(n,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),n},t}(u.default);u.default.registerComponent("Popup",y),t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(74),u=r(l),c=n(1),h=r(c),f=function(e){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var a=o(this,e.call(this,n,r));return a.update(),a}return a(t,e),t.prototype.update=function(){var e=this.createPopup();this.popup&&this.removeChild(this.popup),this.popup=e,this.addChild(e),this.items&&0===this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},t.prototype.createPopup=function(){},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t.prototype.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},t}(u.default);h.default.registerComponent("PopupButton",f),t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(95),u=r(l),c=n(1),h=r(c),f=n(455),d=r(f),p=n(65),v=r(p),y=function(e){function t(n,r,a){i(this,t);var s=o(this,e.call(this,n,r,a));return s.el_.setAttribute("aria-label","Chapters Menu"),s}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},t.prototype.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),e.prototype.update.call(this)},t.prototype.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_)}}},t.prototype.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var n=e[t];if(n.kind===this.kind_)return n}},t.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize((0,v.default)(this.kind_))},t.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},t.prototype.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,r=t.length;n<r;n++){var i=t[n],o=new d.default(this.player_,{track:this.track_,cue:i});e.push(o)}return e},t}(u.default);y.prototype.kind_="chapters",y.prototype.controlText_="Chapters",h.default.registerComponent("ChaptersButton",y),t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(134),u=r(l),c=n(1),h=r(c),f=function(e){function t(n,r){i(this,t),r.track={player:n,kind:r.kind,label:r.kind+" off",default:!1,mode:"disabled"},r.selectable=!0;var a=o(this,e.call(this,n,r));return a.selected(!0),a}return a(t,e),t.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!0,r=0,i=t.length;r<i;r++){var o=t[r];if(o.kind===this.track.kind&&"showing"===o.mode){n=!1;break}}this.selected(n)},t}(u.default);h.default.registerComponent("OffTextTrackMenuItem",f),t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(96),u=r(l),c=n(1),h=r(c),f=n(7),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),p=function(e){function t(n,r){i(this,t);var a=r.track,s=r.cue,l=n.currentTime();r.selectable=!0,r.label=s.text,r.selected=s.startTime<=l&&l<s.endTime;var u=o(this,e.call(this,n,r));return u.track=a,u.cue=s,a.addEventListener("cuechange",d.bind(u,u.update)),u}return a(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},t.prototype.update=function(e){var t=this.cue,n=this.player_.currentTime();this.selected(t.startTime<=n&&n<t.endTime)},t}(u.default);h.default.registerComponent("ChaptersTrackMenuItem",p),t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(95),u=r(l),c=n(1),h=r(c),f=n(7),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),p=function(e){function t(n,r,a){i(this,t);var s=o(this,e.call(this,n,r,a));s.el_.setAttribute("aria-label","Descriptions Menu");var l=n.textTracks();if(l){var u=d.bind(s,s.handleTracksChange);l.addEventListener("change",u),s.on("dispose",function(){l.removeEventListener("change",u)})}return s}return a(t,e),t.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!1,r=0,i=t.length;r<i;r++){var o=t[r];if(o.kind!==this.kind_&&"showing"===o.mode){n=!0;break}}n?this.disable():this.enable()},t.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},t}(u.default);p.prototype.kind_="descriptions",p.prototype.controlText_="Descriptions",h.default.registerComponent("DescriptionsButton",p),t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(95),u=r(l),c=n(1),h=r(c),f=function(e){function t(n,r,a){i(this,t);var s=o(this,e.call(this,n,r,a));return s.el_.setAttribute("aria-label","Subtitles Menu"),s}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},t}(u.default);f.prototype.kind_="subtitles",f.prototype.controlText_="Subtitles",h.default.registerComponent("SubtitlesButton",f),t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(95),u=r(l),c=n(1),h=r(c),f=n(459),d=r(f),p=function(e){function t(n,r,a){i(this,t);var s=o(this,e.call(this,n,r,a));return s.el_.setAttribute("aria-label","Captions Menu"),s}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},t.prototype.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||(t.push(new d.default(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(u.default);p.prototype.kind_="captions",p.prototype.controlText_="Captions",h.default.registerComponent("CaptionsButton",p),t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(134),u=r(l),c=n(1),h=r(c),f=function(e){function t(n,r){i(this,t),r.track={player:n,kind:r.kind,label:r.kind+" settings",selectable:!1,default:!1,mode:"disabled"},r.selectable=!1;var a=o(this,e.call(this,n,r));return a.addClass("vjs-texttrack-settings"),a.controlText(", opens "+r.kind+" settings dialog"),a}return a(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").show(),this.player().getChild("textTrackSettings").el_.focus()},t}(u.default);h.default.registerComponent("CaptionSettingsMenuItem",f),t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(188),u=r(l),c=n(1),h=r(c),f=n(461),d=r(f),p=function(e){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),r.tracks=n.audioTracks&&n.audioTracks();var a=o(this,e.call(this,n,r));return a.el_.setAttribute("aria-label","Audio Menu"),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},t.prototype.createItems=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.hideThreshold_=1;var t=this.player_.audioTracks&&this.player_.audioTracks();if(!t)return e;for(var n=0;n<t.length;n++){var r=t[n];e.push(new d.default(this.player_,{track:r,selectable:!0}))}return e},t}(u.default);p.prototype.controlText_="Audio Track",h.default.registerComponent("AudioTrackButton",p),t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(96),u=r(l),c=n(1),h=r(c),f=n(7),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),p=function(e){function t(n,r){i(this,t);var a=r.track,s=n.audioTracks();r.label=a.label||a.language||"Unknown",r.selected=a.enabled;var l=o(this,e.call(this,n,r));if(l.track=a,s){var u=d.bind(l,l.handleTracksChange);s.addEventListener("change",u),l.on("dispose",function(){s.removeEventListener("change",u)})}return l}return a(t,e),t.prototype.handleClick=function(t){var n=this.player_.audioTracks();if(e.prototype.handleClick.call(this,t),n)for(var r=0;r<n.length;r++){var i=n[r];i.enabled=i===this.track}},t.prototype.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(u.default);h.default.registerComponent("AudioTrackMenuItem",p),t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(189),u=r(l),c=n(190),h=r(c),f=n(463),d=r(f),p=n(1),v=r(p),y=n(12),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(y),m=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.updateVisibility(),a.updateLabel(),a.on(n,"loadstart",a.updateVisibility),a.on(n,"ratechange",a.updateLabel),a}return a(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelEl_=g.createEl("div",{className:"vjs-playback-rate-value",innerHTML:1}),t.appendChild(this.labelEl_),t},t.prototype.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},t.prototype.createMenu=function(){var e=new h.default(this.player()),t=this.playbackRates();if(t)for(var n=t.length-1;n>=0;n--)e.addChild(new d.default(this.player(),{rate:t[n]+"x"}));return e},t.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.prototype.handleClick=function(e){for(var t=this.player().playbackRate(),n=this.playbackRates(),r=n[0],i=0;i<n.length;i++)if(n[i]>t){r=n[i];break}this.player().playbackRate(r)},t.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},t.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},t.prototype.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.prototype.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(u.default);m.prototype.controlText_="Playback Rate",v.default.registerComponent("PlaybackRateMenuButton",m),t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(96),u=r(l),c=n(1),h=r(c),f=function(e){function t(n,r){i(this,t);var a=r.rate,s=parseFloat(a,10);r.label=a,r.selected=1===s,r.selectable=!0;var l=o(this,e.call(this,n,r));return l.label=a,l.rate=s,l.on(n,"ratechange",l.update),l}return a(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.prototype.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(u.default);f.prototype.contentElType="button",h.default.registerComponent("PlaybackRateMenuItem",f),t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(465),u=r(l),c=n(1),h=r(c),f=function(e){function t(){return i(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML="&nbsp;",t},t}(u.default);h.default.registerComponent("CustomControlSpacer",f),t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var s=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e){function t(){return r(this,t),i(this,e.apply(this,arguments))}return o(t,e),t.prototype.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(l.default);l.default.registerComponent("Spacer",u),t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(1),u=r(l),c=n(181),h=r(c),f=n(44),d=r(f),p=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.on(n,"error",a.open),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},t.prototype.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(h.default);p.prototype.options_=(0,d.default)(h.default.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),u.default.registerComponent("ErrorDisplay",p),t.default=p},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":h(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":h(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}function u(e,t){return l(e.options[e.options.selectedIndex].value,t)}function c(e,t,n){if(t)for(var r=0;r<e.options.length;r++)if(l(e.options[r].value,n)===t){e.selectedIndex=r;break}}var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var f=n(11),d=i(f),p=n(1),v=i(p),y=n(12),g=n(7),m=r(g),b=n(23),_=r(b),E=n(31),k=i(E),T=["#000","Black"],w=["#00F","Blue"],S=["#0FF","Cyan"],C=["#0F0","Green"],O=["#F0F","Magenta"],P=["#F00","Red"],R=["#FFF","White"],L=["#FF0","Yellow"],A=["1","Opaque"],x=["0.5","Semi-Transparent"],D=["0","Transparent"],I={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[T,R,P,C,w,L,O,S]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[A,x,D]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[R,T,P,C,w,L,O,S]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[A,x]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[D,x,A]}};I.windowColor.options=I.backgroundColor.options;var M=function(e){function t(n,r){o(this,t);var i=a(this,e.call(this,n,r));return i.setDefaults(),i.hide(),i.updateDisplay=m.bind(i,i.updateDisplay),void 0===r.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",function(){i.saveSettings(),i.hide()}),i.on(i.$(".vjs-default-button"),"click",function(){i.setDefaults(),i.updateDisplay()}),_.each(I,function(e){i.on(i.$(e.selector),"change",i.updateDisplay)}),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}return s(t,e),t.prototype.createElSelect_=function(e){var t=this,n=I[e],r=n.id.replace("%s",this.id_);return[(0,y.createEl)("label",{className:"vjs-label",textContent:n.label},{for:r}),(0,y.createEl)("select",{id:r},void 0,n.options.map(function(e){return(0,y.createEl)("option",{textContent:t.localize(e[1]),value:e[0]})}))]},t.prototype.createElFgColor_=function(){var e=(0,y.createEl)("legend",{textContent:this.localize("Text")}),t=this.createElSelect_("color"),n=(0,y.createEl)("span",{className:"vjs-text-opacity vjs-opacity"},void 0,this.createElSelect_("textOpacity"));return(0,y.createEl)("fieldset",{className:"vjs-fg-color vjs-tracksetting"},void 0,[e].concat(t,n))},t.prototype.createElBgColor_=function(){var e=(0,y.createEl)("legend",{textContent:this.localize("Background")}),t=this.createElSelect_("backgroundColor"),n=(0,y.createEl)("span",{className:"vjs-bg-opacity vjs-opacity"},void 0,this.createElSelect_("backgroundOpacity"));return(0,y.createEl)("fieldset",{className:"vjs-bg-color vjs-tracksetting"},void 0,[e].concat(t,n))},t.prototype.createElWinColor_=function(){var e=(0,y.createEl)("legend",{textContent:this.localize("Window")}),t=this.createElSelect_("windowColor"),n=(0,y.createEl)("span",{className:"vjs-window-opacity vjs-opacity"},void 0,this.createElSelect_("windowOpacity"));return(0,y.createEl)("fieldset",{className:"vjs-window-color vjs-tracksetting"},void 0,[e].concat(t,n))},t.prototype.createElColors_=function(){return(0,y.createEl)("div",{className:"vjs-tracksettings-colors"},void 0,[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()])},t.prototype.createElFont_=function(){var e=(0,y.createEl)("div",{className:"vjs-font-percent vjs-tracksetting"},void 0,this.createElSelect_("fontPercent")),t=(0,y.createEl)("div",{className:"vjs-edge-style vjs-tracksetting"},void 0,this.createElSelect_("edgeStyle")),n=(0,y.createEl)("div",{className:"vjs-font-family vjs-tracksetting"},void 0,this.createElSelect_("fontFamily"));return(0,y.createEl)("div",{className:"vjs-tracksettings-font"},void 0,[e,t,n])},t.prototype.createElControls_=function(){var e=(0,y.createEl)("button",{className:"vjs-default-button",textContent:this.localize("Defaults")}),t=(0,y.createEl)("button",{className:"vjs-done-button",textContent:"Done"});return(0,y.createEl)("div",{className:"vjs-tracksettings-controls"},void 0,[e,t])},t.prototype.createEl=function(){var e=(0,y.createEl)("div",{className:"vjs-tracksettings"},void 0,[this.createElColors_(),this.createElFont_(),this.createElControls_()]),t=(0,y.createEl)("div",{className:"vjs-control-text",id:"TTsettingsDialogLabel-"+this.id_,textContent:"Caption Settings Dialog"},{"aria-level":"1",role:"heading"}),n=(0,y.createEl)("div",{className:"vjs-control-text",id:"TTsettingsDialogDescription-"+this.id_,textContent:"Beginning of dialog window. Escape will cancel and close the window."}),r=(0,y.createEl)("div",void 0,{role:"document"},[t,n,e]);return(0,y.createEl)("div",{className:"vjs-caption-settings vjs-modal-overlay",tabIndex:-1},{role:"dialog","aria-labelledby":t.id,"aria-describedby":n.id},r)},t.prototype.getValues=function(){var e=this;return _.reduce(I,function(t,n,r){var i=u(e.$(n.selector),n.parser);return void 0!==i&&(t[r]=i),t},{})},t.prototype.setValues=function(e){var t=this;_.each(I,function(n,r){c(t.$(n.selector),e[r],n.parser)})},t.prototype.setDefaults=function(){var e=this;_.each(I,function(t){var n=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=n})},t.prototype.restoreSettings=function(){var e=void 0;try{e=JSON.parse(d.default.localStorage.getItem("vjs-text-track-settings"))}catch(e){k.default.warn(e)}e&&this.setValues(e)},t.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?d.default.localStorage.setItem("vjs-text-track-settings",JSON.stringify(e)):d.default.localStorage.removeItem("vjs-text-track-settings")}catch(e){k.default.warn(e)}}},t.prototype.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},t}(v.default);v.default.registerComponent("TextTrackSettings",M),t.default=M},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var u=function(e,t){return e.raw=t,e}(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),c=n(73),h=i(c),f=n(1),d=i(f),p=n(12),v=r(p),y=n(94),g=r(y),m=n(7),b=r(m),_=n(31),E=i(_),k=n(176),T=i(k),w=n(21),S=r(w),C=n(15),O=i(C),P=n(11),R=i(P),L=n(23),A=n(44),x=i(A),D=n(65),I=i(D),M=function(e){function t(n,r){o(this,t);var i=a(this,e.call(this,n,r)),s=n.source,l=!1;if(s&&(i.el_.currentSrc!==s.src||n.tag&&3===n.tag.initNetworkState_)?i.setSource(s):i.handleLateInit_(i.el_),i.el_.hasChildNodes()){for(var c=i.el_.childNodes,h=c.length,f=[];h--;){var d=c[h];"track"===d.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(d),i.remoteTextTracks().addTrack_(d.track),l||i.el_.hasAttribute("crossorigin")||!g.isCrossOrigin(d.src)||(l=!0)):f.push(d))}for(var p=0;p<f.length;p++)i.el_.removeChild(f[p])}return["audio","video"].forEach(function(e){var t=i.el()[e+"Tracks"],n=i[e+"Tracks"](),r=(0,I.default)(e);i["featuresNative"+r+"Tracks"]&&t&&t.addEventListener&&(i["handle"+r+"TrackChange_"]=function(e){n.trigger({type:"change",target:n,currentTarget:n,srcElement:n})},i["handle"+r+"TrackAdd_"]=function(e){return n.addTrack(e.track)},i["handle"+r+"TrackRemove_"]=function(e){return n.removeTrack(e.track)},t.addEventListener("change",i["handle"+r+"TrackChange_"]),t.addEventListener("addtrack",i["handle"+r+"TrackAdd_"]),t.addEventListener("removetrack",i["handle"+r+"TrackRemove_"]),i["removeOld"+r+"Tracks_"]=function(e){return i.removeOldTracks_(n,t)},i.on("loadstart",i["removeOld"+r+"Tracks_"]))}),i.featuresNativeTextTracks&&(l&&E.default.warn((0,T.default)(u)),i.handleTextTrackChange_=b.bind(i,i.handleTextTrackChange),i.handleTextTrackAdd_=b.bind(i,i.handleTextTrackAdd),i.handleTextTrackRemove_=b.bind(i,i.handleTextTrackRemove),i.proxyNativeTextTracks_()),i.restoreMetadataTracksInIOSNativePlayer_(),(S.TOUCH_ENABLED||S.IS_IPHONE||S.IS_NATIVE_ANDROID)&&!0===n.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}return s(t,e),t.prototype.dispose=function(){var n=this;["audio","video","text"].forEach(function(e){var t=(0,I.default)(e),r=n.el_[e+"Tracks"];r&&r.removeEventListener&&(r.removeEventListener("change",n["handle"+t+"TrackChange_"]),r.removeEventListener("addtrack",n["handle"+t+"TrackAdd_"]),r.removeEventListener("removetrack",n["handle"+t+"TrackRemove_"])),r&&n.off("loadstart",n["removeOld"+t+"Tracks_"])}),t.disposeMediaElement(this.el_),e.prototype.dispose.call(this)},t.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){var e=this.textTracks(),t=void 0,n=function(){t=[];for(var n=0;n<e.length;n++){var r=e[n];"metadata"===r.kind&&t.push({track:r,storedMode:r.mode})}};n(),e.addEventListener("change",n);var r=function n(){for(var r=0;r<t.length;r++){var i=t[r];"disabled"===i.track.mode&&i.track.mode!==i.storedMode&&(i.track.mode=i.storedMode)}e.removeEventListener("change",n)};this.on("webkitbeginfullscreen",function(){e.removeEventListener("change",n),e.removeEventListener("change",r),e.addEventListener("change",r)}),this.on("webkitendfullscreen",function(){e.removeEventListener("change",n),e.addEventListener("change",n),e.removeEventListener("change",r)})},t.prototype.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),t.disposeMediaElement(e),e=n}else{e=O.default.createElement("video");var r=this.options_.tag&&v.getElAttributes(this.options_.tag),i=(0,x.default)({},r);S.TOUCH_ENABLED&&!0===this.options_.nativeControlsForTouch||delete i.controls,v.setElAttributes(e,(0,L.assign)(i,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&v.setAttribute(e,"preload",this.options_.preload);for(var o=["loop","muted","playsinline","autoplay"],a=o.length-1;a>=0;a--){var s=o[a],l=this.options_[s];void 0!==l&&(l?v.setAttribute(e,s,s):v.removeAttribute(e,s),e[s]=l)}return e},t.prototype.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,n=function(){t=!0};this.on("loadstart",n);var r=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",r),void this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",r),t||this.trigger("loadstart")})}var i=["loadstart"];i.push("loadedmetadata"),e.readyState>=2&&i.push("loadeddata"),e.readyState>=3&&i.push("canplay"),e.readyState>=4&&i.push("canplaythrough"),this.ready(function(){i.forEach(function(e){this.trigger(e)},this)})}},t.prototype.proxyNativeTextTracks_=function(){var e=this.el().textTracks;if(e){for(var t=0;t<e.length;t++)this.textTracks().addTrack_(e[t]);e.addEventListener&&(e.addEventListener("change",this.handleTextTrackChange_),e.addEventListener("addtrack",this.handleTextTrackAdd_),e.addEventListener("removetrack",this.handleTextTrackRemove_)),this.on("loadstart",this.removeOldTextTracks_)}},t.prototype.handleTextTrackChange=function(e){var t=this.textTracks();this.textTracks().trigger({type:"change",target:t,currentTarget:t,srcElement:t})},t.prototype.handleTextTrackAdd=function(e){this.textTracks().addTrack_(e.track)},t.prototype.handleTextTrackRemove=function(e){this.textTracks().removeTrack_(e.track)},t.prototype.removeOldTracks_=function(e,t){var n=[];if(t){for(var r=0;r<e.length;r++){for(var i=e[r],o=!1,a=0;a<t.length;a++)if(t[a]===i){o=!0;break}o||n.push(i)}for(var s=0;s<n.length;s++){var l=n[s];e.removeTrack_(l)}}},t.prototype.removeOldTextTracks_=function(e){var t=this.textTracks(),n=this.el().textTracks;this.removeOldTracks_(t,n)},t.prototype.play=function(){var e=this.el_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(e){})},t.prototype.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){(0,E.default)(e,"Video is not ready. (Video.js)")}},t.prototype.duration=function(){var e=this;if(this.el_.duration===1/0&&S.IS_ANDROID&&S.IS_CHROME&&0===this.el_.currentTime){var t=function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))};return this.on("timeupdate",t),NaN}return this.el_.duration||NaN},t.prototype.width=function(){return this.el_.offsetWidth},t.prototype.height=function(){return this.el_.offsetHeight},t.prototype.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",function(){e.off("webkitbeginfullscreen",n),e.off("webkitendfullscreen",t)})}},t.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=R.default.navigator&&R.default.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},t.prototype.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},t.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},t.prototype.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},t.prototype.reset=function(){t.resetMediaElement(this.el_)},t.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.prototype.setControls=function(e){this.el_.controls=!!e},t.prototype.addTextTrack=function(t,n,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,n,r):e.prototype.addTextTrack.call(this,t,n,r)},t.prototype.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var n=O.default.createElement("track");return t.kind&&(n.kind=t.kind),t.label&&(n.label=t.label),(t.language||t.srclang)&&(n.srclang=t.language||t.srclang),t.default&&(n.default=t.default),t.id&&(n.id=t.id),t.src&&(n.src=t.src),n},t.prototype.addRemoteTextTrack=function(t,n){var r=e.prototype.addRemoteTextTrack.call(this,t,n);return this.featuresNativeTextTracks&&this.el().appendChild(r),r},t.prototype.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var n=this.$$("track"),r=n.length;r--;)t!==n[r]&&t!==n[r].track||this.el().removeChild(n[r])},t.prototype.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),R.default.performance&&"function"==typeof R.default.performance.now?e.creationTime=R.default.performance.now():R.default.performance&&R.default.performance.timing&&"number"==typeof R.default.performance.timing.navigationStart&&(e.creationTime=R.default.Date.now()-R.default.performance.timing.navigationStart),e},t}(h.default);if(v.isReal()){M.TEST_VID=O.default.createElement("video");var j=O.default.createElement("track");j.kind="captions",j.srclang="en",j.label="English",M.TEST_VID.appendChild(j)}M.isSupported=function(){try{M.TEST_VID.volume=.5}catch(e){return!1}return!(!M.TEST_VID||!M.TEST_VID.canPlayType)},M.canControlVolume=function(){try{var e=M.TEST_VID.volume;return M.TEST_VID.volume=e/2+.1,e!==M.TEST_VID.volume}catch(e){return!1}},M.canControlPlaybackRate=function(){if(S.IS_ANDROID&&S.IS_CHROME&&S.CHROME_VERSION<58)return!1;try{var e=M.TEST_VID.playbackRate;return M.TEST_VID.playbackRate=e/2+.1,e!==M.TEST_VID.playbackRate}catch(e){return!1}},M.supportsNativeTextTracks=function(){return S.IS_ANY_SAFARI},M.supportsNativeVideoTracks=function(){return!(!M.TEST_VID||!M.TEST_VID.videoTracks)},M.supportsNativeAudioTracks=function(){return!(!M.TEST_VID||!M.TEST_VID.audioTracks)},M.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","volumechange"],M.prototype.featuresVolumeControl=M.canControlVolume(),M.prototype.featuresPlaybackRate=M.canControlPlaybackRate(),M.prototype.movingMediaElementInDOM=!S.IS_IOS,M.prototype.featuresFullscreenResize=!0,M.prototype.featuresProgressEvents=!0,M.prototype.featuresTimeupdateEvents=!0,M.prototype.featuresNativeTextTracks=M.supportsNativeTextTracks(),M.prototype.featuresNativeVideoTracks=M.supportsNativeVideoTracks(),M.prototype.featuresNativeAudioTracks=M.supportsNativeAudioTracks();var N=M.TEST_VID&&M.TEST_VID.constructor.prototype.canPlayType,F=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,B=/^video\/mp4/i;M.patchCanPlayType=function(){S.ANDROID_VERSION>=4&&!S.IS_FIREFOX?M.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&F.test(e)?"maybe":N.call(this,e)}:S.IS_OLD_ANDROID&&(M.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&B.test(e)?"maybe":N.call(this,e)})},M.unpatchCanPlayType=function(){var e=M.TEST_VID.constructor.prototype.canPlayType;return M.TEST_VID.constructor.prototype.canPlayType=N,e},M.patchCanPlayType(),M.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},M.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){M.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){M.prototype["set"+(0,I.default)(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(e){M.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate"].forEach(function(e){M.prototype["set"+(0,I.default)(e)]=function(t){this.el_[e]=t}}),["pause","load"].forEach(function(e){M.prototype[e]=function(){return this.el_[e]()}}),h.default.withSourceHandlers(M),M.nativeSourceHandler={},M.nativeSourceHandler.canPlayType=function(e){try{return M.TEST_VID.canPlayType(e)}catch(e){return""}},M.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return M.nativeSourceHandler.canPlayType(e.type);if(e.src){var n=g.getFileExtension(e.src);return M.nativeSourceHandler.canPlayType("video/"+n)}return""},M.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},M.nativeSourceHandler.dispose=function(){},M.registerSourceHandler(M.nativeSourceHandler),d.default.registerComponent("Html5",M),h.default.registerTech("Html5",M),t.default=M},function(e,t,n){"use strict";t.__esModule=!0;var r=n(178),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(e,t){i.default.prototype[e]=t};t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(130),u=n(131),c=r(u),h=n(44),f=r(h),d=n(21),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(d),v=function(e){function t(){var n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var s=(0,f.default)(a,{kind:l.AudioTrackKind[a.kind]||""}),u=n=o(this,e.call(this,s)),c=!1;if(p.IS_IE8)for(var h in t.prototype)"constructor"!==h&&(u[h]=t.prototype[h]);return Object.defineProperty(u,"enabled",{get:function(){return c},set:function(e){"boolean"==typeof e&&e!==c&&(c=e,this.trigger("enabledchange"))}}),s.enabled&&(u.enabled=s.enabled),u.loaded_=!0,r=u,o(n,r)}return a(t,e),t}(c.default);t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=n(130),u=n(131),c=r(u),h=n(44),f=r(h),d=n(21),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(d),v=function(e){function t(){var n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var s=(0,f.default)(a,{kind:l.VideoTrackKind[a.kind]||""}),u=n=o(this,e.call(this,s)),c=!1;if(p.IS_IE8)for(var h in t.prototype)"constructor"!==h&&(u[h]=t.prototype[h]);return Object.defineProperty(u,"selected",{get:function(){return c},set:function(e){"boolean"==typeof e&&e!==c&&(c=e,this.trigger("selectedchange"))}}),s.selected&&(u.selected=s.selected),r=u,o(n,r)}return a(t,e),t}(c.default);t.default=v},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return void 0===e?"undefined":r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":r(e)},o=n(31),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(23),l=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(){e.apply(this,arguments)},r={};(0,s.isObject)(t)?("function"==typeof t.init&&(a.default.warn("Constructor logic via init() is deprecated; please use constructor() instead."),t.constructor=t.init),t.constructor!==Object.prototype.constructor&&(n=t.constructor),r=t):"function"==typeof t&&(n=t),l(n,e);for(var i in r)r.hasOwnProperty(i)&&(n.prototype[i]=r[i]);return n};t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(191),s=r(a),l=n(13),u=r(l),c=n(19),h=n(475),f=r(h),d=n(477),p=r(d),v=n(478),y=r(v),g=n(479),m=r(g),b=n(495),_=r(b),E=n(496),k=r(E),T=n(8),w=n(137),S=r(w),C=n(497),O=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var r=e.DefaultConfig;if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var o in r)o in n||(n[o]=r[o]);if(void 0!==n.liveMaxLatencyDurationCount&&n.liveMaxLatencyDurationCount<=n.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==n.liveMaxLatencyDuration&&(n.liveMaxLatencyDuration<=n.liveSyncDuration||void 0===n.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');(0,T.enableLogs)(n.debug),this.config=n,this._autoLevelCapping=-1;var a=this.observer=new S.default;a.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.emit.apply(a,[e,e].concat(n))},a.off=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.removeListener.apply(a,[e].concat(n))},this.on=a.on.bind(a),this.off=a.off.bind(a),this.trigger=a.trigger.bind(a);var s=this.abrController=new n.abrController(this),l=new n.bufferController(this),u=new n.capLevelController(this),c=new n.fpsController(this),h=new f.default(this),d=new p.default(this),v=new y.default(this),g=new k.default(this),b=this.levelController=new _.default(this),E=this.streamController=new m.default(this),w=[b,E],C=n.audioStreamController;C&&w.push(new C(this)),this.networkControllers=w;var O=[h,d,v,s,l,u,c,g];if(C=n.audioTrackController){var P=new C(this);this.audioTrackController=P,O.push(P)}if(C=n.subtitleTrackController){var R=new C(this);this.subtitleTrackController=R,O.push(R)}[n.subtitleStreamController,n.timelineController].forEach(function(e){e&&O.push(new e(t))}),this.coreComponents=O}return o(e,null,[{key:"isSupported",value:function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return n&&r}},{key:"version",get:function(){return"__VERSION__"}},{key:"Events",get:function(){return u.default}},{key:"ErrorTypes",get:function(){return c.ErrorTypes}},{key:"ErrorDetails",get:function(){return c.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:C.hlsDefaultConfig},set:function(t){e.defaultConfig=t}}]),o(e,[{key:"destroy",value:function(){T.logger.log("destroy"),this.trigger(u.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1}},{key:"attachMedia",value:function(e){T.logger.log("attachMedia"),this.media=e,this.trigger(u.default.MEDIA_ATTACHING,{media:e})}},{key:"detachMedia",value:function(){T.logger.log("detachMedia"),this.trigger(u.default.MEDIA_DETACHING),this.media=null}},{key:"loadSource",value:function(e){e=s.default.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),T.logger.log("loadSource:"+e),this.url=e,this.trigger(u.default.MANIFEST_LOADING,{url:e})}},{key:"startLoad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;T.logger.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})}},{key:"stopLoad",value:function(){T.logger.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})}},{key:"swapAudioCodec",value:function(){T.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}},{key:"recoverMediaError",value:function(){T.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)}},{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){T.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){T.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){T.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){T.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){T.logger.log("set startLevel:"+e);var t=this;-1!==e&&(e=Math.max(e,t.minAutoLevel)),t.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){T.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this,t=e.levels,n=e.config.minAutoBitrate,r=t?t.length:0,i=0;i<r;i++){if((t[i].realBitrate?Math.max(t[i].realBitrate,t[i].bitrate):t[i].bitrate)>n)return i}return 0}},{key:"maxAutoLevel",get:function(){var e=this,t=e.levels,n=e.autoLevelCapping;return-1===n&&t&&t.length?t.length-1:n}},{key:"nextAutoLevel",get:function(){var e=this;return Math.min(Math.max(e.abrController.nextAutoLevel,e.minAutoLevel),e.maxAutoLevel)},set:function(e){var t=this;t.abrController.nextAutoLevel=Math.max(t.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}}]),e}();t.default=O},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(191),u=r(l),c=n(13),h=r(c),f=n(24),d=r(f),p=n(19),v=n(476),y=r(v),g=n(8),m=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,b=/#EXT-X-MEDIA:(.*)/g,_=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),E=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,k=function(){function e(){a(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return s(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=u.default.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}(),T=function(){function e(){a(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return s(e,[{key:"createInitializationVector",value:function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t}},{key:"fragmentDecryptdataFromLevelkey",value:function(e,t){var n=e;return e&&e.method&&e.uri&&!e.iv&&(n=new k,n.method=e.method,n.baseuri=e.baseuri,n.reluri=e.reluri,n.iv=this.createInitializationVector(t)),n}},{key:"cloneObj",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=u.default.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var e=this._byteRange=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var n=this.lastByteRangeEndOffset;e[0]=n||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),e}(),w=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,h.default.MANIFEST_LOADING,h.default.LEVEL_LOADING,h.default.AUDIO_TRACK_LOADING,h.default.SUBTITLE_TRACK_LOADING));return n.loaders={},n}return o(t,e),s(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},d.default.prototype.destroy.call(this)}},{key:"onManifestLoading",value:function(e){this.load(e.url,{type:"manifest"})}},{key:"onLevelLoading",value:function(e){this.load(e.url,{type:"level",level:e.level,id:e.id})}},{key:"onAudioTrackLoading",value:function(e){this.load(e.url,{type:"audioTrack",id:e.id})}},{key:"onSubtitleTrackLoading",value:function(e){this.load(e.url,{type:"subtitleTrack",id:e.id})}},{key:"load",value:function(e,t){var n=this.loaders[t.type];if(n){var r=n.context;if(r&&r.url===e)return void g.logger.trace("playlist request ongoing");g.logger.warn("abort previous loader for type:"+t.type),n.abort()}var i=this.hls.config,o=void 0,a=void 0,s=void 0,l=void 0;"manifest"===t.type?(o=i.manifestLoadingMaxRetry,a=i.manifestLoadingTimeOut,s=i.manifestLoadingRetryDelay,l=i.manifestLoadingMaxRetryTimeout):(o=i.levelLoadingMaxRetry,a=i.levelLoadingTimeOut,s=i.levelLoadingRetryDelay,l=i.levelLoadingMaxRetryTimeout,g.logger.log("loading playlist for "+t.type+" "+(t.level||t.id))),n=this.loaders[t.type]=t.loader=void 0!==i.pLoader?new i.pLoader(i):new i.loader(i),t.url=e,t.responseType="";var u=void 0,c=void 0;u={timeout:a,maxRetry:o,retryDelay:s,maxRetryDelay:l},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},n.load(t,u,c)}},{key:"resolve",value:function(e,t){return u.default.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}},{key:"parseMasterPlaylist",value:function(e,t){var n=[],r=void 0;for(m.lastIndex=0;null!=(r=m.exec(e));){var i={},o=i.attrs=new y.default(r[1]);i.url=this.resolve(r[2],t);var a=o.decimalResolution("RESOLUTION");a&&(i.width=a.width,i.height=a.height),i.bitrate=o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),i.name=o.NAME;var s=o.CODECS;if(s){s=s.split(/[ ,]+/);for(var l=0;l<s.length;l++){var u=s[l];-1!==u.indexOf("avc1")?i.videoCodec=this.avc1toavcoti(u):-1!==u.indexOf("hvc1")?i.videoCodec=u:i.audioCodec=u}}n.push(i)}return n}},{key:"parseMasterPlaylistMedia",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=void 0,o=[],a=0;for(b.lastIndex=0;null!=(i=b.exec(e));){var s={},l=new y.default(i[1]);l.TYPE===n&&(s.groupId=l["GROUP-ID"],s.name=l.NAME,s.type=n,s.default="YES"===l.DEFAULT,s.autoselect="YES"===l.AUTOSELECT,s.forced="YES"===l.FORCED,l.URI&&(s.url=this.resolve(l.URI,t)),s.lang=l.LANGUAGE,s.name||(s.name=s.lang),r&&(s.audioCodec=r),s.id=a++,o.push(s))}return o}},{key:"avc1toavcoti",value:function(e){var t,n=e.split(".");return n.length>2?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):t=e,t}},{key:"parseLevelPlaylist",value:function(e,t,n,r){var i,o,a=0,s=0,l={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},u=new k,c=0,h=null,f=new T;for(_.lastIndex=0;null!==(i=_.exec(e));){var d=i[1];if(d){f.duration=parseFloat(d);var p=(" "+i[2]).slice(1);f.title=p||null,f.tagList.push(p?["INF",d,p]:["INF",d])}else if(i[3]){if(!isNaN(f.duration)){var v=a++;f.type=r,f.start=s,f.levelkey=u,f.sn=v,f.level=n,f.cc=c,f.baseurl=t,f.relurl=(" "+i[3]).slice(1),l.fragments.push(f),h=f,s+=f.duration,f=new T}}else if(i[4]){if(f.rawByteRange=(" "+i[4]).slice(1),h){var m=h.byteRangeEndOffset;m&&(f.lastByteRangeEndOffset=m)}}else if(i[5])f.rawProgramDateTime=(" "+i[5]).slice(1),f.tagList.push(["PROGRAM-DATE-TIME",f.rawProgramDateTime]);else{for(i=i[0].match(E),o=1;o<i.length&&void 0===i[o];o++);var b=(" "+i[o+1]).slice(1),w=(" "+i[o+2]).slice(1);switch(i[o]){case"#":f.tagList.push(w?[b,w]:[b]);break;case"PLAYLIST-TYPE":l.type=b.toUpperCase();break;case"MEDIA-SEQUENCE":a=l.startSN=parseInt(b);break;case"TARGETDURATION":l.targetduration=parseFloat(b);break;case"VERSION":l.version=parseInt(b);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"DIS":c++,f.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":c=parseInt(b);break;case"KEY":var S=b,C=new y.default(S),O=C.enumeratedString("METHOD"),P=C.URI,R=C.hexadecimalInteger("IV");O&&(u=new k,P&&["AES-128","SAMPLE-AES"].indexOf(O)>=0&&(u.method=O,u.baseuri=t,u.reluri=P,u.key=null,u.iv=R));break;case"START":var L=b,A=new y.default(L),x=A.decimalFloatingPoint("TIME-OFFSET");isNaN(x)||(l.startTimeOffset=x);break;case"MAP":var D=new y.default(b);f.relurl=D.URI,f.rawByteRange=D.BYTERANGE,f.baseurl=t,f.level=n,f.type=r,f.sn="initSegment",l.initSegment=f,f=new T;break;default:g.logger.warn("line parsed but not handled: "+i)}}}return f=h,f&&!f.relurl&&(l.fragments.pop(),s-=f.duration),l.totalduration=s,l.averagetargetduration=s/l.fragments.length,l.endSN=a-1,l}},{key:"loadsuccess",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=e.data,o=e.url,a=n.type,s=n.id,l=n.level,u=this.hls;if(this.loaders[a]=void 0,void 0!==o&&0!==o.indexOf("data:")||(o=n.url),t.tload=performance.now(),0===i.indexOf("#EXTM3U"))if(i.indexOf("#EXTINF:")>0){var c="audioTrack"!==a&&"subtitleTrack"!==a,f=isNaN(l)?isNaN(s)?0:s:l,d=this.parseLevelPlaylist(i,o,f,"audioTrack"===a?"audio":"subtitleTrack"===a?"subtitle":"main");d.tload=t.tload,"manifest"===a&&u.trigger(h.default.MANIFEST_LOADED,{levels:[{url:o,details:d}],audioTracks:[],url:o,stats:t,networkDetails:r}),t.tparsed=performance.now(),d.targetduration?c?u.trigger(h.default.LEVEL_LOADED,{details:d,level:l||0,id:s||0,stats:t,networkDetails:r}):"audioTrack"===a?u.trigger(h.default.AUDIO_TRACK_LOADED,{details:d,id:s,stats:t,networkDetails:r}):"subtitleTrack"===a&&u.trigger(h.default.SUBTITLE_TRACK_LOADED,{details:d,id:s,stats:t,networkDetails:r}):u.trigger(h.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:o,reason:"invalid targetduration",networkDetails:r})}else{var v=this.parseMasterPlaylist(i,o);if(v.length){var y=this.parseMasterPlaylistMedia(i,o,"AUDIO",v[0].audioCodec),m=this.parseMasterPlaylistMedia(i,o,"SUBTITLES");if(y.length){var b=!1;y.forEach(function(e){e.url||(b=!0)}),!1===b&&v[0].audioCodec&&!v[0].attrs.AUDIO&&(g.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),y.unshift({type:"main",name:"main"}))}u.trigger(h.default.MANIFEST_LOADED,{levels:v,audioTracks:y,subtitles:m,url:o,stats:t,networkDetails:r})}else u.trigger(h.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:o,reason:"no level found in manifest",networkDetails:r})}else u.trigger(h.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:o,reason:"no EXTM3U delimiter",networkDetails:r})}},{key:"loaderror",value:function(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=t.loader;switch(t.type){case"manifest":n=p.ErrorDetails.MANIFEST_LOAD_ERROR,r=!0;break;case"level":n=p.ErrorDetails.LEVEL_LOAD_ERROR,r=!1;break;case"audioTrack":n=p.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,r=!1}o&&(o.abort(),this.loaders[t.type]=void 0),this.hls.trigger(h.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:n,fatal:r,url:o.url,loader:o,response:e,context:t,networkDetails:i})}},{key:"loadtimeout",value:function(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=t.loader;switch(t.type){case"manifest":n=p.ErrorDetails.MANIFEST_LOAD_TIMEOUT,r=!0;break;case"level":n=p.ErrorDetails.LEVEL_LOAD_TIMEOUT,r=!1;break;case"audioTrack":n=p.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT,r=!1}o&&(o.abort(),this.loaders[t.type]=void 0),this.hls.trigger(h.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:n,fatal:r,url:o.url,loader:o,context:t,networkDetails:i})}}]),t}(d.default);t.default=w},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=/^(\d+)x(\d+)$/,a=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,s=function(){function e(t){r(this,e),"string"==typeof t&&(t=e.parseAttrList(t));for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])}return i(e,[{key:"decimalInteger",value:function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"hexadecimalInteger",value:function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)n[r]=parseInt(t.slice(2*r,2*r+2),16);return n}return null}},{key:"hexadecimalIntegerAsNumber",value:function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"decimalFloatingPoint",value:function(e){return parseFloat(this[e])}},{key:"enumeratedString",value:function(e){return this[e]}},{key:"decimalResolution",value:function(e){var t=o.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}}],[{key:"parseAttrList",value:function(e){var t,n={};for(a.lastIndex=0;null!==(t=a.exec(e));){var r=t[2];0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1&&(r=r.slice(1,-1)),n[t[1]]=r}return n}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(13),u=r(l),c=n(24),h=r(c),f=n(19),d=n(8),p=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u.default.FRAG_LOADING));return n.loaders={},n}return a(t,e),s(t,[{key:"destroy",value:function(){var e=this.loaders;for(var t in e){var n=e[t];n&&n.destroy()}this.loaders={},h.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag,n=t.type,r=this.loaders[n],i=this.hls.config;t.loaded=0,r&&(d.logger.warn("abort previous fragment loader for type:"+n),r.abort()),r=this.loaders[n]=t.loader=void 0!==i.fLoader?new i.fLoader(i):new i.loader(i);var o=void 0,a=void 0,s=void 0;o={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var l=t.byteRangeStartOffset,u=t.byteRangeEndOffset;isNaN(l)||isNaN(u)||(o.rangeStart=l,o.rangeEnd=u),a={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},r.load(o,a,s)}},{key:"loadsuccess",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=e.data,o=n.frag;o.loader=void 0,this.loaders[o.type]=void 0,this.hls.trigger(u.default.FRAG_LOADED,{payload:i,frag:o,stats:t,networkDetails:r})}},{key:"loaderror",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(u.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:n})}},{key:"loadtimeout",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(u.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:n})}},{key:"loadprogress",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t.frag;i.loaded=e.loaded,this.hls.trigger(u.default.FRAG_LOAD_PROGRESS,{frag:i,stats:e,networkDetails:r})}}]),t}(h.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(13),u=r(l),c=n(24),h=r(c),f=n(19),d=n(8),p=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u.default.KEY_LOADING));return n.loaders={},n.decryptkey=null,n.decrypturl=null,n}return a(t,e),s(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},h.default.prototype.destroy.call(this)}},{key:"onKeyLoading",value:function(e){var t=e.frag,n=t.type,r=this.loaders[n],i=t.decryptdata,o=i.uri;if(o!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;r&&(d.logger.warn("abort previous key loader for type:"+n),r.abort()),t.loader=this.loaders[n]=new a.loader(a),this.decrypturl=o,this.decryptkey=null;var s=void 0,l=void 0,c=void 0;s={url:o,frag:t,responseType:"arraybuffer"},l={timeout:a.fragLoadingTimeOut,maxRetry:a.fragLoadingMaxRetry,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(s,l,c)}else this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(u.default.KEY_LOADED,{frag:t}))}},{key:"loadsuccess",value:function(e,t,n){var r=n.frag;this.decryptkey=r.decryptdata.key=new Uint8Array(e.data),r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(u.default.KEY_LOADED,{frag:r})}},{key:"loaderror",value:function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(u.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})}},{key:"loadtimeout",value:function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(u.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})}}]),t}(h.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(135),u=r(l),c=n(97),h=r(c),f=n(192),d=r(f),p=n(13),v=r(p),y=n(24),g=r(y),m=n(197),b=r(m),_=n(198),E=r(_),k=n(19),T=n(8),w={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},S=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,v.default.MEDIA_ATTACHED,v.default.MEDIA_DETACHING,v.default.MANIFEST_LOADING,v.default.MANIFEST_PARSED,v.default.LEVEL_LOADED,v.default.KEY_LOADED,v.default.FRAG_LOADED,v.default.FRAG_LOAD_EMERGENCY_ABORTED,v.default.FRAG_PARSING_INIT_SEGMENT,v.default.FRAG_PARSING_DATA,v.default.FRAG_PARSED,v.default.ERROR,v.default.AUDIO_TRACK_SWITCHING,v.default.AUDIO_TRACK_SWITCHED,v.default.BUFFER_CREATED,v.default.BUFFER_APPENDED,v.default.BUFFER_FLUSHED));return n.config=e.config,n.audioCodecSwap=!1,n.ticks=0,n._state=w.STOPPED,n.ontick=n.tick.bind(n),n}return a(t,e),s(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),g.default.prototype.destroy.call(this),this.state=w.STOPPED}},{key:"startLoad",value:function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;-1===r&&(r=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}t>0&&-1===e&&(T.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=w.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=w.STOPPED}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=w.STOPPED,this.forceStartLoad=!1}},{key:"tick",value:function(){1===++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){switch(this.state){case w.ERROR:break;case w.BUFFER_FLUSHING:this.fragLoadError=0;break;case w.IDLE:this._doTickIdle();break;case w.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=w.IDLE);break;case w.FRAG_LOADING_WAITING_RETRY:var t=performance.now(),n=this.retryDate;(!n||t>=n||this.media&&this.media.seeking)&&(T.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=w.IDLE);break;case w.ERROR:case w.STOPPED:case w.FRAG_LOADING:case w.PARSING:case w.PARSED:case w.ENDED:}this._checkBuffer(),this._checkFragmentChanged()}},{key:"_doTickIdle",value:function(){var e=this.hls,t=e.config,n=this.media;if(void 0===this.levelLastLoaded||n||!this.startFragRequested&&t.startFragPrefetch){var r=void 0;r=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,o=this.levels[i];if(o){var a=o.bitrate,s=void 0;s=a?Math.max(8*t.maxBufferSize/a,t.maxBufferLength):t.maxBufferLength,s=Math.min(s,t.maxMaxBufferLength);var l=h.default.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,r,t.maxBufferHole),u=l.len;if(!(u>=s)){T.logger.trace("buffer length of "+u.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var c=o.details;if(void 0===c||c.live&&this.levelLastLoaded!==i)return void(this.state=w.WAITING_LEVEL);var f=this.fragPrevious;if(!c.live&&f&&f.sn===c.endSN&&u&&!l.nextStart){if(Math.min(n.duration,f.start+f.duration)-Math.max(l.end,f.start)<=Math.max(.2,f.duration)){var d={};return this.altAudio&&(d.type="video"),this.hls.trigger(v.default.BUFFER_EOS,d),void(this.state=w.ENDED)}}this._fetchPayloadOrEos(r,l,c)}}}}},{key:"_fetchPayloadOrEos",value:function(e,t,n){var r=this.fragPrevious,i=this.level,o=n.fragments,a=o.length;if(0!==a){var s=o[0].start,l=o[a-1].start+o[a-1].duration,u=t.end,c=void 0;if(n.initSegment&&!n.initSegment.data)c=n.initSegment;else if(n.live){var h=this.config.initialLiveManifestSize;if(a<h)return void T.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+h);if(null===(c=this._ensureFragmentAtLivePoint(n,u,s,l,r,o,a)))return}else u<s&&(c=o[0]);c||(c=this._findFragment(s,r,a,o,u,l,n)),c&&this._loadFragmentOrKey(c,i,n,e,u)}}},{key:"_ensureFragmentAtLivePoint",value:function(e,t,n,r,i,o,a){var s=this.hls.config,l=this.media,c=void 0,h=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(n-s.maxFragLookUpTolerance,r-h)){var f=this.liveSyncPosition=this.computeLivePosition(n,e);T.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),t=f,l&&l.readyState&&l.duration>f&&(l.currentTime=f),this.nextLoadPosition=f}if(e.PTSKnown&&t>r&&l&&l.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(i){var d=i.sn+1;if(d>=e.startSN&&d<=e.endSN){var p=o[d-e.startSN];i.cc===p.cc&&(c=p,T.logger.log("live playlist, switching playlist, load frag with next SN: "+c.sn))}c||(c=u.default.search(o,function(e){return i.cc-e.cc}))&&T.logger.log("live playlist, switching playlist, load frag with same CC: "+c.sn)}c||(c=o[Math.min(a-1,Math.round(a/2))],T.logger.log("live playlist, switching playlist, unknown, load middle frag : "+c.sn))}return c}},{key:"_findFragment",value:function(e,t,n,r,i,o,a){var s=this.hls.config,l=void 0,c=void 0,h=s.maxFragLookUpTolerance,f=t?r[t.sn-r[0].sn+1]:void 0,d=function(e){var t=Math.min(h,e.duration);return e.start+e.duration-t<=i?1:e.start-t>i&&e.start?-1:0};if(i<o?(i>o-h&&(h=0),c=f&&!d(f)?f:u.default.search(r,d)):c=r[n-1],c){l=c;var p=l.sn-a.startSN,v=t&&l.level===t.level,y=r[p-1],g=r[p+1];if(t&&l.sn===t.sn)if(v&&!l.backtracked)if(l.sn<a.endSN){var m=t.deltaPTS;m&&m>s.maxBufferHole&&t.dropped&&p?(l=y,T.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),t.loadCounter--):(l=g,T.logger.log("SN just loaded, load next one: "+l.sn))}else l=null;else l.backtracked&&(g&&g.backtracked?(T.logger.warn("Already backtracked from fragment "+g.sn+", will not backtrack to fragment "+l.sn+". Loading fragment "+g.sn),l=g):(T.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),l.dropped=0,y?(y.loadCounter&&y.loadCounter--,l=y,l.backtracked=!0):p&&(l=null)))}return l}},{key:"_loadFragmentOrKey",value:function(e,t,n,r,i){var o=this.hls,a=o.config;if(!e.decryptdata||null==e.decryptdata.uri||null!=e.decryptdata.key){if(T.logger.log("Loading "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t+", currentTime:"+r.toFixed(3)+",bufferEnd:"+i.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;var s=a.fragLoadingLoopThreshold;if(e.loadCounter>s&&Math.abs(this.fragLoadIdx-e.loadIdx)<s)return void o.trigger(v.default.ERROR,{type:k.ErrorTypes.MEDIA_ERROR,details:k.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e})}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||(this.nextLoadPosition=e.start+e.duration),e.autoLevel=o.autoLevelEnabled,e.bitrateTest=this.bitrateTest,o.trigger(v.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new d.default(o,"main")),void(this.state=w.FRAG_LOADING)}T.logger.log("Loading key for "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t),this.state=w.KEY_LOADING,o.trigger(v.default.KEY_LOADING,{frag:e})}},{key:"getBufferedFrag",value:function(e){return u.default.search(this._bufferedFrags,function(t){return e<t.startPTS?-1:e>t.endPTS?1:0})}},{key:"followingBufferedFrag",value:function(e){return e?this.getBufferedFrag(e.endPTS+.5):null}},{key:"_checkFragmentChanged",value:function(){var e,t,n=this.media;if(n&&n.readyState&&!1===n.seeking&&(t=n.currentTime,t>n.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),h.default.isBuffered(n,t)?e=this.getBufferedFrag(t):h.default.isBuffered(n,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var r=e;if(r!==this.fragPlaying){this.hls.trigger(v.default.FRAG_CHANGED,{frag:r});var i=r.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(v.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=r}}}},{key:"immediateLevelSwitch",value:function(){if(T.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}},{key:"immediateLevelSwitchEnd",value:function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,h.default.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())}},{key:"nextLevelSwitch",value:function(){var e=this.media;if(e&&e.readyState){var t=void 0,n=void 0,r=void 0;if(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,n=this.getBufferedFrag(e.currentTime),n&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),e.paused)t=0;else{var i=this.hls.nextLoadLevel,o=this.levels[i],a=this.fragLastKbps;t=a&&this.fragCurrent?this.fragCurrent.duration*o.bitrate/(1e3*a)+1:0}if((r=this.getBufferedFrag(e.currentTime+t))&&(r=this.followingBufferedFrag(r))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(r.maxStartPTS,Number.POSITIVE_INFINITY)}}}},{key:"flushMainBuffer",value:function(e,t){this.state=w.BUFFER_FLUSHING;var n={startOffset:e,endOffset:t};this.altAudio&&(n.type="video"),this.hls.trigger(v.default.BUFFER_FLUSHING,n)}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(T.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0,e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){var e=this.media,t=e?e.currentTime:void 0,n=this.config;isNaN(t)||T.logger.log("media seeking to "+t.toFixed(3));var r=this.mediaBuffer?this.mediaBuffer:e,i=h.default.bufferInfo(r,t,this.config.maxBufferHole);if(this.state===w.FRAG_LOADING){var o=this.fragCurrent;if(0===i.len&&o){var a=n.maxFragLookUpTolerance,s=o.start-a,l=o.start+o.duration+a;t<s||t>l?(o.loader&&(T.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=w.IDLE):T.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===w.ENDED&&(0===i.len&&(this.fragPrevious=0),this.state=w.IDLE);e&&(this.lastCurrentTime=t),this.state!==w.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*n.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()}},{key:"onMediaSeeked",value:function(){var e=this.media,t=e?e.currentTime:void 0;isNaN(t)||T.logger.log("media seeked to "+t.toFixed(3)),this.tick()}},{key:"onMediaEnded",value:function(){T.logger.log("media ended"),this.startPosition=this.lastCurrentTime=0}},{key:"onManifestLoading",value:function(){T.logger.log("trigger BUFFER_RESET"),this.hls.trigger(v.default.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0}},{key:"onManifestParsed",value:function(e){var t,n=!1,r=!1;e.levels.forEach(function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(n=!0),-1!==t.indexOf("mp4a.40.5")&&(r=!0))}),this.audioCodecSwitch=n&&r,this.audioCodecSwitch&&T.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startLevelLoaded=!1,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)}},{key:"onLevelLoaded",value:function(e){var t=e.details,n=e.level,r=this.levels[n],i=t.totalduration,o=0;if(T.logger.log("level "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),this.levelLastLoaded=n,t.live){var a=r.details;a&&t.fragments.length>0?(b.default.mergeDetails(a,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,a),t.PTSKnown?T.logger.log("live playlist sliding:"+o.toFixed(3)):T.logger.log("live playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,T.logger.log("live playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(r.details=t,this.hls.trigger(v.default.LEVEL_UPDATED,{details:t,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var s=t.startTimeOffset;isNaN(s)?t.live?(this.startPosition=this.computeLivePosition(o,t),T.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(s<0&&(T.logger.log("negative start time offset "+s+", count from end of last fragment"),s=o+i+s),T.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===w.WAITING_LEVEL&&(this.state=w.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===w.KEY_LOADING&&(this.state=w.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent,n=e.frag;if(this.state===w.FRAG_LOADING&&t&&"main"===n.type&&n.level===t.level&&n.sn===t.sn){var r=e.stats,i=this.levels[t.level],o=i.details;if(T.logger.log("Loaded  "+t.sn+" of ["+o.startSN+" ,"+o.endSN+"],level "+t.level),this.bitrateTest=!1,this.stats=r,!0===n.bitrateTest&&this.hls.nextLoadLevel)this.state=w.IDLE,this.startFragRequested=!1,r.tparsed=r.tbuffered=performance.now(),this.hls.trigger(v.default.FRAG_BUFFERED,{stats:r,frag:t,id:"main"}),this.tick();else if("initSegment"===n.sn)this.state=w.IDLE,r.tparsed=r.tbuffered=performance.now(),o.initSegment.data=e.payload,this.hls.trigger(v.default.FRAG_BUFFERED,{stats:r,frag:t,id:"main"}),this.tick();else{this.state=w.PARSING;var a=o.totalduration,s=t.level,l=t.sn,u=this.config.defaultAudioCodec||i.audioCodec;this.audioCodecSwap&&(T.logger.log("swapping playlist audio codec"),void 0===u&&(u=this.lastAudioCodec),u&&(u=-1!==u.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,T.logger.log("Parsing "+l+" of ["+o.startSN+" ,"+o.endSN+"],level "+s+", cc "+t.cc);var c=this.demuxer;c||(c=this.demuxer=new d.default(this.hls,"main"));var h=this.media,f=h&&h.seeking,p=!f&&(o.PTSKnown||!o.live),y=o.initSegment?o.initSegment.data:[];c.push(e.payload,y,u,i.videoCodec,t,a,p,void 0)}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent,n=e.frag;if(t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===w.PARSING){var r,i,o=e.tracks;if(o.audio&&this.altAudio&&delete o.audio,i=o.audio){var a=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(T.logger.log("swapping playlist audio codec"),a=-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&-1===s.indexOf("firefox")&&(a="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==i.container&&(a="mp4a.40.2",T.logger.log("Android: force audio codec to "+a)),i.levelCodec=a,i.id=e.id}i=o.video,i&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=e.id),this.hls.trigger(v.default.BUFFER_CODECS,o);for(r in o){i=o[r],T.logger.log("main track:"+r+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var l=i.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(v.default.BUFFER_APPENDING,{type:r,data:l,parent:"main",content:"initSegment"}))}this.tick()}}},{key:"onFragParsingData",value:function(e){var t=this,n=this.fragCurrent,r=e.frag;if(n&&"main"===e.id&&r.sn===n.sn&&r.level===n.level&&("audio"!==e.type||!this.altAudio)&&this.state===w.PARSING){var i=this.levels[this.level],o=n;if(isNaN(e.endPTS)&&(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),T.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(o.dropped=e.dropped,o.dropped){if(!o.backtracked)return T.logger.warn("missing video frame(s), backtracking fragment"),o.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=w.IDLE,this.fragPrevious=o,void this.tick();T.logger.warn("Already backtracked on this fragment, appending with the gap")}else o.backtracked=!1;var a=b.default.updateFragPTSDTS(i.details,o,e.startPTS,e.endPTS,e.startDTS,e.endDTS),s=this.hls;s.trigger(v.default.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:a,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(n){n&&n.length&&t.state===w.PARSING&&(t.appended=!0,t.pendingBuffering=!0,s.trigger(v.default.BUFFER_APPENDING,{type:e.type,data:n,parent:"main",content:"data"}))}),this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent,n=e.frag;t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===w.PARSING&&(this.stats.tparsed=performance.now(),this.state=w.PARSED,this._checkAppendedParsed())}},{key:"onAudioTrackSwitching",value:function(e){var t=!!e.url,n=e.id;if(!t){if(this.mediaBuffer!==this.media){T.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var r=this.fragCurrent;r.loader&&(T.logger.log("switching to main audio track, cancel main fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=w.IDLE}var i=this.hls;i.trigger(v.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(v.default.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}}},{key:"onAudioTrackSwitched",value:function(e){var t=e.id,n=!!this.hls.audioTracks[t].url;if(n){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(T.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n,this.tick()}},{key:"onBufferCreated",value:function(e){var t=e.tracks,n=void 0,r=void 0,i=!1;for(var o in t){var a=t[o];"main"===a.id?(r=o,n=a,"video"===o&&(this.videoBuffer=t[o].buffer)):i=!0}i&&n?(T.logger.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media}},{key:"onBufferAppended",value:function(e){if("main"===e.parent){var t=this.state;t!==w.PARSING&&t!==w.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}}},{key:"_checkAppendedParsed",value:function(){if(!(this.state!==w.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;T.logger.log("main buffered : "+E.default.toString(t.buffered));var n=this._bufferedFrags.filter(function(e){return h.default.isBuffered(t,(e.startPTS+e.endPTS)/2)});n.push(e),this._bufferedFrags=n.sort(function(e,t){return e.startPTS-t.startPTS}),this.fragPrevious=e;var r=this.stats;r.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(v.default.FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.state=w.IDLE}this.tick()}}},{key:"onError",value:function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var n=this.media,r=n&&h.default.isBuffered(n,n.currentTime)&&h.default.isBuffered(n,n.currentTime+.5);switch(e.details){case k.ErrorDetails.FRAG_LOAD_ERROR:case k.ErrorDetails.FRAG_LOAD_TIMEOUT:case k.ErrorDetails.KEY_LOAD_ERROR:case k.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal){var i=this.fragLoadError;i?i++:i=1;var o=this.config;if(i<=o.fragLoadingMaxRetry||r||t.autoLevel&&t.level){this.fragLoadError=i,t.loadCounter=0;var a=Math.min(Math.pow(2,i-1)*o.fragLoadingRetryDelay,o.fragLoadingMaxRetryTimeout);T.logger.warn("mediaController: frag loading failed, retry in "+a+" ms"),this.retryDate=performance.now()+a,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.state=w.FRAG_LOADING_WAITING_RETRY}else T.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=w.ERROR}break;case k.ErrorDetails.FRAG_LOOP_LOADING_ERROR:e.fatal||(r?(this._reduceMaxBufferLength(t.duration),this.state=w.IDLE):t.autoLevel&&0!==t.level||(e.fatal=!0,this.state=w.ERROR));break;case k.ErrorDetails.LEVEL_LOAD_ERROR:case k.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==w.ERROR&&(e.fatal?(this.state=w.ERROR,T.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==w.WAITING_LEVEL||(this.state=w.IDLE));break;case k.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==w.PARSING&&this.state!==w.PARSED||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=w.IDLE):(T.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}}},{key:"_reduceMaxBufferLength",value:function(e){var t=this.config;t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,T.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*t.fragLoadingLoopThreshold)}},{key:"_checkBuffer",value:function(){var e=this.media,t=this.config;if(e&&e.readyState){var n=e.currentTime,r=this.mediaBuffer?this.mediaBuffer:e,i=r.buffered;if(!this.loadedmetadata&&i.length){this.loadedmetadata=!0;var o=e.seeking?n:this.startPosition,a=h.default.isBuffered(r,o),s=i.start(0);(n!==o||!a&&Math.abs(o-s)<t.maxSeekHole)&&(T.logger.log("target start position:"+o),a||(o=s,T.logger.log("target start position not buffered, seek to buffered.start(0) "+o)),T.logger.log("adjust currentTime from "+n+" to "+o),e.currentTime=o)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var l=h.default.bufferInfo(e,n,0),u=!(e.paused||e.ended||0===e.buffered.length),c=n!==this.lastCurrentTime;if(c)this.stallReported&&(T.logger.warn("playback not stuck anymore @"+n+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(u){var f=performance.now(),d=this.hls;if(this.stalled){var p=f-this.stalled,y=l.len,g=this.nudgeRetry||0;if(y<=.5&&p>1e3*t.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,T.logger.warn("playback stalling in low buffer @"+n),d.trigger(v.default.ERROR,{type:k.ErrorTypes.MEDIA_ERROR,details:k.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:y}));var m=l.nextStart,b=m-n;if(m&&b<t.maxSeekHole&&b>0){this.nudgeRetry=++g;var _=g*t.nudgeOffset;T.logger.log("adjust currentTime from "+e.currentTime+" to next buffered @ "+m+" + nudge "+_),e.currentTime=m+_,this.stalled=void 0,d.trigger(v.default.ERROR,{type:k.ErrorTypes.MEDIA_ERROR,details:k.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:m+_-n})}}else if(y>.5&&p>1e3*t.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,T.logger.warn("playback stalling in high buffer @"+n),d.trigger(v.default.ERROR,{type:k.ErrorTypes.MEDIA_ERROR,details:k.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:y})),this.stalled=void 0,this.nudgeRetry=++g,g<t.nudgeMaxRetry){var E=e.currentTime,w=E+g*t.nudgeOffset;T.logger.log("adjust currentTime from "+E+" to "+w),e.currentTime=w,d.trigger(v.default.ERROR,{type:k.ErrorTypes.MEDIA_ERROR,details:k.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else T.logger.error("still stuck in high buffer @"+n+" after "+t.nudgeMaxRetry+", raise fatal error"),d.trigger(v.default.ERROR,{type:k.ErrorTypes.MEDIA_ERROR,details:k.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=f,this.stallReported=!1}}}}},{key:"onFragLoadEmergencyAborted",value:function(){this.state=w.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()}},{key:"onBufferFlushed",value:function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter(function(t){return h.default.isBuffered(e,(t.startPTS+t.endPTS)/2)}),this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=w.IDLE,this.fragPrevious=null}},{key:"swapAudioCodec",value:function(){this.audioCodecSwap=!this.audioCodecSwap}},{key:"computeLivePosition",value:function(e,t){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-n)}},{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,T.logger.log("main stream:"+t+"->"+e),this.hls.trigger(v.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(g.default);t.default=S},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n){r(this,e),this.subtle=t,this.aesIV=n}return i(e,[{key:"decrypt",value:function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n){r(this,e),this.subtle=t,this.key=n}return i(e,[{key:"expandKey",value:function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return i(e,[{key:"uint8ArrayToUint32Array_",value:function(e){for(var t=new DataView(e),n=new Uint32Array(4),r=0;r<4;r++)n[r]=t.getUint32(4*r);return n}},{key:"initTable",value:function(){var e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],o=n[2],a=n[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],h=s[3],f=new Uint32Array(256),d=0,p=0,v=0;for(v=0;v<256;v++)f[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var y=p^p<<1^p<<2^p<<3^p<<4;y=y>>>8^255&y^99,e[d]=y,t[y]=d;var g=f[d],m=f[g],b=f[m],_=257*f[y]^16843008*y;r[d]=_<<24|_>>>8,i[d]=_<<16|_>>>16,o[d]=_<<8|_>>>24,a[d]=_,_=16843009*b^65537*m^257*g^16843008*d,l[y]=_<<24|_>>>8,u[y]=_<<16|_>>>16,c[y]=_<<8|_>>>24,h[y]=_,d?(d=g^f[f[f[b^g]]],p^=f[f[p]]):d=p=1}}},{key:"expandKey",value:function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,r=0;r<t.length&&n;)n=t[r]===this.key[r],r++;if(!n){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var o=this.ksRows=4*(i+6+1),a=void 0,s=void 0,l=this.keySchedule=new Uint32Array(o),u=this.invKeySchedule=new Uint32Array(o),c=this.sBox,h=this.rcon,f=this.invSubMix,d=f[0],p=f[1],v=f[2],y=f[3],g=void 0,m=void 0;for(a=0;a<o;a++)a<i?g=l[a]=t[a]:(m=g,a%i==0?(m=m<<8|m>>>24,m=c[m>>>24]<<24|c[m>>>16&255]<<16|c[m>>>8&255]<<8|c[255&m],m^=h[a/i|0]<<24):i>6&&a%i==4&&(m=c[m>>>24]<<24|c[m>>>16&255]<<16|c[m>>>8&255]<<8|c[255&m]),l[a]=g=(l[a-i]^m)>>>0);for(s=0;s<o;s++)a=o-s,m=3&s?l[a]:l[a-4],u[s]=s<4||a<=4?m:d[c[m>>>24]]^p[c[m>>>16&255]]^v[c[m>>>8&255]]^y[c[255&m]],u[s]=u[s]>>>0}}},{key:"networkToHostOrderSwap",value:function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}},{key:"decrypt",value:function(e,t,n){for(var r,i,o=this.keySize+6,a=this.invKeySchedule,s=this.invSBox,l=this.invSubMix,u=l[0],c=l[1],h=l[2],f=l[3],d=this.uint8ArrayToUint32Array_(n),p=d[0],v=d[1],y=d[2],g=d[3],m=new Int32Array(e),b=new Int32Array(m.length),_=void 0,E=void 0,k=void 0,T=void 0,w=void 0,S=void 0,C=void 0,O=void 0,P=void 0,R=void 0,L=void 0,A=void 0,x=this.networkToHostOrderSwap;t<m.length;){for(P=x(m[t]),R=x(m[t+1]),L=x(m[t+2]),A=x(m[t+3]),w=P^a[0],S=A^a[1],C=L^a[2],O=R^a[3],r=4,i=1;i<o;i++)_=u[w>>>24]^c[S>>16&255]^h[C>>8&255]^f[255&O]^a[r],E=u[S>>>24]^c[C>>16&255]^h[O>>8&255]^f[255&w]^a[r+1],k=u[C>>>24]^c[O>>16&255]^h[w>>8&255]^f[255&S]^a[r+2],T=u[O>>>24]^c[w>>16&255]^h[S>>8&255]^f[255&C]^a[r+3],w=_,S=E,C=k,O=T,r+=4;_=s[w>>>24]<<24^s[S>>16&255]<<16^s[C>>8&255]<<8^s[255&O]^a[r],E=s[S>>>24]<<24^s[C>>16&255]<<16^s[O>>8&255]<<8^s[255&w]^a[r+1],k=s[C>>>24]<<24^s[O>>16&255]<<16^s[w>>8&255]<<8^s[255&S]^a[r+2],T=s[O>>>24]<<24^s[w>>16&255]<<16^s[S>>8&255]<<8^s[255&C]^a[r+3],r+=3,b[t]=x(_^p),b[t+1]=x(T^v),b[t+2]=x(k^y),b[t+3]=x(E^g),p=P,v=R,y=L,g=A,t+=4}return b.buffer}},{key:"destroy",value:function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(195),s=r(a),l=n(8),u=n(136),c=r(u),h=function(){function e(t,n,r){i(this,e),this.observer=t,this.config=r,this.remuxer=n}return o(e,[{key:"resetInitSegment",value:function(e,t,n,r){this._audioTrack={container:"audio/adts",type:"audio",id:-1,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,n,r){for(var i=this._audioTrack,o=c.default.getID3Data(e,0),a=90*c.default.getTimeStamp(o),u=0,h=a,f=e.length,d=o.length,p=[{pts:h,dts:h,data:o}];d<f-1;)if(s.default.isHeader(e,d)&&d+5<f){s.default.initTrackConfig(i,this.observer,e,d,i.manifestCodec);var v=s.default.appendFrame(i,e,d,a,u);if(!v){l.logger.log("Unable to parse AAC frame");break}d+=v.length,h=v.sample.pts,u++}else c.default.isHeader(e,d)?(o=c.default.getID3Data(e,d),p.push({pts:h,dts:h,data:o}),d+=o.length):d++;this.remuxer.remux(i,{samples:[]},{samples:p,inputTimeScale:9e4},{samples:[]},t,n,r)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,n,r=c.default.getID3Data(e,0);if(r&&void 0!==c.default.getTimeStamp(r))for(t=r.length,n=Math.min(e.length-1,t+100);t<n;t++)if(s.default.probe(e,t))return l.logger.log("ADTS sync word found !"),!0;return!1}}]),e}();t.default=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(13),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=Math.pow(2,32)-1,l=function(){function e(t,n){r(this,e),this.observer=t,this.remuxer=n}return i(e,[{key:"resetTimeStamp",value:function(e){this.initPTS=e}},{key:"resetInitSegment",value:function(t,n,r,i){if(t&&t.byteLength){var o=this.initData=e.parseInitSegment(t),s={};o.audio&&(s.audio={container:"audio/mp4",codec:n,initSegment:i?t:null}),o.video&&(s.video={container:"video/mp4",codec:r,initSegment:i?t:null}),this.observer.trigger(a.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else n&&(this.audioCodec=n),r&&(this.videoCodec=r)}},{key:"append",value:function(t,n,r,i){var o=this.initData;o||(this.resetInitSegment(t,this.audioCodec,this.videoCodec),o=this.initData);var s=void 0,l=this.initPTS;if(void 0===l){var u=e.getStartDTS(o,t);this.initPTS=l=u-n,this.observer.trigger(a.default.INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(o,t,l),s=e.getStartDTS(o,t),this.remuxer.remux(o.audio,o.video,null,null,s,r,i,t)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(t){if(t.length>=8){return["moof","ftyp","styp"].indexOf(e.bin2str(t.subarray(4,8)))>=0}return!1}},{key:"bin2str",value:function(e){return String.fromCharCode.apply(null,e)}},{key:"readUint32",value:function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return n<0?4294967296+n:n}},{key:"writeUint32",value:function(e,t,n){e.data&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}},{key:"findBox",value:function(t,n){var r,i,o,a,s,l,u,c=[];if(t.data?(l=t.start,a=t.end,t=t.data):(l=0,a=t.byteLength),!n.length)return null;for(r=l;r<a;)i=e.readUint32(t,r),o=e.bin2str(t.subarray(r+4,r+8)),u=i>1?r+i:a,o===n[0]&&(1===n.length?c.push({data:t,start:r+8,end:u}):(s=e.findBox({data:t,start:r+8,end:u},n.slice(1)),s.length&&(c=c.concat(s)))),r=u;return c}},{key:"parseInitSegment",value:function(t){var n=[];return e.findBox(t,["moov","trak"]).forEach(function(t){var r=e.findBox(t,["tkhd"])[0];if(r){var i=r.data[r.start],o=0===i?12:20,a=e.readUint32(r,o),s=e.findBox(t,["mdia","mdhd"])[0];if(s){i=s.data[s.start],o=0===i?12:20;var l=e.readUint32(s,o),u=e.findBox(t,["mdia","hdlr"])[0];if(u){var c=e.bin2str(u.data.subarray(u.start+8,u.start+12)),h={soun:"audio",vide:"video"}[c];h&&(n[a]={timescale:l,type:h},n[h]={timescale:l,id:a})}}}}),n}},{key:"getStartDTS",value:function(t,n){var r,i,o;return r=e.findBox(n,["moof","traf"]),i=[].concat.apply([],r.map(function(n){return e.findBox(n,["tfhd"]).map(function(r){var i,o,a;return i=e.readUint32(r,4),o=t[i].timescale||9e4,a=e.findBox(n,["tfdt"]).map(function(t){var n,r;return n=t.data[t.start],r=e.readUint32(t,4),1===n&&(r*=Math.pow(2,32),r+=e.readUint32(t,8)),r})[0],(a=a||1/0)/o})})),o=Math.min.apply(null,i),isFinite(o)?o:0}},{key:"offsetStartDTS",value:function(t,n,r){e.findBox(n,["moof","traf"]).map(function(n){return e.findBox(n,["tfhd"]).map(function(i){var o=e.readUint32(i,4),a=t[o].timescale||9e4;e.findBox(n,["tfdt"]).map(function(t){var n=t.data[t.start],i=e.readUint32(t,4);if(0===n)e.writeUint32(t,4,i-r*a);else{i*=Math.pow(2,32),i+=e.readUint32(t,8),i-=r*a;var o=Math.floor(i/(s+1)),l=Math.floor(i%(s+1));e.writeUint32(t,4,o),e.writeUint32(t,8,l)}})})})}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(195),s=r(a),l=n(196),u=r(l),c=n(13),h=r(c),f=n(486),d=r(f),p=n(487),v=r(p),y=n(8),g=n(19),m=function(){function e(t,n,r,o){i(this,e),this.observer=t,this.config=r,this.typeSupported=o,this.remuxer=n,this.sampleAes=null}return o(e,[{key:"setDecryptData",value:function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new v.default(this.observer,this.config,e,this.discardEPB):this.sampleAes=null}},{key:"resetInitSegment",value:function(e,t,n,r){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:0},this._audioTrack={container:"video/mp2t",type:"audio",id:-1,inputTimeScale:9e4,duration:r,sequenceNumber:0,samples:[],len:0,isAAC:!0},this._id3Track={type:"id3",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=n,this._duration=r}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,n,r){var i,o,a,s,l,u=e.length,c=!1;this.contiguous=n;var f=this.pmtParsed,d=this._avcTrack,p=this._audioTrack,v=this._id3Track,m=d.id,b=p.id,_=v.id,E=this._pmtId,k=d.pesData,T=p.pesData,w=v.pesData,S=this._parsePAT,C=this._parsePMT,O=this._parsePES,P=this._parseAVCPES.bind(this),R=this._parseAACPES.bind(this),L=this._parseMPEGPES.bind(this),A=this._parseID3PES.bind(this);for(u-=u%188,i=0;i<u;i+=188)if(71===e[i]){if(o=!!(64&e[i+1]),a=((31&e[i+1])<<8)+e[i+2],(48&e[i+3])>>4>1){if((s=i+5+e[i+4])===i+188)continue}else s=i+4;switch(a){case m:o&&(k&&(l=O(k))&&P(l,!1),k={data:[],size:0}),k&&(k.data.push(e.subarray(s,i+188)),k.size+=i+188-s);break;case b:o&&(T&&(l=O(T))&&(p.isAAC?R(l):L(l)),T={data:[],size:0}),T&&(T.data.push(e.subarray(s,i+188)),T.size+=i+188-s);break;case _:o&&(w&&(l=O(w))&&A(l),w={data:[],size:0}),w&&(w.data.push(e.subarray(s,i+188)),w.size+=i+188-s);break;case 0:o&&(s+=e[s]+1),E=this._pmtId=S(e,s);break;case E:o&&(s+=e[s]+1);var x=C(e,s,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);m=x.avc,m>0&&(d.id=m),b=x.audio,b>0&&(p.id=b,p.isAAC=x.isAAC),_=x.id3,_>0&&(v.id=_),c&&!f&&(y.logger.log("reparse from beginning"),c=!1,i=-188),f=this.pmtParsed=!0;break;case 17:case 8191:break;default:c=!0}}else this.observer.trigger(h.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});k&&(l=O(k))?(P(l,!0),d.pesData=null):d.pesData=k,T&&(l=O(T))?(p.isAAC?R(l):L(l),p.pesData=null):(T&&T.size&&y.logger.log("last AAC PES packet truncated,might overlap between fragments"),p.pesData=T),w&&(l=O(w))?(A(l),v.pesData=null):v.pesData=w,null==this.sampleAes?this.remuxer.remux(p,d,v,this._txtTrack,t,n,r):this.decryptAndRemux(p,d,v,this._txtTrack,t,n,r)}},{key:"decryptAndRemux",value:function(e,t,n,r,i,o,a){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,n,r,i,o,a)})}else this.decryptAndRemuxAvc(e,t,n,r,i,o,a)}},{key:"decryptAndRemuxAvc",value:function(e,t,n,r,i,o,a){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,n,r,i,o,a)})}else this.remuxer.remux(e,t,n,r,i,o,a)}},{key:"destroy",value:function(){this._initPTS=this._initDTS=void 0,this._duration=0}},{key:"_parsePAT",value:function(e,t){return(31&e[t+10])<<8|e[t+11]}},{key:"_parsePMT",value:function(e,t,n,r){var i,o,a,s,l={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=(15&e[t+1])<<8|e[t+2],o=t+3+i-4,a=(15&e[t+10])<<8|e[t+11],t+=12+a;t<o;){switch(s=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!r){y.logger.log("unkown stream type:"+e[t]);break}case 15:-1===l.audio&&(l.audio=s);break;case 21:-1===l.id3&&(l.id3=s);break;case 219:if(!r){y.logger.log("unkown stream type:"+e[t]);break}case 27:-1===l.avc&&(l.avc=s);break;case 3:case 4:n?-1===l.audio&&(l.audio=s,l.isAAC=!1):y.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:y.logger.warn("HEVC stream type found, not supported for now");break;default:y.logger.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return l}},{key:"_parsePES",value:function(e){var t,n,r,i,o,a,s,l,u=0,c=e.data;if(!e||0===e.size)return null;for(;c[0].length<19&&c.length>1;){var h=new Uint8Array(c[0].length+c[1].length);h.set(c[0]),h.set(c[1],c[0].length),c[0]=h,c.splice(1,1)}if(t=c[0],1===(t[0]<<16)+(t[1]<<8)+t[2]){if((r=(t[4]<<8)+t[5])&&r>e.size-6)return null;n=t[7],192&n&&(a=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,a>4294967295&&(a-=8589934592),64&n?(s=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,s>4294967295&&(s-=8589934592),a-s>54e5&&(y.logger.warn(Math.round((a-s)/9e4)+"s delta between PTS and DTS, align them"),a=s)):s=a),i=t[8],l=i+9,e.size-=l,o=new Uint8Array(e.size);for(var f=0,d=c.length;f<d;f++){t=c[f];var p=t.byteLength;if(l){if(l>p){l-=p;continue}t=t.subarray(l),p-=l,l=0}o.set(t,u),u+=p}return r&&(r-=i+3),{data:o,pts:a,dts:s,len:r}}return null}},{key:"pushAccesUnit",value:function(e,t){if(e.units.length&&e.frame){var n=t.samples,r=n.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(r||this.contiguous)?(e.id=r,n.push(e)):t.dropped++}e.debug.length&&y.logger.log(e.pts+"/"+e.dts+":"+e.debug)}},{key:"_parseAVCPES",value:function(e,t){var n,r,i,o=this,a=this._avcTrack,s=this._parseAVCNALu(e.data),l=this.avcSample,u=!1,c=this.pushAccesUnit.bind(this),h=function(e,t,n,r){return{key:e,pts:t,dts:n,units:[],debug:r}};e.data=null,l&&s.length&&(c(l,a),l=this.avcSample=h(!1,e.pts,e.dts,"")),s.forEach(function(t){switch(t.type){case 1:r=!0,l.frame=!0;var s=t.data;if(u&&s.length>4){var f=new d.default(s).readSliceType();2!==f&&4!==f&&7!==f&&9!==f||(l.key=!0)}break;case 5:r=!0,l||(l=o.avcSample=h(!0,e.pts,e.dts,"")),l.key=!0,l.frame=!0;break;case 6:r=!0,n=new d.default(o.discardEPB(t.data)),n.readUByte();for(var p=0,v=0,y=!1,g=0;!y&&n.bytesAvailable>1;){p=0;do{g=n.readUByte(),p+=g}while(255===g);v=0;do{g=n.readUByte(),v+=g}while(255===g);if(4===p&&0!==n.bytesAvailable){y=!0;if(181===n.readUByte()){if(49===n.readUShort()){if(1195456820===n.readUInt()){if(3===n.readUByte()){var m=n.readUByte(),b=n.readUByte(),_=31&m,E=[m,b];for(i=0;i<_;i++)E.push(n.readUByte()),E.push(n.readUByte()),E.push(n.readUByte());o._insertSampleInOrder(o._txtTrack.samples,{type:3,pts:e.pts,bytes:E})}}}}}else if(v<n.bytesAvailable)for(i=0;i<v;i++)n.readUByte()}break;case 7:if(r=!0,u=!0,!a.sps){n=new d.default(t.data);var k=n.readSPS();a.width=k.width,a.height=k.height,a.pixelRatio=k.pixelRatio,a.sps=[t.data],a.duration=o._duration;var T=t.data.subarray(1,4),w="avc1.";for(i=0;i<3;i++){var S=T[i].toString(16);S.length<2&&(S="0"+S),w+=S}a.codec=w}break;case 8:r=!0,a.pps||(a.pps=[t.data]);break;case 9:r=!1,l&&c(l,a),l=o.avcSample=h(!1,e.pts,e.dts,"");break;case 12:r=!1;break;default:r=!1,l&&(l.debug+="unknown NAL "+t.type+" ")}if(l&&r){l.units.push(t)}}),t&&l&&(c(l,a),this.avcSample=null)}},{key:"_insertSampleInOrder",value:function(e,t){var n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var r=n-1;r>=0;r--)if(t.pts<e[r].pts){e.splice(r,0,t);break}}else e.push(t)}},{key:"_getLastNalUnit",value:function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.length){var n=this._avcTrack,r=n.samples;e=r[r.length-1]}if(e){var i=e.units;t=i[i.length-1]}return t}},{key:"_parseAVCNALu",value:function(e){var t,n,r,i,o,a=0,s=e.byteLength,l=this._avcTrack,u=l.naluState||0,c=u,h=[],f=-1;for(-1===u&&(f=0,o=31&e[0],u=0,a=1);a<s;)if(t=e[a++],u)if(1!==u)if(t)if(1===t){if(f>=0)r={data:e.subarray(f,a-u-1),type:o},h.push(r);else{var d=this._getLastNalUnit();if(d&&(c&&a<=4-c&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-c)),(n=a-u-1)>0)){var p=new Uint8Array(d.data.byteLength+n);p.set(d.data,0),p.set(e.subarray(0,n),d.data.byteLength),d.data=p}}a<s?(i=31&e[a],f=a,o=i,u=0):u=-1}else u=0;else u=3;else u=t?0:2;else u=t?0:1;if(f>=0&&u>=0&&(r={data:e.subarray(f,s),type:o,state:u},h.push(r)),0===h.length){var v=this._getLastNalUnit();if(v){var y=new Uint8Array(v.data.byteLength+e.byteLength);y.set(v.data,0),y.set(e,v.data.byteLength),v.data=y}}return l.naluState=u,h}},{key:"discardEPB",value:function(e){for(var t,n,r=e.byteLength,i=[],o=1;o<r-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var a=0;for(o=0;o<t;a++,o++)a===i[0]&&(a++,i.shift()),n[o]=e[a];return n}},{key:"_parseAACPES",value:function(e){var t,n,r,i,o,a=this._audioTrack,l=e.data,u=e.pts,c=this.aacOverFlow,f=this.aacLastPTS;if(c){var d=new Uint8Array(c.byteLength+l.byteLength);d.set(c,0),d.set(l,c.byteLength),l=d}for(r=0,o=l.length;r<o-1&&!s.default.isHeader(l,r);r++);if(r){var p,v;if(r<o-1?(p="AAC PES did not start with ADTS header,offset:"+r,v=!1):(p="no ADTS header found in AAC PES",v=!0),y.logger.warn("parsing error:"+p),this.observer.trigger(h.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.FRAG_PARSING_ERROR,fatal:v,reason:p}),v)return}if(s.default.initTrackConfig(a,this.observer,l,r,this.audioCodec),n=0,t=s.default.getFrameDuration(a.samplerate),c&&f){var m=f+t;Math.abs(m-u)>1&&(y.logger.log("AAC: align PTS for overlapping frames by "+Math.round((m-u)/90)),u=m)}for(;r<o;)if(s.default.isHeader(l,r)&&r+5<o){var b=s.default.appendFrame(a,l,r,u,n);if(!b)break;r+=b.length,i=b.sample.pts,n++}else r++;c=r<o?l.subarray(r,o):null,this.aacOverFlow=c,this.aacLastPTS=i}},{key:"_parseMPEGPES",value:function(e){for(var t=e.data,n=t.length,r=0,i=0,o=e.pts;i<n;)if(u.default.isHeader(t,i)){var a=u.default.appendFrame(this._audioTrack,t,i,o,r);if(!a)break;i+=a.length,r++}else i++}},{key:"_parseID3PES",value:function(e){this._id3Track.samples.push(e)}}],[{key:"probe",value:function(e){return e.length>=564&&71===e[0]&&71===e[188]&&71===e[376]}}]),e}();t.default=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(8),a=function(){function e(t){r(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return i(e,[{key:"loadWord",value:function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i}},{key:"skipBits",value:function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}},{key:"readBits",value:function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&o.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}},{key:"skipLZ",value:function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"skipScalingList",value:function(e){var t,n,r=8,i=8;for(t=0;t<e;t++)0!==i&&(n=this.readEG(),i=(r+n+256)%256),r=0===i?r:i}},{key:"readSPS",value:function(){var e,t,n,r,i,o,a,s=0,l=0,u=0,c=0,h=this.readUByte.bind(this),f=this.readBits.bind(this),d=this.readUEG.bind(this),p=this.readBoolean.bind(this),v=this.skipBits.bind(this),y=this.skipEG.bind(this),g=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);if(h(),e=h(),f(5),v(3),h(),g(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var b=d();if(3===b&&v(1),g(),g(),v(1),p())for(o=3!==b?8:12,a=0;a<o;a++)p()&&m(a<6?16:64)}g();var _=d();if(0===_)d();else if(1===_)for(v(1),y(),y(),t=d(),a=0;a<t;a++)y();g(),v(1),n=d(),r=d(),i=f(1),0===i&&v(1),v(1),p()&&(s=d(),l=d(),u=d(),c=d());var E=[1,1];if(p()&&p()){switch(h()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[h()<<8|h(),h()<<8|h()]}}return{width:Math.ceil(16*(n+1)-2*s-2*l),height:(2-i)*(r+1)*16-(i?2:4)*(u+c),pixelRatio:E}}},{key:"readSliceType",value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(194),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t,n,i,o){r(this,e),this.decryptdata=i,this.discardEPB=o,this.decrypter=new a.default(t,n)}return i(e,[{key:"decryptBuffer",value:function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)}},{key:"decryptAacSample",value:function(e,t,n,r){var i=e[t].unit,o=i.subarray(16,i.length-i.length%16),a=o.buffer.slice(o.byteOffset,o.byteOffset+o.length),s=this;this.decryptBuffer(a,function(o){o=new Uint8Array(o),i.set(o,16),r||s.decryptAacSamples(e,t+1,n)})}},{key:"decryptAacSamples",value:function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,r),!r)return}}}},{key:"getAvcEncryptedData",value:function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),r=0,i=32;i<=e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n}},{key:"getAvcDecryptedUnit",value:function(e,t){t=new Uint8Array(t);for(var n=0,r=32;r<=e.length-16;r+=160,n+=16)e.set(t.subarray(n,n+16),r);return e}},{key:"decryptAvcSample",value:function(e,t,n,r,i,o){var a=this.discardEPB(i.data),s=this.getAvcEncryptedData(a),l=this;this.decryptBuffer(s.buffer,function(s){i.data=l.getAvcDecryptedUnit(a,s),o||l.decryptAvcSamples(e,t,n+1,r)})}},{key:"decryptAvcSamples",value:function(e,t,n,r){for(;;t++,n=0){if(t>=e.length)return void r();for(var i=e[t].units;!(n>=i.length);n++){var o=i[n];if(!(o.length<=48||1!==o.type&&5!==o.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,r,o,a),!a)return}}}}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(136),s=r(a),l=n(8),u=n(196),c=r(u),h=function(){function e(t,n,r){i(this,e),this.observer=t,this.config=r,this.remuxer=n}return o(e,[{key:"resetInitSegment",value:function(e,t,n,r){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,n,r){for(var i=s.default.getID3Data(e,0),o=90*s.default.getTimeStamp(i),a=i.length,l=e.length,u=0,h=0,f=this._audioTrack,d=[{pts:o,dts:o,data:i}];a<l;)if(c.default.isHeader(e,a)){var p=c.default.appendFrame(f,e,a,o,u);if(!p)break;a+=p.length,h=p.sample.pts,u++}else s.default.isHeader(e,a)?(i=s.default.getID3Data(e,a),d.push({pts:h,dts:h,data:i}),a+=i.length):a++;this.remuxer.remux(f,{samples:[]},{samples:d,inputTimeScale:9e4},{samples:[]},t,n,r)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,n,r=s.default.getID3Data(e,0);if(r&&void 0!==s.default.getTimeStamp(r))for(t=r.length,n=Math.min(e.length-1,t+100);t<n;t++)if(c.default.probe(e,t))return l.logger.log("MPEG Audio sync word found !"),!0;return!1}}]),e}();t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(490),s=r(a),l=n(13),u=r(l),c=n(8),h=n(491),f=r(h),d=n(19),p=function(){function e(t,n,r,o){i(this,e),this.observer=t,this.config=n,this.typeSupported=r;var a=navigator.userAgent;this.isSafari=o&&o.indexOf("Apple")>-1&&a&&!a.match("CriOS"),this.ISGenerated=!1}return o(e,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",value:function(e){this._initPTS=this._initDTS=e}},{key:"resetInitSegment",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(e,t,n,r,i,o,a){if(this.ISGenerated){if(a){var s=this._initPTS,l=this._PTSNormalize,h=e.inputTimeScale||t.inputTimeScale,f=1/0,d=1/0,p=e.samples;if(p.length&&(f=d=l(p[0].pts-h*i,s)),p=t.samples,p.length){var v=p[0];f=Math.min(f,l(v.pts-h*i,s)),d=Math.min(d,l(v.dts-h*i,s))}if(f!==1/0){var y=s-f;Math.abs(y)>10*h&&(c.logger.warn("timestamp inconsistency, "+(y/h).toFixed(3)+"s delta against expected value: missing discontinuity ? reset initPTS/initDTS"),this._initPTS=f,this._initDTS=d,this.observer.trigger(u.default.INIT_PTS_FOUND,{initPTS:f}))}}}else this.generateIS(e,t,i);if(this.ISGenerated)if(e.samples.length){e.timescale||(c.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i));var g=this.remuxAudio(e,i,o,a);if(t.samples.length){var m=void 0;g&&(m=g.endPTS-g.startPTS),t.timescale||(c.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,i,o,m,a)}}else{var b=void 0;t.samples.length&&(b=this.remuxVideo(t,i,o,a)),b&&e.codec&&this.remuxEmptyAudio(e,i,o,b)}n.samples.length&&this.remuxID3(n,i),r.samples.length&&this.remuxText(r,i),this.observer.trigger(u.default.FRAG_PARSED)}},{key:"generateIS",value:function(e,t,n){var r,i,o=this.observer,a=e.samples,s=t.samples,l=this.typeSupported,h="audio/mp4",p={},v={tracks:p},y=void 0===this._initPTS;if(y&&(r=i=1/0),e.config&&a.length&&(e.timescale=e.samplerate,c.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(l.mpeg?(h="audio/mpeg",e.codec=""):l.mp3&&(e.codec="mp3")),p.audio={container:h,codec:e.codec,initSegment:!e.isAAC&&l.mpeg?new Uint8Array:f.default.initSegment([e]),metadata:{channelCount:e.channelCount}},y&&(r=i=a[0].pts-e.inputTimeScale*n)),t.sps&&t.pps&&s.length){var g=t.inputTimeScale;t.timescale=g,p.video={container:"video/mp4",codec:t.codec,initSegment:f.default.initSegment([t]),metadata:{width:t.width,height:t.height}},y&&(r=Math.min(r,s[0].pts-g*n),i=Math.min(i,s[0].dts-g*n),this.observer.trigger(u.default.INIT_PTS_FOUND,{initPTS:r}))}Object.keys(p).length?(o.trigger(u.default.FRAG_PARSING_INIT_SEGMENT,v),this.ISGenerated=!0,y&&(this._initPTS=r,this._initDTS=i)):o.trigger(u.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}},{key:"remuxVideo",value:function(e,t,n,r,i){var o,a,s,l,h,p,v,y=8,g=e.timescale,m=e.samples,b=[],_=m.length,E=this._PTSNormalize,k=this._initDTS,T=this.nextAvcDts,w=this.isSafari;w&&(n|=m.length&&T&&(i&&Math.abs(t-T/g)<.1||Math.abs(m[0].pts-T-k)<g/5)),n||(T=t*g),m.forEach(function(e){e.pts=E(e.pts-k,T),e.dts=E(e.dts-k,T)}),m.sort(function(e,t){var n=e.dts-t.dts,r=e.pts-t.pts;return n||(r||e.id-t.id)});var S=m.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(S<0){c.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(S/90)+" ms to overcome this issue");for(var C=0;C<m.length;C++)m[C].dts+=S}var O=m[0];h=Math.max(O.dts,0),l=Math.max(O.pts,0);var P=Math.round((h-T)/90);n&&P&&(P>1?c.logger.log("AVC:"+P+" ms hole between fragments detected,filling it"):P<-1&&c.logger.log("AVC:"+-P+" ms overlapping between fragments detected"),h=T,m[0].dts=h,l=Math.max(l-P,T),m[0].pts=l,c.logger.log("Video/PTS/DTS adjusted: "+Math.round(l/90)+"/"+Math.round(h/90)+",delta:"+P+" ms")),O=m[m.length-1],v=Math.max(O.dts,0),p=Math.max(O.pts,0,v),w&&(o=Math.round((v-h)/(m.length-1)));for(var R=0,L=0,A=0;A<_;A++){for(var x=m[A],D=x.units,I=D.length,M=0,j=0;j<I;j++)M+=D[j].data.length;L+=M,R+=I,x.length=M,x.dts=w?h+A*o:Math.max(x.dts,h),x.pts=Math.max(x.pts,x.dts)}var N=L+4*R+8;try{a=new Uint8Array(N)}catch(e){return void this.observer.trigger(u.default.ERROR,{type:d.ErrorTypes.MUX_ERROR,details:d.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:N,reason:"fail allocating video mdat "+N})}var F=new DataView(a.buffer);F.setUint32(0,N),a.set(f.default.types.mdat,4);for(var B=0;B<_;B++){for(var U=m[B],H=U.units,V=0,G=void 0,W=0,K=H.length;W<K;W++){var z=H[W],X=z.data,q=z.data.byteLength;F.setUint32(y,q),y+=4,a.set(X,y),y+=q,V+=4+q}if(w)G=Math.max(0,o*Math.round((U.pts-U.dts)/o));else{if(B<_-1)o=m[B+1].dts-U.dts;else{var Y=this.config,$=U.dts-m[B>0?B-1:B].dts;if(Y.stretchShortVideoTrack){var Q=Y.maxBufferHole,J=Y.maxSeekHole,Z=Math.floor(Math.min(Q,J)*g),ee=(r?l+r*g:this.nextAudioPts)-U.pts;ee>Z?(o=ee-$,o<0&&(o=$),c.logger.log("It is approximately "+ee/90+" ms to the next segment; using duration "+o/90+" ms for the last video frame.")):o=$}else o=$}G=Math.round(U.pts-U.dts)}b.push({size:V,duration:o,cts:G,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:U.key?2:1,isNonSync:U.key?0:1}})}this.nextAvcDts=v+o;var te=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,b.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var ne=b[0].flags;ne.dependsOn=2,ne.isNonSync=0}e.samples=b,s=f.default.moof(e.sequenceNumber++,h,e),e.samples=[];var re={data1:s,data2:a,startPTS:l/g,endPTS:(p+o)/g,startDTS:h/g,endDTS:this.nextAvcDts/g,type:"video",nb:b.length,dropped:te};return this.observer.trigger(u.default.FRAG_PARSING_DATA,re),re}},{key:"remuxAudio",value:function(e,t,n,r){var i,o,a,l,h,p,v,y=e.inputTimeScale,g=e.timescale,m=y/g,b=e.isAAC?1024:1152,_=b*m,E=this._PTSNormalize,k=this._initDTS,T=!e.isAAC&&this.typeSupported.mpeg,w=e.samples,S=[],C=this.nextAudioPts;if(n|=w.length&&C&&(r&&Math.abs(t-C/y)<.1||Math.abs(w[0].pts-C-k)<20*_),n||(C=t*y),w.forEach(function(e){e.pts=e.dts=E(e.pts-k,C)}),w.sort(function(e,t){return e.pts-t.pts}),r&&e.isAAC)for(var O=0,P=C;O<w.length;){var R,L=w[O],A=L.pts;R=A-P;var x=Math.abs(1e3*R/y);if(R<=-_)c.logger.warn("Dropping 1 audio frame @ "+(P/y).toFixed(3)+"s due to "+x+" ms overlap."),w.splice(O,1),e.len-=L.unit.length;else if(R>=_&&x<1e4&&P){var D=Math.round(R/_);c.logger.warn("Injecting "+D+" audio frame @ "+(P/y).toFixed(3)+"s due to "+Math.round(1e3*R/y)+" ms gap.");for(var I=0;I<D;I++){var M=Math.max(P,0);a=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),a||(c.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),a=L.unit.subarray()),w.splice(O,0,{unit:a,pts:M,dts:M}),e.len+=a.length,P+=_,O++}L.pts=L.dts=P,P+=_,O++}else Math.abs(R),L.pts=L.dts=P,P+=_,O++}for(var j=0,N=w.length;j<N;j++){var F=w[j],B=F.unit,U=F.pts;if(void 0!==v)o.duration=Math.round((U-v)/m);else{var H=Math.round(1e3*(U-C)/y),V=0;if(n&&e.isAAC&&H){if(H>0&&H<1e4)V=Math.round((U-C)/_),c.logger.log(H+" ms hole between AAC samples detected,filling it"),V>0&&(a=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),a||(a=B.subarray()),e.len+=V*a.length);else if(H<-12){c.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(C/y).toFixed(3)+"s/"+(U/y).toFixed(3)+"s/"+-H+"ms"),e.len-=B.byteLength;continue}U=C}if(p=Math.max(0,U),!(e.len>0))return;var G=T?e.len:e.len+8;i=T?0:8;try{l=new Uint8Array(G)}catch(e){return void this.observer.trigger(u.default.ERROR,{type:d.ErrorTypes.MUX_ERROR,details:d.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:G,reason:"fail allocating audio mdat "+G})}if(!T){new DataView(l.buffer).setUint32(0,G),l.set(f.default.types.mdat,4)}for(var W=0;W<V;W++)a=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),a||(c.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),a=B.subarray()),l.set(a,i),i+=a.byteLength,o={size:a.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},S.push(o)}l.set(B,i);var K=B.byteLength;i+=K,o={size:K,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},S.push(o),v=U}var z=0,X=S.length;if(X>=2&&(z=S[X-2].duration,o.duration=z),X){this.nextAudioPts=C=v+m*z,e.len=0,e.samples=S,h=T?new Uint8Array:f.default.moof(e.sequenceNumber++,p/m,e),e.samples=[];var q=p/y,Y=C/y,$={data1:h,data2:l,startPTS:q,endPTS:Y,startDTS:q,endDTS:Y,type:"audio",nb:X};return this.observer.trigger(u.default.FRAG_PARSING_DATA,$),$}return null}},{key:"remuxEmptyAudio",value:function(e,t,n,r){var i=e.inputTimeScale,o=e.samplerate?e.samplerate:i,a=i/o,l=this.nextAudioPts,u=(void 0!==l?l:r.startDTS*i)+this._initDTS,h=r.endDTS*i+this._initDTS,f=1024*a,d=Math.ceil((h-u)/f),p=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(c.logger.warn("remux empty Audio"),!p)return void c.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var v=[],y=0;y<d;y++){var g=u+y*f;v.push({unit:p,pts:g,dts:g}),e.len+=p.length}e.samples=v,this.remuxAudio(e,t,n)}},{key:"remuxID3",value:function(e,t){var n,r=e.samples.length,i=e.inputTimeScale,o=this._initPTS,a=this._initDTS;if(r){for(var s=0;s<r;s++)n=e.samples[s],n.pts=(n.pts-o)/i,n.dts=(n.dts-a)/i;this.observer.trigger(u.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[],t=t}},{key:"remuxText",value:function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var n,r=e.samples.length,i=e.inputTimeScale,o=this._initPTS;if(r){for(var a=0;a<r;a++)n=e.samples[a],n.pts=(n.pts-o)/i;this.observer.trigger(u.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[],t=t}},{key:"_PTSNormalize",value:function(e,t){var n;if(void 0===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,null,[{key:"getSilentFrame",value:function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=Math.pow(2,32)-1,a=function(){function e(){r(this,e)}return i(e,null,[{key:"init",value:function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t;for(t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=o,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,a,l,a,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))}},{key:"box",value:function(e){for(var t,n=Array.prototype.slice.call(arguments,1),r=8,i=n.length,o=i;i--;)r+=n[i].byteLength;for(t=new Uint8Array(r),t[0]=r>>24&255,t[1]=r>>16&255,t[2]=r>>8&255,t[3]=255&r,t.set(e,4),i=0,r=8;i<o;i++)t.set(n[i],r),r+=n[i].byteLength;return t}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}},{key:"mdhd",value:function(t,n){n*=t;var r=Math.floor(n/(o+1)),i=Math.floor(n%(o+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"minf",value:function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))}},{key:"moof",value:function(t,n,r){return e.box(e.types.moof,e.mfhd(t),e.traf(r,n))}},{key:"moov",value:function(t){for(var n=t.length,r=[];n--;)r[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(e.mvex(t)))}},{key:"mvex",value:function(t){for(var n=t.length,r=[];n--;)r[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(r))}},{key:"mvhd",value:function(t,n){n*=t;var r=Math.floor(n/(o+1)),i=Math.floor(n%(o+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)}},{key:"sdtp",value:function(t){var n,r,i=t.samples||[],o=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,o[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e.box(e.types.sdtp,o)}},{key:"stbl",value:function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))}},{key:"avc1",value:function(t){var n,r,i,o=[],a=[];for(n=0;n<t.sps.length;n++)r=t.sps[n],i=r.byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(r));for(n=0;n<t.pps.length;n++)r=t.pps[n],i=r.byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));var s=e.box(e.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|t.sps.length].concat(o).concat([t.pps.length]).concat(a))),l=t.width,u=t.height,c=t.pixelRatio[0],h=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,h>>24,h>>16&255,h>>8&255,255&h])))}},{key:"esds",value:function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}},{key:"mp4a",value:function(t){var n=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))}},{key:"mp3",value:function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))}},{key:"stsd",value:function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))}},{key:"tkhd",value:function(t){var n=t.id,r=t.duration*t.timescale,i=t.width,a=t.height,s=Math.floor(r/(o+1)),l=Math.floor(r%(o+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,a>>8&255,255&a,0,0]))}},{key:"traf",value:function(t,n){var r=e.sdtp(t),i=t.id,a=Math.floor(n/(o+1)),s=Math.floor(n%(o+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,r.length+16+20+8+16+8+8),r)}},{key:"trak",value:function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))}},{key:"trex",value:function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(t,n){var r,i,o,a,s,l,u=t.samples||[],c=u.length,h=12+16*c,f=new Uint8Array(h);for(n+=8+h,f.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<c;r++)i=u[r],o=i.duration,a=i.size,s=i.flags,l=i.cts,f.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*r);return e.box(e.types.trun,f)}},{key:"initSegment",value:function(t){e.types||e.init();var n,r=e.moov(t);return n=new Uint8Array(e.FTYP.byteLength+r.byteLength),n.set(e.FTYP),n.set(r,e.FTYP.byteLength),n}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(13),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t){r(this,e),this.observer=t}return i(e,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",value:function(){}},{key:"resetInitSegment",value:function(){}},{key:"remux",value:function(e,t,n,r,i,o,s,l){var u=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),u.trigger(a.default.FRAG_PARSING_DATA,{data1:l,startPTS:i,startDTS:i,type:c,nb:1,dropped:0}),u.trigger(a.default.FRAG_PARSED)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(193),o=r(i),a=n(13),s=r(a),l=n(8),u=n(137),c=r(u),h=function(e){var t=new c.default;t.trigger=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.emit.apply(t,[e,e].concat(r))},t.off=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.removeListener.apply(t,[e].concat(r))};var n=function(t,n){e.postMessage({event:t,data:n})};e.addEventListener("message",function(r){var i=r.data;switch(i.cmd){case"init":var a=JSON.parse(i.config);e.demuxer=new o.default(t,i.typeSupported,a,i.vendor);try{(0,l.enableLogs)(!0===a.debug)}catch(e){console.warn("demuxerWorker: unable to enable logs")}n("init",null);break;case"demux":e.demuxer.push(i.data,i.decryptdata,i.initSegment,i.audioCodec,i.videoCodec,i.timeOffset,i.discontinuity,i.trackSwitch,i.contiguous,i.duration,i.accurateTimeOffset,i.defaultInitPTS)}}),t.on(s.default.FRAG_DECRYPTED,n),t.on(s.default.FRAG_PARSING_INIT_SEGMENT,n),t.on(s.default.FRAG_PARSED,n),t.on(s.default.ERROR,n),t.on(s.default.FRAG_PARSING_METADATA,n),t.on(s.default.FRAG_PARSING_USERDATA,n),t.on(s.default.INIT_PTS_FOUND,n),t.on(s.default.FRAG_PARSING_DATA,function(t,n){var r=[],i={event:t,data:n};n.data1&&(i.data1=n.data1.buffer,r.push(n.data1.buffer),delete n.data1),n.data2&&(i.data2=n.data2.buffer,r.push(n.data2.buffer),delete n.data2),e.postMessage(i,r)})};t.default=h},function(e,t){function n(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var r=arguments[2],i=r.m,o=r.s||"0",a=arguments[0].id||arguments[0].i,s=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};t.m=e,t.c=n,t.oe=function(e){throw e},t.p="";var r=t(t.s=entryModule);return r.default||r};e.exports=function(e,t){for(var l,u=[],c=[o],h=Object.keys(i),f=0,d=h.length;f<d;f++){var p=h[f];if(i[p]){var v=i[p].toString();u[p]=v;var y=v.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(y){var g=y[1];if(v.indexOf(g+"("+a+")")>-1)for(var m,b=new RegExp(n(g)+"\\((\\d+)\\)","g");m=b.exec(v);)m[1]!=""+a&&c.push(m[1])}}}var _=e.toString().replace(/"use strict";\n\n/,""),E=_.replace(/^function\s?\((.*)\)(\s?)\{(\n"use strict";\n)?/,"function($1)$2{"),k=_.replace(/^function\s?\((.*)\)(\s?)\{(\n"use strict";\n)?/,"function ($1)$2{"),l=c.find(function(t){var n=i[t].toString();if(n.indexOf(E)>-1||n.indexOf(k)>-1){var o=r(t);return(!o||o!==e&&o.default!==e)&&(u[t]=n.substring(0,n.length-1)+"\n"+_.match(/function\s?(.+?)\s?\(.*/)[1]+"();\n}"),!0}return!1});if(void 0===l)throw new Error("webworkify-webpack: Could not locate module containing worker function! Make sure you aren't using eval sourcemaps and that you pass named functions to webworkify-webpack!");var T="var fn = ("+s.toString().replace("entryModule",l)+")(["+u.join(",")+']);\n(typeof fn === "function") && fn(self);',w=new Blob([T],{type:"text/javascript"});if(t&&t.bare)return w;var S=window.URL||window.webkitURL||window.mozURL||window.msURL,C=S.createObjectURL(w),O=new Worker(C);return O.objectURL=C,O}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(13),u=r(l),c=n(24),h=r(c),f=n(8),d=n(19),p=n(97),v=r(p),y=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u.default.MANIFEST_LOADED,u.default.LEVEL_LOADED,u.default.FRAG_LOADED,u.default.ERROR));return n.ontick=n.tick.bind(n),n._manualLevel=-1,n}return a(t,e),s(t,[{key:"destroy",value:function(){this.cleanTimer(),this._manualLevel=-1}},{key:"cleanTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"startLoad",value:function(){this.canload=!0;var e=this._levels;e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),this.timer&&this.tick()}},{key:"stopLoad",value:function(){this.canload=!1}},{key:"onManifestLoaded",value:function(e){var t,n=[],r=[],i={},o=!1,a=!1,s=this.hls,l=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),c=function(e,t){return MediaSource.isTypeSupported(e+"/mp4;codecs="+t)};if(e.levels.forEach(function(e){e.videoCodec&&(o=!0),l&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(e.audioCodec||e.attrs&&e.attrs.AUDIO)&&(a=!0);var t=i[e.bitrate];void 0===t?(i[e.bitrate]=n.length,e.url=[e.url],e.urlId=0,n.push(e)):n[t].url.push(e.url)}),o&&a?n.forEach(function(e){e.videoCodec&&r.push(e)}):r=n,r=r.filter(function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||c("audio",t))&&(!n||c("video",n))}),r.length){t=r[0].bitrate,r.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=r;for(var h=0;h<r.length;h++)if(r[h].bitrate===t){this._firstLevel=h,f.logger.log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+t);break}s.trigger(u.default.MANIFEST_PARSED,{levels:r,firstLevel:this._firstLevel,stats:e.stats,audio:a,video:o,altAudio:e.audioTracks.length>0})}else s.trigger(u.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:s.url,reason:"no level with compatible codecs found in manifest"})}},{key:"setLevelInternal",value:function(e){var t=this._levels,n=this.hls;if(e>=0&&e<t.length){if(this.cleanTimer(),this._level!==e){f.logger.log("switching to level "+e),this._level=e;var r=t[e];r.level=e,n.trigger(u.default.LEVEL_SWITCH,r),n.trigger(u.default.LEVEL_SWITCHING,r)}var i=t[e],o=i.details;if(!o||!0===o.live){var a=i.urlId;n.trigger(u.default.LEVEL_LOADING,{url:i.url[a],level:e,id:a})}}else n.trigger(u.default.ERROR,{type:d.ErrorTypes.OTHER_ERROR,details:d.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})}},{key:"onError",value:function(e){if(e.fatal)return void(e.type===d.ErrorTypes.NETWORK_ERROR&&this.cleanTimer());var t=e.details,n=this.hls,r=void 0,i=void 0,o=!1;switch(t){case d.ErrorDetails.FRAG_LOAD_ERROR:case d.ErrorDetails.FRAG_LOAD_TIMEOUT:case d.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case d.ErrorDetails.KEY_LOAD_ERROR:case d.ErrorDetails.KEY_LOAD_TIMEOUT:r=e.frag.level;break;case d.ErrorDetails.LEVEL_LOAD_ERROR:case d.ErrorDetails.LEVEL_LOAD_TIMEOUT:r=e.context.level,o=!0;break;case d.ErrorDetails.REMUX_ALLOC_ERROR:r=e.level}if(void 0!==r){i=this._levels[r],i.loadError?i.loadError++:i.loadError=1;var a=i.url.length;if(a>1&&i.loadError<a)i.urlId=(i.urlId+1)%a,i.details=void 0,f.logger.warn("level controller,"+t+" for level "+r+": switching to redundant stream id "+i.urlId);else{if(-1===this._manualLevel&&r)f.logger.warn("level controller,"+t+": switch-down for next fragment"),n.nextAutoLevel=Math.max(0,r-1);else if(i&&i.details&&i.details.live)f.logger.warn("level controller,"+t+" on live stream, discard"),o&&(this._level=void 0);else if(t===d.ErrorDetails.LEVEL_LOAD_ERROR||t===d.ErrorDetails.LEVEL_LOAD_TIMEOUT){var s=n.media,l=s&&v.default.isBuffered(s,s.currentTime)&&v.default.isBuffered(s,s.currentTime+.5);if(l){var u=n.config.levelLoadingRetryDelay;f.logger.warn("level controller,"+t+", but media buffered, retry in "+u+"ms"),this.timer=setTimeout(this.ontick,u),e.levelRetry=!0}else f.logger.error("cannot recover "+t+" error"),this._level=void 0,this.cleanTimer(),e.fatal=!0}}}}},{key:"onFragLoaded",value:function(e){var t=e.frag;if(t&&"main"===t.type){var n=this._levels[t.level];n&&(n.loadError=0)}}},{key:"onLevelLoaded",value:function(e){var t=e.level;if(t===this._level){var n=this._levels[t];n.loadError=0;var r=e.details;if(r.live){var i=1e3*(r.averagetargetduration?r.averagetargetduration:r.targetduration),o=n.details;o&&r.endSN===o.endSN&&(i/=2,f.logger.log("same live playlist, reload twice faster")),i-=performance.now()-e.stats.trequest,i=Math.max(1e3,Math.round(i)),f.logger.log("live playlist, reload in "+i+" ms"),this.timer=setTimeout(this.ontick,i)}else this.timer=null}}},{key:"tick",value:function(){var e=this._level;if(void 0!==e&&this.canload){var t=this._levels[e];if(t&&t.url){var n=t.urlId;this.hls.trigger(u.default.LEVEL_LOADING,{url:t.url[n],level:e,id:n})}}}},{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(e){var t=this._levels;t&&t.length>e&&(this._level===e&&void 0!==t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(e){this._manualLevel=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this._manualLevel?this._manualLevel:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this._manualLevel&&(this.hls.nextAutoLevel=e)}}]),t}(h.default);t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(13),u=r(l),c=n(24),h=r(c),f=n(136),d=r(f),p=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.FRAG_PARSING_METADATA));return n.id3Track=void 0,n.media=void 0,n}return a(t,e),s(t,[{key:"destroy",value:function(){h.default.prototype.destroy.call(this)}},{key:"onMediaAttached",value:function(e){this.media=e.media,this.media&&(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden")}},{key:"onMediaDetaching",value:function(){this.media=void 0}},{key:"onFragParsingMetadata",value:function(e){for(var t=e.frag,n=e.samples,r=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<n.length;i++){var o=d.default.getID3Frames(n[i].data);if(o){var a=n[i].pts,s=i<n.length-1?n[i+1].pts:t.endPTS;a===s&&(s+=1e-4);for(var l=0;l<o.length;l++){var u=o[l];if(!d.default.isTimeStampFrame(u)){var c=new r(a,s,"");c.value=u,this.id3Track.addCue(c)}}}}}}]),t}(h.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.hlsDefaultConfig=void 0;var i=n(498),o=r(i),a=n(501),s=r(a),l=n(502),u=r(l),c=n(503),h=r(c),f=n(504),d=r(f),p=n(505),v=r(p),y=n(506),g=r(y),m=n(508),b=r(m),_=n(510),E=r(_),k=n(513),T=r(k),w=n(514),S=r(w);t.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:d.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:o.default,bufferController:s.default,capLevelController:u.default,fpsController:h.default,audioStreamController:g.default,audioTrackController:v.default,subtitleStreamController:S.default,subtitleTrackController:T.default,timelineController:E.default,cueHandler:b.default,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(13),u=r(l),c=n(24),h=r(c),f=n(97),d=r(f),p=n(19),v=n(8),y=n(499),g=r(y),m=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u.default.FRAG_LOADING,u.default.FRAG_LOADED,u.default.FRAG_BUFFERED,u.default.ERROR));return n.lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=e,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(n),n}return a(t,e),s(t,[{key:"destroy",value:function(){this.clearTimer(),h.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var n=this.hls,r=e.frag.level,i=n.levels[r].details.live,o=n.config,a=void 0,s=void 0;i?(a=o.abrEwmaFastLive,s=o.abrEwmaSlowLive):(a=o.abrEwmaFastVoD,s=o.abrEwmaSlowVoD),this._bwEstimator=new g.default(n,s,a,o.abrEwmaDefaultEstimate)}this.fragCurrent=t}}},{key:"_abandonRulesCheck",value:function(){var e=this.hls,t=e.media,n=this.fragCurrent,r=n.loader,i=e.minAutoLevel;if(!r||r.stats&&r.stats.aborted)return v.logger.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var o=r.stats;if(t&&o&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&n.autoLevel&&n.level){var a=performance.now()-o.trequest,s=Math.abs(t.playbackRate);if(a>500*n.duration/s){var l=e.levels,c=Math.max(1,o.bw?o.bw/8:1e3*o.loaded/a),h=l[n.level],f=h.realBitrate?Math.max(h.realBitrate,h.bitrate):h.bitrate,p=o.total?o.total:Math.max(o.loaded,Math.round(n.duration*f/8)),y=t.currentTime,g=(p-o.loaded)/c,m=(d.default.bufferInfo(t,y,e.config.maxBufferHole).end-y)/s;if(m<2*n.duration/s&&g>m){var b=void 0,_=void 0;for(_=n.level-1;_>i;_--){var E=l[_].realBitrate?Math.max(l[_].realBitrate,l[_].bitrate):l[_].bitrate;if((b=n.duration*E/(6.4*c))<m)break}b<g&&(v.logger.warn("loading too slow, abort fragment loading and switch to level "+_+":fragLoadedDelay["+_+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+b.toFixed(1)+"<"+g.toFixed(1)+":"+m.toFixed(1)),e.nextLoadLevel=_,this._bwEstimator.sample(a,o.loaded),r.abort(),this.clearTimer(),e.trigger(u.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:o}))}}}}},{key:"onFragLoaded",value:function(e){var t=e.frag;if("main"===t.type&&!isNaN(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[t.level],r=(n.loaded?n.loaded.bytes:0)+e.stats.loaded,i=(n.loaded?n.loaded.duration:0)+e.frag.duration;n.loaded={bytes:r,duration:i},n.realBitrate=Math.round(8*r/i)}if(e.frag.bitrateTest){var o=e.stats;o.tparsed=o.tbuffered=o.tload,this.onFragBuffered(e)}}}},{key:"onFragBuffered",value:function(e){var t=e.stats,n=e.frag;if(!(!0===t.aborted||1!==n.loadCounter||"main"!==n.type||isNaN(n.sn)||n.bitrateTest&&t.tload!==t.tbuffered)){var r=t.tparsed-t.trequest;v.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(r,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=r/1e3:this.bitrateTestDelay=0}}},{key:"onError",value:function(e){switch(e.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}}},{key:"clearTimer",value:function(){clearInterval(this.timer),this.timer=null}},{key:"_findBestLevel",value:function(e,t,n,r,i,o,a,s,l){for(var u=i;u>=r;u--){var c=l[u],h=c.details,f=h?h.totalduration/h.fragments.length:t,d=!!h&&h.live,p=void 0;p=u<=e?a*n:s*n;var y=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,g=y*f/p;if(v.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(p)+"/"+y+"/"+f+"/"+o+"/"+g),p>y&&(!g||d&&!this.bitrateTestDelay||g<o))return u}return-1}},{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var n=this._nextABRAutoLevel;return-1!==e&&(n=Math.min(e,n)),n},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,n=e.levels,r=e.config,i=e.minAutoLevel,o=e.media,a=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=o?o.currentTime:0,u=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,c=this._bwEstimator?this._bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,h=(d.default.bufferInfo(o,l,r.maxBufferHole).end-l)/u,f=this._findBestLevel(a,s,c,i,t,h,r.abrBandWidthFactor,r.abrBandWidthUpFactor,n);if(f>=0)return f;v.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=s?Math.min(s,r.maxStarvationDelay):r.maxStarvationDelay,y=r.abrBandWidthFactor,g=r.abrBandWidthUpFactor;if(0===h){var m=this.bitrateTestDelay;if(m){p=(s?Math.min(s,r.maxLoadingDelay):r.maxLoadingDelay)-m,v.logger.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),y=g=1}}return f=this._findBestLevel(a,s,c,i,t,h+p,y,g,n),Math.max(f,0)}}]),t}(h.default);t.default=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(500),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t,n,i,o){r(this,e),this.hls=t,this.defaultEstimate_=o,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new a.default(n),this.fast_=new a.default(i)}return i(e,[{key:"sample",value:function(e,t){e=Math.max(e,this.minDelayMs_);var n=8e3*t/e,r=e/1e3;this.fast_.sample(r,n),this.slow_.sample(r,n)}},{key:"canEstimate",value:function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_}},{key:"getEstimate",value:function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}},{key:"destroy",value:function(){}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return i(e,[{key:"sample",value:function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}},{key:"getTotalWeight",value:function(){return this.totalWeight_}},{key:"getEstimate",value:function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(13),u=r(l),c=n(24),h=r(c),f=n(8),d=n(19),p=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.MANIFEST_PARSED,u.default.BUFFER_RESET,u.default.BUFFER_APPENDING,u.default.BUFFER_CODECS,u.default.BUFFER_EOS,u.default.BUFFER_FLUSHING,u.default.LEVEL_PTS_UPDATED,u.default.LEVEL_UPDATED));return n._msDuration=null,n._levelDuration=null,n.onsbue=n.onSBUpdateEnd.bind(n),n.onsbe=n.onSBUpdateError.bind(n),n.pendingTracks={},n.tracks={},n}return a(t,e),s(t,[{key:"destroy",value:function(){h.default.prototype.destroy.call(this)}},{key:"onLevelPtsUpdated",value:function(e){var t=e.type,n=this.tracks.audio;if("audio"===t&&n&&"audio/mpeg"===n.container){var r=this.sourceBuffer.audio;if(Math.abs(r.timestampOffset-e.start)>.1){var i=r.updating;try{r.abort()}catch(e){i=!0,f.logger.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(f.logger.warn("change mpeg audio timestamp offset from "+r.timestampOffset+" to "+e.start),r.timestampOffset=e.start)}}}},{key:"onManifestParsed",value:function(e){var t=e.audio,n=e.video||e.levels.length&&e.audio,r=0;e.altAudio&&(t||n)&&(r=(t?1:0)+(n?1:0),f.logger.log(r+" sourceBuffer(s) expected")),this.sourceBufferNb=r}},{key:"onMediaAttaching",value:function(e){var t=this.media=e.media;if(t){var n=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),n.addEventListener("sourceopen",this.onmso),n.addEventListener("sourceended",this.onmse),n.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(n)}}},{key:"onMediaDetaching",value:function(){f.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){f.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this.media.src),this.media.removeAttribute("src"),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(u.default.MEDIA_DETACHED)}},{key:"onMediaSourceOpen",value:function(){f.logger.log("media source opened"),this.hls.trigger(u.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()}},{key:"checkPendingTracks",value:function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())}},{key:"onMediaSourceClose",value:function(){f.logger.log("media source closed")}},{key:"onMediaSourceEnded",value:function(){f.logger.log("media source ended")}},{key:"onSBUpdateEnd",value:function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;f.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,n=this.segments.reduce(function(e,n){return n.parent===t?e+1:e},0);this.hls.trigger(u.default.BUFFER_APPENDED,{parent:t,pending:n}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()}},{key:"onSBUpdateError",value:function(e){f.logger.error("sourceBuffer error:",e),this.hls.trigger(u.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferReset",value:function(){var e=this.sourceBuffer;for(var t in e){var n=e[t];try{this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this.onsbue),n.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}},{key:"onBufferCodecs",value:function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var n=this.mediaSource;n&&"open"===n.readyState&&this.checkPendingTracks()}}},{key:"createSourceBuffers",value:function(e){var t=this.sourceBuffer,n=this.mediaSource;for(var r in e)if(!t[r]){var i=e[r],o=i.levelCodec||i.codec,a=i.container+";codecs="+o;f.logger.log("creating sourceBuffer("+a+")");try{var s=t[r]=n.addSourceBuffer(a);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[r]={codec:o,container:i.container},i.buffer=s}catch(e){f.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(u.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:a})}}this.hls.trigger(u.default.BUFFER_CREATED,{tracks:e})}},{key:"onBufferAppending",value:function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())}},{key:"onBufferAppendFail",value:function(e){f.logger.error("sourceBuffer error:",e.event),this.hls.trigger(u.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferEos",value:function(e){var t=this.sourceBuffer,n=e.type;for(var r in t)n&&r!==n||t[r].ended||(t[r].ended=!0,f.logger.log(r+" sourceBuffer now EOS"));this.checkEos()}},{key:"checkEos",value:function(){var e=this.sourceBuffer,t=this.mediaSource;if(!t||"open"!==t.readyState)return void(this._needsEos=!1);for(var n in e){var r=e[n];if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}f.logger.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){f.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}},{key:"onBufferFlushing",value:function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()}},{key:"onLevelUpdated",value:function(e){var t=e.details;0!==t.fragments.length&&(this._levelDuration=t.totalduration+t.fragments[0].start,this.updateMediaElementDuration())}},{key:"updateMediaElementDuration",value:function(){var e=this.media,t=this.mediaSource,n=this.sourceBuffer,r=this._levelDuration;if(null!==r&&e&&t&&n&&0!==e.readyState&&"open"===t.readyState){for(var i in n)if(n[i].updating)return;null===this._msDuration&&(this._msDuration=t.duration);var o=e.duration;(r>this._msDuration&&r>o||o===1/0||isNaN(o))&&(f.logger.log("Updating mediasource duration to "+r.toFixed(3)),this._msDuration=t.duration=r)}}},{key:"doFlush",value:function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;try{for(var r in n)t+=n[r].buffered.length}catch(e){f.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(u.default.BUFFER_FLUSHED)}}},{key:"doAppending",value:function(){var e=this.hls,t=this.sourceBuffer,n=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void f.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(n&&n.length){var r=n.shift();try{var i=r.type,o=t[i];o?o.updating?n.unshift(r):(o.ended=!1,this.parent=r.parent,o.appendBuffer(r.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){f.logger.error("error while trying to append buffer:"+t.message),n.unshift(r);var a={type:d.ErrorTypes.MEDIA_ERROR,parent:r.parent};if(22===t.code)return this.segments=[],a.details=d.ErrorDetails.BUFFER_FULL_ERROR,a.fatal=!1,void e.trigger(u.default.ERROR,a);if(this.appendError?this.appendError++:this.appendError=1,a.details=d.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry)return f.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),n=[],a.fatal=!0,void e.trigger(u.default.ERROR,a);a.fatal=!1,e.trigger(u.default.ERROR,a)}}}}},{key:"flushBuffer",value:function(e,t,n){var r,i,o,a,s,l,u=this.sourceBuffer;if(Object.keys(u).length){if(f.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var c in u)if(!n||c===n){if(r=u[c],r.ended=!1,r.updating)return f.logger.warn("cannot flush, sb updating in progress"),!1;try{for(i=0;i<r.buffered.length;i++)if(o=r.buffered.start(i),a=r.buffered.end(i),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(s=e,l=t):(s=Math.max(o,e),l=Math.min(a,t)),Math.min(l,a)-s>.5)return this.flushBufferCounter++,f.logger.log("flush "+c+" ["+s+","+l+"], of ["+o+","+a+"], pos:"+this.media.currentTime),r.remove(s,l),!1}catch(e){f.logger.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else f.logger.warn("abort flushing too many retries");f.logger.log("buffer flushed")}return!0}}]),t}(h.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(13),u=r(l),c=n(24),h=r(c),f=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u.default.FPS_DROP_LEVEL_CAPPING,u.default.MEDIA_ATTACHING,u.default.MANIFEST_PARSED))}return a(t,e),s(t,[{key:"destroy",value:function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))}},{key:"onFpsDropLevelCapping",value:function(e){t.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)}},{key:"onMediaAttaching",value:function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null}},{key:"onManifestParsed",value:function(e){var t=this.hls;this.restrictedLevels=[],t.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}},{key:"detectPlayerSize",value:function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}},{key:"getMaxLevel",value:function(e){var n=this;if(!this.levels)return-1;var r=this.levels.filter(function(r,i){return t.isLevelAllowed(i,n.restrictedLevels)&&i<=e});return t.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}},{key:"mediaWidth",get:function(){var e=void 0,n=this.media;return n&&(e=n.width||n.clientWidth||n.offsetWidth,e*=t.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,n=this.media;return n&&(e=n.height||n.clientHeight||n.offsetHeight,e*=t.contentScaleFactor),e}}],[{key:"isLevelAllowed",value:function(e){return-1===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).indexOf(e)}},{key:"getMaxLevelByMediaSize",value:function(e,t,n){if(!e||e&&!e.length)return-1;for(var r=e.length-1,i=0;i<e.length;i+=1){var o=e[i];if((o.width>=t||o.height>=n)&&function(e,t){return!t||(e.width!==t.width||e.height!==t.height)}(o,e[i+1])){r=i;break}}return r}},{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}]),t}(h.default);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(13),u=r(l),c=n(24),h=r(c),f=n(8),d=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u.default.MEDIA_ATTACHING))}return a(t,e),s(t,[{key:"destroy",value:function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1}},{key:"onMediaAttaching",value:function(e){var t=this.hls.config;if(t.capLevelOnFPSDrop){"function"==typeof(this.video=e.media instanceof HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod)}}},{key:"checkFPS",value:function(e,t,n){var r=performance.now();if(t){if(this.lastTime){var i=r-this.lastTime,o=n-this.lastDroppedFrames,a=t-this.lastDecodedFrames,s=1e3*o/i,l=this.hls;if(l.trigger(u.default.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:n}),s>0&&o>l.config.fpsDroppedMonitoringThreshold*a){var c=l.currentLevel;f.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=c)&&(c-=1,l.trigger(u.default.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:l.currentLevel}),l.autoLevelCapping=c,l.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}},{key:"checkFPSInterval",value:function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}]),t}(h.default);t.default=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(8),a=function(){function e(t){r(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return i(e,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:"load",value:function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()}},{key:"loadInternal",value:function(){var e,t=this.context;e="undefined"!=typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var r=this.xhrSetup;try{if(r)try{r(e,t.url)}catch(n){e.open("GET",t.url,!0),r(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(n){return void this.callbacks.onError({code:e.status,text:n.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()}},{key:"readystatechange",value:function(e){var t=e.currentTarget,n=t.readyState,r=this.stats,i=this.context,a=this.config;if(!r.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===r.tfirst&&(r.tfirst=Math.max(performance.now(),r.trequest)),4===n){var s=t.status;if(s>=200&&s<300){r.tload=Math.max(r.tfirst,performance.now());var l=void 0,u=void 0;"arraybuffer"===i.responseType?(l=t.response,u=l.byteLength):(l=t.responseText,u=l.length),r.loaded=r.total=u;var c={url:t.responseURL,data:l};this.callbacks.onSuccess(c,r,i,t)}else r.retry>=a.maxRetry||s>=400&&s<499?(o.logger.error(s+" while loading "+i.url),this.callbacks.onError({code:s,text:t.statusText},i,t)):(o.logger.warn(s+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),r.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)}},{key:"loadtimeout",value:function(){o.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)}},{key:"loadprogress",value:function(e){var t=e.currentTarget,n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total);var r=this.callbacks.onProgress;r&&r(n,this.context,null,t)}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(13),u=r(l),c=n(24),h=r(c),f=n(8),d=n(19),p=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u.default.MANIFEST_LOADING,u.default.MANIFEST_LOADED,u.default.AUDIO_TRACK_LOADED,u.default.ERROR));return n.ticks=0,n.ontick=n.tick.bind(n),n}return a(t,e),s(t,[{key:"destroy",value:function(){this.cleanTimer(),h.default.prototype.destroy.call(this)}},{key:"cleanTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"tick",value:function(){1===++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){this.updateTrack(this.trackId)}},{key:"onError",value:function(e){e.fatal&&e.type===d.ErrorTypes.NETWORK_ERROR&&this.cleanTimer()}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(e){var t=this,n=e.audioTracks||[],r=!1;this.tracks=n,this.hls.trigger(u.default.AUDIO_TRACKS_UPDATED,{audioTracks:n});var i=0;n.forEach(function(e){if(e.default&&!r)return t.audioTrack=i,void(r=!0);i++}),!1===r&&n.length&&(f.logger.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)}},{key:"onAudioTrackLoaded",value:function(e){e.id<this.tracks.length&&(f.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&this.cleanTimer())}},{key:"setAudioTrackInternal",value:function(e){if(e>=0&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,f.logger.log("switching to audioTrack "+e);var t=this.tracks[e],n=this.hls,r=t.type,i=t.url,o={id:e,type:r,url:i};n.trigger(u.default.AUDIO_TRACK_SWITCH,o),n.trigger(u.default.AUDIO_TRACK_SWITCHING,o);var a=t.details;!i||void 0!==a&&!0!==a.live||(f.logger.log("(re)loading playlist for audioTrack "+e),n.trigger(u.default.AUDIO_TRACK_LOADING,{url:i,id:e}))}}},{key:"updateTrack",value:function(e){if(e>=0&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,f.logger.log("updating audioTrack "+e);var t=this.tracks[e],n=t.url,r=t.details;!n||void 0!==r&&!0!==r.live||(f.logger.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(u.default.AUDIO_TRACK_LOADING,{url:n,id:e}))}}},{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.trackId===e&&void 0!==this.tracks[e].details||this.setAudioTrackInternal(e)}}]),t}(h.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(135),u=r(l),c=n(97),h=r(c),f=n(192),d=r(f),p=n(13),v=r(p),y=n(24),g=r(y),m=n(197),b=r(m),_=n(198),E=r(_),k=n(19),T=n(8),w=n(507),S={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},C=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,v.default.MEDIA_ATTACHED,v.default.MEDIA_DETACHING,v.default.AUDIO_TRACKS_UPDATED,v.default.AUDIO_TRACK_SWITCHING,v.default.AUDIO_TRACK_LOADED,v.default.KEY_LOADED,v.default.FRAG_LOADED,v.default.FRAG_PARSING_INIT_SEGMENT,v.default.FRAG_PARSING_DATA,v.default.FRAG_PARSED,v.default.ERROR,v.default.BUFFER_CREATED,v.default.BUFFER_APPENDED,v.default.BUFFER_FLUSHED,v.default.INIT_PTS_FOUND));return n.config=e.config,n.audioCodecSwap=!1,n.ticks=0,n._state=S.STOPPED,n.ontick=n.tick.bind(n),n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}return a(t,e),s(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),g.default.prototype.destroy.call(this),this.state=S.STOPPED}},{key:"onInitPtsFound",value:function(e){var t=e.id,n=e.frag.cc,r=e.initPTS;"main"===t&&(this.initPTS[n]=r,this.videoTrackCC=n,T.logger.log("InitPTS for cc:"+n+" found from video track:"+r),this.state===S.WAITING_INIT_PTS&&this.tick())}},{key:"startLoad",value:function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,t>0&&-1===e?(T.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=S.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=S.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=S.STOPPED}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=S.STOPPED}},{key:"tick",value:function(){1===++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){var e,t,n,r=this.hls,i=r.config;switch(this.state){case S.ERROR:case S.PAUSED:case S.BUFFER_FLUSHING:break;case S.STARTING:this.state=S.WAITING_TRACK,this.loadedmetadata=!1;break;case S.IDLE:var o=this.tracks;if(!o)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var a=this.mediaBuffer?this.mediaBuffer:this.media,s=h.default.bufferInfo(a,e,i.maxBufferHole),l=s.len,c=s.end,f=this.fragPrevious,d=i.maxMaxBufferLength,p=this.audioSwitch,y=this.trackId;if((l<d||p)&&y<o.length){if(void 0===(n=o[y].details)){this.state=S.WAITING_TRACK;break}if(!p&&!n.live&&f&&f.sn===n.endSN&&(!this.media.seeking||this.media.duration-c<f.duration/2)){this.hls.trigger(v.default.BUFFER_EOS,{type:"audio"}),this.state=S.ENDED;break}var g=n.fragments,m=g.length,b=g[0].start,_=g[m-1].start+g[m-1].duration,E=void 0;if(p)if(n.live&&!n.PTSKnown)T.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),c=0;else if(c=e,n.PTSKnown&&e<b){if(!(s.end>b||s.nextStart))return;T.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=b+.05}if(n.initSegment&&!n.initSegment.data)E=n.initSegment;else if(c<=b){if(E=g[0],null!==this.videoTrackCC&&E.cc!==this.videoTrackCC&&(E=(0,w.findFragWithCC)(g,this.videoTrackCC)),n.live&&E.loadIdx&&E.loadIdx===this.fragLoadIdx){var C=s.nextStart?s.nextStart:b;return T.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(C+.05)),void(this.media.currentTime=C+.05)}}else{var O=void 0,P=i.maxFragLookUpTolerance,R=f?g[f.sn-g[0].sn+1]:void 0,L=function(e){var t=Math.min(P,e.duration);return e.start+e.duration-t<=c?1:e.start-t>c&&e.start?-1:0};c<_?(c>_-P&&(P=0),O=R&&!L(R)?R:u.default.search(g,L)):O=g[m-1],O&&(E=O,b=O.start,f&&E.level===f.level&&E.sn===f.sn&&(E.sn<n.endSN?(E=g[E.sn+1-n.startSN],T.logger.log("SN just loaded, load next one: "+E.sn)):E=null))}if(E)if(E.decryptdata&&null!=E.decryptdata.uri&&null==E.decryptdata.key)T.logger.log("Loading key for "+E.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+y),this.state=S.KEY_LOADING,r.trigger(v.default.KEY_LOADING,{frag:E});else{if(T.logger.log("Loading "+E.sn+", cc: "+E.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+y+", currentTime:"+e+",bufferEnd:"+c.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,E.loadCounter){E.loadCounter++;var A=i.fragLoadingLoopThreshold;if(E.loadCounter>A&&Math.abs(this.fragLoadIdx-E.loadIdx)<A)return void r.trigger(v.default.ERROR,{type:k.ErrorTypes.MEDIA_ERROR,details:k.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:E})}else E.loadCounter=1;E.loadIdx=this.fragLoadIdx,this.fragCurrent=E,this.startFragRequested=!0,isNaN(E.sn)||(this.nextLoadPosition=E.start+E.duration),r.trigger(v.default.FRAG_LOADING,{frag:E}),this.state=S.FRAG_LOADING}}break;case S.WAITING_TRACK:t=this.tracks[this.trackId],t&&t.details&&(this.state=S.IDLE);break;case S.FRAG_LOADING_WAITING_RETRY:var x=performance.now(),D=this.retryDate;a=this.media;var I=a&&a.seeking;(!D||x>=D||I)&&(T.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=S.IDLE);break;case S.WAITING_INIT_PTS:var M=this.videoTrackCC;if(void 0===this.initPTS[M])break;var j=this.waitingFragment;if(j){var N=j.frag.cc;M!==N?(t=this.tracks[this.trackId],t.details&&t.details.live&&(T.logger.warn("Waiting fragment CC ("+N+") does not match video track CC ("+M+")"),this.waitingFragment=null,this.state=S.IDLE)):(this.state=S.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=S.IDLE;break;case S.STOPPED:case S.FRAG_LOADING:case S.PARSING:case S.PARSED:case S.ENDED:}}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(T.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.tracks;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){this.state===S.ENDED&&(this.state=S.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()}},{key:"onMediaEnded",value:function(){this.startPosition=this.lastCurrentTime=0}},{key:"onAudioTracksUpdated",value:function(e){T.logger.log("audio tracks updated"),this.tracks=e.audioTracks}},{key:"onAudioTrackSwitching",value:function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=S.PAUSED,this.waitingFragment=null,t?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=S.IDLE,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()}},{key:"onAudioTrackLoaded",value:function(e){var t=e.details,n=e.id,r=this.tracks[n],i=t.totalduration,o=0;if(T.logger.log("track "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),t.live){var a=r.details;a&&t.fragments.length>0?(b.default.mergeDetails(a,t),o=t.fragments[0].start,t.PTSKnown?T.logger.log("live audio playlist sliding:"+o.toFixed(3)):T.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,T.logger.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(r.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;isNaN(s)?this.startPosition=0:(T.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===S.WAITING_TRACK&&(this.state=S.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===S.KEY_LOADING&&(this.state=S.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent,n=e.frag;if(this.state===S.FRAG_LOADING&&t&&"audio"===n.type&&n.level===t.level&&n.sn===t.sn){var r=this.tracks[this.trackId],i=r.details,o=i.totalduration,a=t.level,s=t.sn,l=t.cc,u=this.config.defaultAudioCodec||r.audioCodec||"mp4a.40.2",c=this.stats=e.stats;if("initSegment"===s)this.state=S.IDLE,c.tparsed=c.tbuffered=performance.now(),i.initSegment.data=e.payload,this.hls.trigger(v.default.FRAG_BUFFERED,{stats:c,frag:t,id:"audio"}),this.tick();else{this.state=S.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new d.default(this.hls,"audio"));var h=this.initPTS[l],f=i.initSegment?i.initSegment.data:[];if(i.initSegment||void 0!==h){this.pendingBuffering=!0,T.logger.log("Demuxing "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+a);this.demuxer.push(e.payload,f,u,null,t,o,!1,h)}else T.logger.log("unknown video PTS for continuity counter "+l+", waiting for video PTS before demuxing audio frag "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+a),this.waitingFragment=e,this.state=S.WAITING_INIT_PTS}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent,n=e.frag;if(t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===S.PARSING){var r=e.tracks,i=void 0;if(r.video&&delete r.video,i=r.audio){i.levelCodec=i.codec,i.id=e.id,this.hls.trigger(v.default.BUFFER_CODECS,r),T.logger.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var o=i.initSegment;if(o){var a={type:"audio",data:o,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[a]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(v.default.BUFFER_APPENDING,a))}this.tick()}}}},{key:"onFragParsingData",value:function(e){var t=this,n=this.fragCurrent,r=e.frag;if(n&&"audio"===e.id&&"audio"===e.type&&r.sn===n.sn&&r.level===n.level&&this.state===S.PARSING){var i=this.trackId,o=this.tracks[i],a=this.hls;isNaN(e.endPTS)&&(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),T.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),b.default.updateFragPTSDTS(o.details,n,e.startPTS,e.endPTS);var s=this.audioSwitch,l=this.media,u=!1;if(s&&l)if(l.readyState){var c=l.currentTime;T.logger.log("switching audio track : currentTime:"+c),c>=e.startPTS&&(T.logger.log("switching audio track : flushing all audio"),this.state=S.BUFFER_FLUSHING,a.trigger(v.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),u=!0,this.audioSwitch=!1,a.trigger(v.default.AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,a.trigger(v.default.AUDIO_TRACK_SWITCHED,{id:i});var h=this.pendingData;this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&t.length&&h.push({type:e.type,data:t,parent:"audio",content:"data"})}),!u&&h.length&&(h.forEach(function(e){t.state===S.PARSING&&(t.pendingBuffering=!0,t.hls.trigger(v.default.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent,n=e.frag;t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===S.PARSING&&(this.stats.tparsed=performance.now(),this.state=S.PARSED,this._checkAppendedParsed())}},{key:"onBufferCreated",value:function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0)}},{key:"onBufferAppended",value:function(e){if("audio"===e.parent){var t=this.state;t!==S.PARSING&&t!==S.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}}},{key:"_checkAppendedParsed",value:function(){if(!(this.state!==S.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,n=this.hls;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),n.trigger(v.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var r=this.mediaBuffer?this.mediaBuffer:this.media;T.logger.log("audio buffered : "+E.default.toString(r.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(v.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=S.IDLE}this.tick()}}},{key:"onError",value:function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case k.ErrorDetails.FRAG_LOAD_ERROR:case k.ErrorDetails.FRAG_LOAD_TIMEOUT:if(!e.fatal){var n=this.fragLoadError;n?n++:n=1;var r=this.config;if(n<=r.fragLoadingMaxRetry){this.fragLoadError=n,t.loadCounter=0;var i=Math.min(Math.pow(2,n-1)*r.fragLoadingRetryDelay,r.fragLoadingMaxRetryTimeout);T.logger.warn("audioStreamController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.state=S.FRAG_LOADING_WAITING_RETRY}else T.logger.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=S.ERROR}break;case k.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case k.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case k.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case k.ErrorDetails.KEY_LOAD_ERROR:case k.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==S.ERROR&&(this.state=e.fatal?S.ERROR:S.IDLE,T.logger.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."));break;case k.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===S.PARSING||this.state===S.PARSED)){var o=this.mediaBuffer,a=this.media.currentTime;if(o&&h.default.isBuffered(o,a)&&h.default.isBuffered(o,a+.5)){var s=this.config;s.maxMaxBufferLength>=s.maxBufferLength&&(s.maxMaxBufferLength/=2,T.logger.warn("audio:reduce max buffer length to "+s.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*s.fragLoadingLoopThreshold),this.state=S.IDLE}else T.logger.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=S.BUFFER_FLUSHING,this.hls.trigger(v.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}}},{key:"onBufferFlushed",value:function(){var e=this,t=this.pendingData;t&&t.length?(T.logger.log("appending pending audio data on Buffer Flushed"),t.forEach(function(t){e.hls.trigger(v.default.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=S.PARSED):(this.state=S.IDLE,this.fragPrevious=null,this.tick())}},{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,T.logger.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),t}(g.default);t.default=C},function(e,t,n){"use strict";function r(e,t){return o.default.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})}Object.defineProperty(t,"__esModule",{value:!0}),t.findFragWithCC=r;var i=n(135),o=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";var r=n(199),i={newCue:function(e,t,n,i){for(var o,a,s,l,u,c=window.VTTCue||window.TextTrackCue,h=0;h<i.rows.length;h++)if(o=i.rows[h],s=!0,l=0,u="",!o.isEmpty()){for(var f=0;f<o.chars.length;f++)o.chars[f].uchar.match(/\s/)&&s?l++:(u+=o.chars[f].uchar,s=!1);o.cueStartTime=t,t===n&&(n+=1e-4),a=new c(t,n,(0,r.fixLineBreaks)(u.trim())),l>=16?l--:l++,navigator.userAgent.match(/Firefox\//)?a.line=h+1:a.line=h>7?h-2:h+1,a.align="left",a.position=Math.max(0,Math.min(100,l/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(a)}}};e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){return"string"==typeof e&&(!!o[e.toLowerCase()]&&e.toLowerCase())}function t(e){return"string"==typeof e&&(!!a[e.toLowerCase()]&&e.toLowerCase())}function n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function r(r,o,a){var s=this,l=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),u={};l?s=document.createElement("custom"):u.enumerable=!0,s.hasBeenReset=!1;var c="",h=!1,f=r,d=o,p=a,v=null,y="",g=!0,m="auto",b="start",_=50,E="middle",k=50,T="middle";if(Object.defineProperty(s,"id",n({},u,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(s,"pauseOnExit",n({},u,{get:function(){return h},set:function(e){h=!!e}})),Object.defineProperty(s,"startTime",n({},u,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",n({},u,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",n({},u,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",n({},u,{get:function(){return v},set:function(e){v=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",n({},u,{get:function(){return y},set:function(t){var n=e(t);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");y=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",n({},u,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",n({},u,{get:function(){return m},set:function(e){if("number"!=typeof e&&e!==i)throw new SyntaxError("An invalid number or illegal string was specified.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",n({},u,{get:function(){return b},set:function(e){var n=t(e);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");b=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",n({},u,{get:function(){return _},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",n({},u,{get:function(){return E},set:function(e){var n=t(e);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");E=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",n({},u,{get:function(){return k},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");k=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",n({},u,{get:function(){return T},set:function(e){var n=t(e);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");T=n,this.hasBeenReset=!0}})),s.displayState=void 0,l)return s}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var i="auto",o={"":!0,lr:!0,rl:!0},a={start:!0,middle:!0,end:!0,left:!0,right:!0};return r.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},r}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}function l(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}function u(e,t,n,r){return Math.min(t,r)-Math.max(e,n)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(13),f=r(h),d=n(24),p=r(d),v=n(511),y=r(v),g=n(512),m=r(g),b=n(8),_=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f.default.MEDIA_ATTACHING,f.default.MEDIA_DETACHING,f.default.FRAG_PARSING_USERDATA,f.default.MANIFEST_LOADING,f.default.MANIFEST_LOADED,f.default.FRAG_LOADED,f.default.LEVEL_SWITCHING,f.default.INIT_PTS_FOUND));if(n.hls=e,n.config=e.config,n.enabled=!0,n.Cues=e.config.cueHandler,n.textTracks=[],n.tracks=[],n.unparsedVttFrags=[],n.initPTS=void 0,n.cueRanges=[],n.config.enableCEA708Captions){var r=n,a=function(e,t){var n=null;try{n=new window.Event("addtrack")}catch(e){n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)},l={newCue:function(e,t,n){if(!r.textTrack1){var i=r.getExistingTrack("1");if(i)r.textTrack1=i,s(r.textTrack1),a(r.textTrack1,r.media);else{var o=r.createTextTrack("captions",r.config.captionsTextTrack1Label,r.config.captionsTextTrack1LanguageCode);o&&(o.textTrack1=!0,r.textTrack1=o)}}r.addCues("textTrack1",e,t,n)}},u={newCue:function(e,t,n){if(!r.textTrack2){var i=r.getExistingTrack("2");if(i)r.textTrack2=i,s(r.textTrack2),a(r.textTrack2,r.media);else{var o=r.createTextTrack("captions",r.config.captionsTextTrack2Label,r.config.captionsTextTrack1LanguageCode);o&&(o.textTrack2=!0,r.textTrack2=o)}}r.addCues("textTrack2",e,t,n)}};n.cea608Parser=new y.default(0,l,u)}return n}return a(t,e),c(t,[{key:"addCues",value:function(e,t,n,r){for(var i=this.cueRanges,o=!1,a=i.length;a--;){var s=i[a],l=u(s[0],s[1],t,n);if(l>=0&&(s[0]=Math.min(s[0],t),s[1]=Math.max(s[1],n),o=!0,l/(n-t)>.5))return}o||i.push([t,n]),this.Cues.newCue(this[e],t,n,r)}},{key:"onInitPtsFound",value:function(e){var t=this;void 0===this.initPTS&&(this.initPTS=e.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(e){t.onFragLoaded(e)}),this.unparsedVttFrags=[])}},{key:"getExistingTrack",value:function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var r=t.textTracks[n],i="textTrack"+e;if(!0===r[i])return r}return null}},{key:"createTextTrack",value:function(e,t,n){var r=this.media;if(r)return r.addTextTrack(e,t,n)}},{key:"destroy",value:function(){p.default.prototype.destroy.call(this)}},{key:"onMediaAttaching",value:function(e){this.media=e.media}},{key:"onMediaDetaching",value:function(){s(this.textTrack1),s(this.textTrack2)}},{key:"onManifestLoading",value:function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0};var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)s(t[n])}}},{key:"onManifestLoaded",value:function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var n=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,r){var i=void 0;if(r<n.length){var o=n[r];l(o,e)&&(i=o)}i||(i=t.createTextTrack("subtitles",e.name,e.lang)),i.mode=e.default?"showing":"hidden",t.textTracks.push(i)})}}},{key:"onLevelSwitching",value:function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions}},{key:"onFragLoaded",value:function(e){var t=e.frag,n=e.payload;if("main"===t.type){var r=t.sn;if(r!==this.lastSn+1){var i=this.cea608Parser;i&&i.reset()}this.lastSn=r}else if("subtitle"===t.type)if(n.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(e);var o=this.vttCCs;o[t.cc]||(o[t.cc]={start:t.start,prevCC:this.prevCC,new:!0},this.prevCC=t.cc);var a=this.textTracks,s=this.hls;m.default.parse(n,this.initPTS,o,t.cc,function(e){var n=a[t.trackId];e.forEach(function(e){if(!n.cues.getCueById(e.id))try{n.addCue(e)}catch(r){var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,n.addCue(t)}}),s.trigger(f.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){b.logger.log("Failed to parse VTT cue: "+e),s.trigger(f.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})}else this.hls.trigger(f.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})}},{key:"onFragParsingUserdata",value:function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var n=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,n)}}},{key:"extractCea608Data",value:function(e){for(var t,n,r,i,o,a=31&e[0],s=2,l=[],u=0;u<a;u++)t=e[s++],n=127&e[s++],r=127&e[s++],i=0!=(4&t),o=3&t,0===n&&0===r||i&&0===o&&(l.push(n),l.push(r));return l}}]),t}(p.default);t.default=_},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},a=function(e){var t=e;return o.hasOwnProperty(e)&&(t=o[e]),String.fromCharCode(t)},s=15,l=100,u={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},c={17:2,18:4,21:6,22:8,23:10,19:13,20:15},h={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},f={25:2,26:4,29:6,30:8,31:10,27:13,28:15},d=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],p={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},v=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},y=function(){function e(t,n,i,o,a){r(this,e),this.foreground=t||"white",this.underline=n||!1,this.italics=i||!1,this.background=o||"black",this.flash=a||!1}return i(e,[{key:"reset",value:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}},{key:"setStyles",value:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}}},{key:"isDefault",value:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}},{key:"equals",value:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}},{key:"copy",value:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}},{key:"toString",value:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}]),e}(),g=function(){function e(t,n,i,o,a,s){r(this,e),this.uchar=t||" ",this.penState=new y(n,i,o,a,s)}return i(e,[{key:"reset",value:function(){this.uchar=" ",this.penState.reset()}},{key:"setChar",value:function(e,t){this.uchar=e,this.penState.copy(t)}},{key:"setPenState",value:function(e){this.penState.copy(e)}},{key:"equals",value:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}},{key:"copy",value:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)}},{key:"isEmpty",value:function(){return" "===this.uchar&&this.penState.isDefault()}}]),e}(),m=function(){function e(){r(this,e),this.chars=[];for(var t=0;t<l;t++)this.chars.push(new g);this.pos=0,this.currPenState=new y}return i(e,[{key:"equals",value:function(e){for(var t=!0,n=0;n<l;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<l;t++)this.chars[t].copy(e.chars[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<l;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}},{key:"setCursor",value:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(p.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>l&&(p.log("ERROR","Too large cursor position "+this.pos),this.pos=l)}},{key:"moveCursor",value:function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}},{key:"backSpace",value:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}},{key:"insertChar",value:function(e){e>=144&&this.backSpace();var t=a(e);if(this.pos>=l)return void p.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}},{key:"clearFromPos",value:function(e){var t;for(t=e;t<l;t++)this.chars[t].reset()}},{key:"clear",value:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}},{key:"clearToEndOfRow",value:function(){this.clearFromPos(this.pos)}},{key:"getTextString",value:function(){for(var e=[],t=!0,n=0;n<l;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")}},{key:"setPenStyles",value:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}]),e}(),b=function(){function e(){r(this,e),this.rows=[];for(var t=0;t<s;t++)this.rows.push(new m);this.currRow=s-1,this.nrRollUpRows=null,this.reset()}return i(e,[{key:"reset",value:function(){for(var e=0;e<s;e++)this.rows[e].clear();this.currRow=s-1}},{key:"equals",value:function(e){for(var t=!0,n=0;n<s;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<s;t++)this.rows[t].copy(e.rows[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<s;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}},{key:"backSpace",value:function(){this.rows[this.currRow].backSpace()}},{key:"clearToEndOfRow",value:function(){this.rows[this.currRow].clearToEndOfRow()}},{key:"insertChar",value:function(e){this.rows[this.currRow].insertChar(e)}},{key:"setPen",value:function(e){this.rows[this.currRow].setPenStyles(e)}},{key:"moveCursor",value:function(e){this.rows[this.currRow].moveCursor(e)}},{key:"setCursor",value:function(e){p.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)}},{key:"setPAC",value:function(e){p.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<s;n++)this.rows[n].clear();var r=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var o=i.rows[r].cueStartTime;if(o&&o<p.time)for(var a=0;a<this.nrRollUpRows;a++)this.rows[t-this.nrRollUpRows+a+1].copy(i.rows[r+a])}}this.currRow=t;var l=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,c=Math.max(u-1,0);l.setCursor(e.indent),e.color=l.chars[c].penState.foreground}var h={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(h)}},{key:"setBkgData",value:function(e){p.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}},{key:"setRollUpRows",value:function(e){this.nrRollUpRows=e}},{key:"rollUp",value:function(){if(null===this.nrRollUpRows)return void p.log("DEBUG","roll_up but nrRollUpRows not set yet");p.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),p.log("INFO","Rolling up")}},{key:"getDisplayText",value:function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<s;i++){var o=this.rows[i].getTextString();o&&(r=i+1,e?t.push("Row "+r+": '"+o+"'"):t.push(o.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n}},{key:"getTextAndFormat",value:function(){return this.rows}}]),e}(),_=function(){function e(t,n){r(this,e),this.chNr=t,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new b,this.nonDisplayedMemory=new b,this.lastOutputScreen=new b,this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return i(e,[{key:"reset",value:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null}},{key:"getHandler",value:function(){return this.outputFilter}},{key:"setHandler",value:function(e){this.outputFilter=e}},{key:"setPAC",value:function(e){this.writeScreen.setPAC(e)}},{key:"setBkgData",value:function(e){this.writeScreen.setBkgData(e)}},{key:"setMode",value:function(e){e!==this.mode&&(this.mode=e,p.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}},{key:"insertChars",value:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";p.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(p.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}},{key:"ccRCL",value:function(){p.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}},{key:"ccBS",value:function(){p.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}},{key:"ccAOF",value:function(){}},{key:"ccAON",value:function(){}},{key:"ccDER",value:function(){p.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}},{key:"ccRU",value:function(e){p.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}},{key:"ccFON",value:function(){p.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})}},{key:"ccRDC",value:function(){p.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}},{key:"ccTR",value:function(){p.log("INFO","TR"),this.setMode("MODE_TEXT")}},{key:"ccRTD",value:function(){p.log("INFO","RTD"),this.setMode("MODE_TEXT")}},{key:"ccEDM",value:function(){p.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()}},{key:"ccCR",value:function(){p.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()}},{key:"ccENM",value:function(){p.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}},{key:"ccEOC",value:function(){if(p.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,p.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()}},{key:"ccTO",value:function(e){p.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}},{key:"ccMIDROW",value:function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}p.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}},{key:"outputDataUpdate",value:function(){var e=p.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))}},{key:"cueSplitAtTime",value:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}]),e}(),E=function(){function e(t,n,i){r(this,e),this.field=t||1,this.outputs=[n,i],this.channels=[new _(1,n),new _(2,i)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return i(e,[{key:"getHandler",value:function(e){return this.channels[e].getHandler()}},{key:"setHandler",value:function(e,t){this.channels[e].setHandler(t)}},{key:"addData",value:function(e,t){var n,r,i,o=!1;this.lastTime=e,p.setTime(e);for(var a=0;a<t.length;a+=2)if(r=127&t[a],i=127&t[a+1],0!==r||0!==i){if(p.log("DATA","["+v([t[a],t[a+1]])+"] -> ("+v([r,i])+")"),n=this.parseCmd(r,i),n||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n&&(o=this.parseChars(r,i)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(o)}else p.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,p.log("WARNING","Couldn't parse cleaned data "+v([r,i])+" orig: "+v([t[a],t[a+1]])))}else this.dataCounters.padding+=2}},{key:"parseCmd",value:function(e,t){var n=null,r=(20===e||28===e)&&32<=t&&t<=47,i=(23===e||31===e)&&33<=t&&t<=35;if(!r&&!i)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,p.log("DEBUG","Repeated command ("+v([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var o=this.channels[n-1];return 20===e||28===e?32===t?o.ccRCL():33===t?o.ccBS():34===t?o.ccAOF():35===t?o.ccAON():36===t?o.ccDER():37===t?o.ccRU(2):38===t?o.ccRU(3):39===t?o.ccRU(4):40===t?o.ccFON():41===t?o.ccRDC():42===t?o.ccTR():43===t?o.ccRTD():44===t?o.ccEDM():45===t?o.ccCR():46===t?o.ccENM():47===t&&o.ccEOC():o.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0}},{key:"parseMidrow",value:function(e,t){var n=null;if((17===e||25===e)&&32<=t&&t<=47){if((n=17===e?1:2)!==this.currChNr)return p.log("ERROR","Mismatch channel in midrow parsing"),!1;return this.channels[n-1].ccMIDROW(t),p.log("DEBUG","MIDROW ("+v([e,t])+")"),!0}return!1}},{key:"parsePAC",value:function(e,t){var n=null,r=null,i=(17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127,o=(16===e||24===e)&&64<=t&&t<=95;if(!i&&!o)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=e<=23?1:2,r=64<=t&&t<=95?1===n?u[e]:h[e]:1===n?c[e]:f[e];var a=this.interpretPAC(r,t);return this.channels[n-1].setPAC(a),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0}},{key:"interpretPAC",value:function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r}},{key:"parseChars",value:function(e,t){var n=null,r=null,i=null;if(e>=25?(n=2,i=e-8):(n=1,i=e),17<=i&&i<=19){var o=t;o=17===i?t+80:18===i?t+112:t+144,p.log("INFO","Special char '"+a(o)+"' in channel "+n),r=[o]}else 32<=e&&e<=127&&(r=0===t?[e]:[e,t]);if(r){var s=v(r);p.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return r}},{key:"parseBackgroundAttributes",value:function(e,t){var n,r,i,o,a=(16===e||24===e)&&32<=t&&t<=47,s=(23===e||31===e)&&45<=t&&t<=47;return!(!a&&!s)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=d[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,o=this.channels[i-1],o.setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0)}},{key:"reset",value:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null}},{key:"cueSplitAtTime",value:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}}]),e}();t.default=E},function(e,t,n){"use strict";var r=n(199),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(e,t,n){return e.substr(n||0,t.length)===t},a=function(e){var t=parseInt(e.substr(-3)),n=parseInt(e.substr(-6,2)),r=parseInt(e.substr(-9,2)),i=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;return isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)?-1:(t+=1e3*n,t+=6e4*r,t+=36e5*i)},s=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()},l=function(e,t,n){var r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,void(r.new=!1);for(;i&&i.new;)e.ccOffset+=r.start-i.start,r.new=!1,r=i,i=e[r.prevCC];e.presentationOffset=n},u={parse:function(e,t,n,r,u,c){var h=/\r\n|\n\r|\n|\r/g,f=String.fromCharCode.apply(null,new Uint8Array(e)).trim().replace(h,"\n").split("\n"),d="00:00.000",p=0,v=0,y=0,g=[],m=void 0,b=!0,_=new i.default;_.oncue=function(e){var t=n[r],i=n.ccOffset;t&&t.new&&(void 0!==v?i=n.ccOffset=t.start:l(n,r,y)),y&&(i=y+n.ccOffset-n.presentationOffset),e.startTime+=i-v,e.endTime+=i-v,e.id=s(e.startTime)+s(e.endTime)+s(e.text),e.text=decodeURIComponent(escape(e.text)),e.endTime>0&&g.push(e)},_.onparsingerror=function(e){m=e},_.onflush=function(){if(m&&c)return void c(m);u(g)},f.forEach(function(e){if(b){if(o(e,"X-TIMESTAMP-MAP=")){b=!1,e.substr(16).split(",").forEach(function(e){o(e,"LOCAL:")?d=e.substr(6):o(e,"MPEGTS:")&&(p=parseInt(e.substr(7)))});try{t=t<0?t+8589934592:t,p-=t,v=a(d)/1e3,y=p/9e4,-1===v&&(m=new Error("Malformed X-TIMESTAMP-MAP: "+e))}catch(t){m=new Error("Malformed X-TIMESTAMP-MAP: "+e)}return}""===e&&(b=!1)}_.parse(e+"\n")}),_.flush()}};e.exports=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){for(var t=[],n=0;n<e.length;n++)"subtitles"===e[n].kind&&t.push(e[n]);return t}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(13),c=r(u),h=n(24),f=r(h),d=n(8),p=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c.default.MEDIA_ATTACHED,c.default.MEDIA_DETACHING,c.default.MANIFEST_LOADING,c.default.MANIFEST_LOADED,c.default.SUBTITLE_TRACK_LOADED));return n.tracks=[],n.trackId=-1,n.media=void 0,n}return a(t,e),l(t,[{key:"_onTextTracksChanged",value:function(){if(this.media){for(var e=-1,t=s(this.media.textTracks),n=0;n<t.length;n++)"showing"===t[n].mode&&(e=n);this.subtitleTrack=e}}},{key:"destroy",value:function(){f.default.prototype.destroy.call(this)}},{key:"onMediaAttached",value:function(e){this.media=e.media,this.media&&(this.trackChangeListener=this._onTextTracksChanged.bind(this),this.media.textTracks.addEventListener("change",this.trackChangeListener))}},{key:"onMediaDetaching",value:function(){this.media&&(this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(e){var t=this,n=e.subtitles||[],r=!1;this.tracks=n,this.trackId=-1,this.hls.trigger(c.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach(function(e){e.default&&(t.subtitleTrack=e.id,r=!0)})}},{key:"onTick",value:function(){var e=this.trackId,t=this.tracks[e];if(t){var n=t.details;void 0!==n&&!0!==n.live||(d.logger.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(c.default.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}}},{key:"onSubtitleTrackLoaded",value:function(e){var t=this;e.id<this.tracks.length&&(d.logger.log("subtitle track "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(function(){t.onTick()},1e3*e.details.targetduration,this)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))}},{key:"setSubtitleTrackInternal",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,d.logger.log("switching to subtitle track "+e);var t=this.tracks[e];this.hls.trigger(c.default.SUBTITLE_TRACK_SWITCH,{id:e});var n=t.details;void 0!==n&&!0!==n.live||(d.logger.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(c.default.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}}},{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&this.setSubtitleTrackInternal(e)}}]),t}(f.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(13),u=r(l),c=n(24),h=r(c),f=n(8),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u.default.ERROR,u.default.SUBTITLE_TRACKS_UPDATED,u.default.SUBTITLE_TRACK_SWITCH,u.default.SUBTITLE_TRACK_LOADED,u.default.SUBTITLE_FRAG_PROCESSED));return n.config=e.config,n.vttFragSNsProcessed={},n.vttFragQueues=void 0,n.currentlyProcessing=null,n.currentTrackId=-1,n}return a(t,e),s(t,[{key:"destroy",value:function(){h.default.prototype.destroy.call(this)}},{key:"clearVttFragQueues",value:function(){var e=this;this.vttFragQueues={},this.tracks.forEach(function(t){e.vttFragQueues[t.id]=[]})}},{key:"nextFrag",value:function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var e=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.hls.trigger(u.default.FRAG_LOADING,{frag:e})}}},{key:"onSubtitleFragProcessed",value:function(e){e.success&&this.vttFragSNsProcessed[e.frag.trackId].push(e.frag.sn),this.currentlyProcessing=null,this.nextFrag()}},{key:"onError",value:function(e){var t=e.frag;t&&"subtitle"!==t.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())}},{key:"onSubtitleTracksUpdated",value:function(e){var t=this;f.logger.log("subtitle tracks updated"),this.tracks=e.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(e){t.vttFragSNsProcessed[e.id]=[]})}},{key:"onSubtitleTrackSwitch",value:function(e){this.currentTrackId=e.id,this.clearVttFragQueues()}},{key:"onSubtitleTrackLoaded",value:function(e){var t=this.vttFragSNsProcessed[e.id],n=this.vttFragQueues[e.id],r=this.currentlyProcessing?this.currentlyProcessing.sn:-1,i=function(e){return t.indexOf(e.sn)>-1},o=function(e){return n.some(function(t){return t.sn===e.sn})};e.details.fragments.forEach(function(t){i(t)||t.sn===r||o(t)||(t.trackId=e.id,n.push(t))}),this.nextFrag()}}]),t}(h.default);t.default=d},function(e,t){}]);
//# sourceMappingURL=player.js.map